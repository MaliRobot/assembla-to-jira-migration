after
"can we use the styleguide.europeana.eu css? ( *yes* / no )
can we use our own javascript? ( *yes* / no )

*test URL*
* [front-end|http://ec2-54-229-49-47.eu-west-1.compute.amazonaws.com/]
*attachments*
* one attachment shows the front-end look and feel with the blacklight front-end assets
* another attachment show the front-end look and feel with the europeana styleguide stylesheet; no js."
"*Task:*
Import the Europeana Sounds genre vocabulary to our OpenSKOS and expose them as dereferencable SKOS-entities.

Note: Please add sub-tasks to this story as needed.

*Background:*
To support better discovery (eg. facets, autosuggestions, entity pages, browse entry points) for Audio and Music related content the Europeana Sounds project have created a simple sounds genre vocabulary.

Further down the line it is our intention to exploit those vocabularies in the planned Europeana Music Channel in the form of e.g. a Genre facet, in autosuggestions and as browse entry points. The vocabularies as a whole should also be accessible via technical interfaces and individual SKOS-concepts must be dereferencable. We have thus decided to import them into the Europeana OpenSKOS instance and make the vocabularies available as data.europeana.eu URIs.

*Vocabulary file:*
Available in https://docs.google.com/spreadsheets/d/1OBc99QlfM3vZTt8xz-ZzleCTR95NIvsnxyLEDGA-qp0/edit#gid=1343309685 

Note 1: Ignore the Out of Date tab.

Note 2: Some terms have multiple narrower terms. These are represented in one column ""Narrower terms (resource - internal)"" and separated by space;space. If this format for narrower terms should be changed to another separator just do so.

Note 3: The columns filled in in grey can be ignored in the import.

*Vocabulary codes and titles in OpenSKOS:*
Collection is sounds, http://skos.europeana.eu/editor/collections/edit/collection/sounds
Scheme is soundgenres

*Content negotiation:*
When browsers request a URI they should be re-directed to the HTML-page of a term
When non-browsers request a URI they should receive the SKOS/RDF response

Break out the content negotiation to a discrete task if preferred.

*Similar previous ticket:*
Compare with https://europeanadev.assembla.com/spaces/europeana-1914-1918/tickets/366"
"*story*
as a curator or europeana admin, i want to be able to alter application configuration in order to control various elements of the application:

* ideally, settings are made via a gui
** however, initially, an i/f for adjusting a json or yml config file would be fine.
* access to all admin functionality should be determined by a user management module
** ideally this would use a europeana api service, which does not yet exist at this time
** in the meantime, allow modifications without user management

*application elements*
these need to be further defined and given their own story in order to work out the implementation details for each element, however, for the moment, this is to give a general idea of the type of configurations that need to be available:

* home page
** background image
* channel management
** data parameters
*** query that defines the channel
** branding
*** logo
*** name
*** description text
*** colour
** featured items
*** image
*** title
*** link
** widget selection

*references*
* [Software selection|https://docs.google.com/document/d/1HIZ7ecQ0Tn_I5m1D1XG64UtpJf1_6LwWjKtNvYwrM94/edit#heading=h.3oko1rpwrqx6]
* [Channels Configurations|https://docs.google.com/presentation/d/1tD5Cua3jPC9YBeS8eC_T27aegFteZIPWEf_qybskpDg/edit?usp=sharing]
* [deanΓÇÖs front-end prototype|http://demo.deanbirkett.name/400PDV/#p=home]"
"One candidate for the back-end of the Channels application is to build upon [Blacklight|https://github.com/projectblacklight/blacklight].

This ticket will summarise research into the feasibility of doing so, with a focus on using it as a thin client to Europeana (and other relevant) APIs."
Work in progress [in this Google Doc|https://docs.google.com/spreadsheets/d/1t2mQX4-gGNs552NPpxPiMnnhOZXCSF796P7q8VM4m_E/edit#gid=330126885]
"- DONE: Contact Mark Matienzo of DPLA about the status of their Blacklight work. They will use Blacklight and intend to abstract its data source for use with the DPLA API. We will align with him and Chris Beer of Stanford U.


"
"Draft our Ruby development strategy. The objective of this is to facilitate collaborative development within the team, make it easy for new developers to contribute and to produce high quality and maintainable code.

It should cover aspects like:
- Coding conventions
- Automated testing/Unit tests
- Code coverage/metrics tool
- Documentation guidelines
- Interaction with the front-end


Please do add other aspects to the above list and break down this epic into seperate tickets as needed.

Reminder: As with all Europeana development we must use open source tools compatible with [EUPL 1.1|http://en.wikipedia.org/wiki/European_Union_Public_Licence] only.

*Reference:*
* [Ruby development strategy|https://docs.google.com/document/d/1Mwnx3jqbeP4AtA8uYHP6H9rPLSZH8kh_ICN3w9dIv2Q/edit?usp=sharing] (work in progress)"
"Draft our front-end development strategy. The objective of this is to facilitate collaborative development within the team, make it easy for new developers to contribute and to produce high quality and maintainable code.

It should cover aspects like:
- Coding conventions
- Automated testing/Unit tests
- Code coverage/metrics tool
- Documentation guidelines
- Interaction with the Ruby back-end
- Work process with the Pattern Lab

Please do add other aspects to the above list and break down this epic into seperate tickets as needed.

Reminder: As with all Europeana development we must use open source tools compatible with [EUPL 1.1|http://en.wikipedia.org/wiki/European_Union_Public_Licence] only.

*links*
* [Frontend Development Strategy|https://docs.google.com/document/d/1AtGbzTuxUBAYQzXWK2jRJiMCE0VqZhjpVl48uryxJk0/edit#heading=h.cdrfbwro3imj]"
"Draft our (Java) APIs development strategy. The objective of this is to facilitate collaborative development within the team, make it easy for new developers to contribute and to produce high quality and maintainable code.

It should cover aspects like:
- Coding conventions
- Automated testing/Unit tests
- Code coverage/metrics tool
- Documentation

Please do add other aspects to the above list and break down this epic into seperate tickets as needed. I would suggest [Swagger|http://swagger.io/] as a framework as tool support for some of the above (e.g documentation/consoles).

Reminder: As with all Europeana development we must use open source tools compatible with [EUPL 1.1|http://en.wikipedia.org/wiki/European_Union_Public_Licence] only."
"
*Brief*
The purpose of the landing page is the provider the user with:
Orientation (Where am I? What can I do here? What content does Europeana have?) - in text and via imagery
Immediate access to search 
Quick access to exploration opportunities, primarily Channels and Exhibitions
Quick access to the latest blog posts
One ""news feature"" i.e. the ability for portal editors to feature one piece of news

Acceptance criteria:
The layout/wireframe must be completed. Next sprint it needs to be ""filled in"".


"
"- DRAFT- 

Acceptance criteria: 

* object page for just a thumbnail 
* object page for an item with a thumbnail and extra information"
"h1. Background 
The new portal with channels must have at least the same My Europeana functionality that the current portal has. The question is whether new portal/channels should work directly with My Europeana or via a My Europeana API? We also need to make a thorough review of roles in My Europeana and analyse how they should be extended or modified as a result of the introduction of Channels. 

*Expected outcomes:*
The expected outcome of this spike is a technical strategy for how we implement My Europeana in the new portal/channels. The solution must also take into account planned features that likely have a connection with My Europeana (e.g. public user annotations) and must anticipate on the API supporting more than just read operations that require more complex authorisation rules (potentially roles as super administrators, Channel administrators, superusers etc.).
"
"""In order to find the content / records I am looking for as a user, I want to be able to perform a simple keyword search."" 

Acceptance criteria: 

* The search bar needs to be present on the landing page
* The user can type in the search term in the search box 
* The user can hit ""enter"" or click the magnifying glass in order to execute the search  
* The user will land on an relevant object or search results page after execution 





"
"
h1. User story 

As a user I want to be able to facet and filter my search results to only those items that have direct media links and which fulfill certain technical criteria so that I can find media that can support my intended use.


*References:*

*_Available CRF-based facets_*, see http://labs.europeana.eu/api/preview-media-search and the table mid-page.

*_Prototype UI_* that showcases and uses the available facets, http://www.remy.tv/projects/europeana_crf/? and their values. These values are to be used also in this implemtation into the 

*Mockups:*
Colour facets under the IMAGE facet value, https://projects.invisionapp.com/d/main#/console/1083571/79644218/preview shows how we intend to make available the CRF-facets. This is will be accomplished by making the Media Type facet hierarchical, with more specific facet values becoming available once a user has clicked in a media type.

See also this slightly older mockup but which also clearly shows the concept of hierarchical media facets, https://projects.invisionapp.com/d/main#/console/1083571/38239473/preview

*PatternLab:*
Hierarchical facets are available at http://develop.styleguide.eanadev.org/?p=templates-Search-results-list with documentation in the mustache.

*Acceptance criteria:*
The media facet and facet values have been made hierarchical  and allows the user to filter on:
IMAGE - Colour, Black&White, Colours (Hexcodes based), Size (Small/Medium/Large/Extra large), Aspect ratio (Portrait/Landscape), MIME-type, 
SOUND - Quality (HQ), Duration (Very short, Short, Medium, Long) MIME-type
VIDEO - Quality (HD), Duration (Short, Medium, Long), MIME-type
TEXT - Searchable freetext (True), MIME-type
3D - MIME-type"
"
h1. Background 
We have decided that while we will have channels on many themes we want to have a unified database and search index. Anything else would be inherently unscalable. But we need to be able to in an easy and flexible manner select the content to be included in a particular channel. And to do so in a way that does not impact negatively on performance.

*Expected outcomes*
As a result of this spike we should have investigated different options for how to implement the content selection and outlined a technical solution for our choice.

*First ideas*
_Hidden query:_ In the Proof of Concept this has been accomplished by adding hidden filters to all queries within a channel. See https://europeanadev.assembla.com/spaces/europeana-npc/wiki/Channel_filters While simple, this method does not allow for fine granularity of content selection and may have negative impact on performance (lots of OR queries). 

_Macros and Batch Machine Tags:_ A second idea we've discussed is to create ""macros"" based on queries. We would then create one macro per channel (and perhaps also other macros e.g. a GoogleFielTrip macro). These macros could then be exposed for search via the API.
 
An extension of the idea would be to see the macros as an intermediary step in batch machine tagging all objects within the macro result. For example we could then use the complex query for the Music Channel (see link above) to add the value Theme=Music to all individual object hit by the query. The Theme field would be indexed and faceted for search making it possible to in the channel itself simply add the hidden query AND THEME:Music. My Europeana users with a specific level of priviliege coluld then also individual tag or de-tag objects for inclusion in a Theme/Channel. We could thus offer both a way to make a first rough defintion of what objects to include in the channel and allow object per object granular control."
"
h1. Background 
As Channels will rely heavily on our API testing and documentation become more vital than they already are. We need to have ways to quickly test changes to the API and need to have proper functional and technical documentation. This ticket is to explore some ways to make testing more and quicker accessible and the same applies for the technical documentation (functional documentation will all be on Labs). This of course is complementary to the work done on unit testing, which is more about testing whether the code works but does not take the API itself into account.

We've had some good experience with [Swagger|http://swagger.io]:
http://node5.novello.isti.cnr.it:8888/doc/#!/jsonp/query
Swagger is something you include in your application, and then you can annotate API calls in your code. Swagger will then automatically generate technical documentation and a testing interface such as the above. This allows for rapid testing (by developer, testers and POs) without the need for additional development. But of course there may be other alternatives.

*Expected outcome*
* Assess whether there is added benefit to such a solution
* Listing of some options along with a preferred choice
* Estimate on the work required to apply such a library to our current REST API along with documentation
* Listing of API testing procedure (e.g. phase 1: unit testing, phase 2: swagger testing, phase 3: continuous testing and monitoring with Nagios and Runscope)

(we might want to have this task as a cross-team task since we have many APIs and this should be something we ideally adopt as an organisation and not as a team, but let's have a start somewhere)"
"Following up on @dan-nl's creation of a [Vagrant dev env for a generic Blacklight install|https://github.com/dan-nl/blacklight-vagrant], investigate whether it would be of benefit to NPC developers to create one for this project and for the API project, taking care of Ruby and Gem dependencies for the former and Java/Blacklight/Solr dependencies for the latter.

"
"

*Acceptance criteria:*

* Filtering between Music and Fashion. And any other channels available in the portal configuration
* Filter option to be placed as the first facet on the left and headlined Channel
* Filter values to ideally be facets showing also the number of hits the use can expect when choosing a channel"
"*Acceptance criteria:*
- Further keywords (any number) can be added to a search result to further narrow down the search result
- In a first implementation this can be done as a separate refine keyword field (Compare with the current portal functionality) 


*Note:*
In follow-up tickets the UI design should be changed to one where further keywords are added to the same search field as the initial search was made in, http://invis.io/6U1ZS7MA4"
"Enable the user to specify their search by adding a specific field to their search-terms ( ""All fields, Title, Who, What, When, Where, Subject"") 
(see: http://europeana-npc.de.a9sapp.eu/) 

For fields: http://labs.europeana.eu/api/data-fields/
"
"
*Acceptance criteria:*
The scope of this specific tickets is the Search result list page only.

Other tickets will be created for the other pages.


*links*
* [Content Strategy Guidelines|https://docs.google.com/document/d/1UE_o0vcnm6v0LoNJPSKTipYqMXfGBCeHsgbORT0xVCo/edit]
* [Content Strategy Spreadsheet|https://docs.google.com/spreadsheets/d/1sOJlR6kO-1YkA8kzA2iXQkL9yp7b7TxlOuZnb3MryL4/edit]"
"The display of hierarchical objects and their children in the new portal is extremely basic.

Example:
http://europeana-npc-test.de.a9sapp.eu/portal/record/9200300/BibliographicResource_3000052917527.html

It needs to be updated:
Display order - the relationships and display of the sequence of children needs to be higher up on the page (Carlos, pls make a design suggestion)
Similar items needs to be hidden for items that are hierarchical (Andy)
The visual design should be tweaked (Carlos)"
"Use the API set-up from ticket EC-9807 to implement the front-end as defined in EC-9806.

To test the front-end & API on hierarchical objects in the NPC.
Test in particular unordered objects such as /2059205/data_sounds_Baure/children"
"*Update:* The focus of this ticket will become how best to work with Mustache templates in the context of a Rails + Blacklight application. Progress on this depends on completion of #111.

Provide some guidelines to front-end team re:
* how variables from the controllers are supplied to and accessed by the views
* documentation of this data supplied to the views, should be present in generated documentation of models, controllers etc, and ensured via tests
* creating helper methods, e.g. conforming to back-end coding conventions
* overview of Blacklight's structure for views
* working with HAML in the context of a Rails app
* sample output of full models as JSON as returned from RSolr::Europeana to support [~timharbour]'s design work, i.e. needing to know the names of individual fields in an EDM object.

*links*
* [Frontend/Backend Integration|https://docs.google.com/document/d/1KYE_CFukTLY4dIAI_xvxwlMSSGLJQfBKXpoOncHfoes/edit]
* [mustache gem|https://github.com/mustache/mustache]
* [stache gem|https://github.com/agoragames/stache]"
"The [Git branching model|https://europeanadev.assembla.com/spaces/europeana-npc/wiki/Git_branching_model] prescribes a convention for branch naming and workflow.

Core branches need to be created in the NPC Git repo:
* develop
* test
* acceptance"
"the initial concept is to have this application server the components via http, so that a php, java, or other application can pull in the templates. eventually this needs to be tested to see if bolt could work with this workflow

* use the europeana version of rizzo as a gem - see #87

*links*
* [rizzo workflow|https://docs.google.com/document/d/1hOlfM88DWcUkXMgpjzSP2_HU7HNFKQHQVWGHPyK6cCw/edit#]"
"* the ruby application should bundle install a europeana version of rizzo as a gem - see #87
* there should exist at least one view in the prototype application that uses a few components from the [europeana pattern lab styleguide|http://develop.styleguide.eanadev.org/]
** possibly the [ blog detail page|http://develop.styleguide.eanadev.org/?p=templates-Blog-Detail]

*links*
* [rizzo workflow|https://docs.google.com/document/d/1hOlfM88DWcUkXMgpjzSP2_HU7HNFKQHQVWGHPyK6cCw/edit#]"
"* this will be used as the main rizzo repo for use by europeana
* this should be a stripped down version of rizzo that removes all lonely planet dependencies
* a few components, already integrated, from the [europeana pattern lab styleguide|http://develop.styleguide.eanadev.org/] should be included in the gem
** possibly the [ blog detail page|http://develop.styleguide.eanadev.org/?p=templates-Blog-Detail]
* create any branches needed to match the [git branching model|https://www.assembla.com/spaces/europeana-npc/wiki/Git_branching_model]
* document any procedures necessary in order to update the gem and the instances that use it in the [rizzo workflow|https://docs.google.com/document/d/1hOlfM88DWcUkXMgpjzSP2_HU7HNFKQHQVWGHPyK6cCw/edit]"
"* the php application should use http to retrieve the templates from the europeana rizzo application - see EC-9817 - Create an instance of rizzo on anynines
* there should exist at least one view in the prototype application that uses a few components from the [europeana pattern lab styleguide|http://develop.styleguide.eanadev.org/]
** possibly the [ blog detail page|http://develop.styleguide.eanadev.org/?p=templates-Blog-Detail]

*links*
* [rizzo workflow|https://docs.google.com/document/d/1hOlfM88DWcUkXMgpjzSP2_HU7HNFKQHQVWGHPyK6cCw/edit#]"
"Being able to use markdown inside language keys could make the app more flexible and save developer time when the inevitable edits to the home page text get made.

see this discussion
https://europeana.slack.com/archives/channels_design/p1425468832000046

*requirements*
here is an initial list:
# sort out how weΓÇÖd integrate markdown into the views
## find a gem
## create a list of required functionality
### sample i18n key/values
### sample view interpolation
### can the translatewiki translators work with it?
### does it create a grammar issue?
### how to distinguish translatable content vs non-translatable content?
### ...
## prove functionality fits requirements
# do we have time to sort this out?
# who will sort this out?
# after the poc has proven itself, does it make sense to implement - does it save us time, effort, etc.?

*examples*
{{[I'm an inline-style link with title](https://www.google.com ""Google's Homepage"")}}

<code>[Europeana](http://www.europeana.eu/portal/) brings together %{item_count} items collected from [Europe's museums](http://anotherlinkhere)....` 
</code>"
"this will take on a phased approach in order to allow us to move forward with frontend work.

# phase 1
## depends on #111 - Change directory structure and naming conventions being completed
# phase 2
## update the [ui-components|https://github.com/europeana/ui-components] so that it contains the re-structured patterns
## add the ui-components to pattern lab as a submodule that replaces the source/_patterns folder. initially the ui components repo should contain all pl templates with no other templates.
## make sure [workflow is documented|https://docs.google.com/document/d/1yd1fuNV-O15y10mVUIVfk_8SNk06ptLkocd-l4N78EA/edit] so that all team members know how to work with the submodule within pattern lab or in any other application

*Acceptance criteria:*
* Tim needs to be able to work with PatternLab in his preferred workflow as a designer"
"
h1. User story 
As a user I want to be able to get a good overview of my search results with clear options to refine them so that I can find what I'm searching for.

*Acceptance criteria:*
Search result list view put in place, see http://develop.styleguide.eanadev.org/?p=templates-Search-results-list for PatternLab and http://invis.io/6U1ZS7MA4 for Invision mockup
Note that to populate the search result list style as designed the Rich search API profile must be used, see http://labs.europeana.eu/api/search/#rich-profile

The data included in one individual record is: 
dc:title, edm:year
dc:description
edm:isshownat

and of course the thumbnail is edm:preview

Note also that not all features or data included in the designs need to be functional for this epic to be completed. Some are there as placeholders for future functionality.

_Non-functioning at this point:_
Sorting order
Grid view
Actions
My Europeana
Save (to My Europeana)

In this first iteration the Channel facet can be not a facet but a simple filter that does not show how many objects are included in the channel. Also, only one channel filter can be active at one time.

_Note also that some data per record that is included in the design is not currently present in the API output and so can be left out:_
Resource type (in the example link always painting)
Theme (i.e. Channel affiliation)

*technical requirements*
* sort out a method for including ui-components in application views
** can the ui-components be rendered directly from the controller, avoiding the use of the application views?
*** would it make sense to do this?
* sort out which ui-components need to be rendered for _/app/views/layouts/blacklight.html.erb_
** [atoms/meta/_head|https://github.com/europeana/Europeana-Patternlab/blob/develop/source/_patterns/atoms/meta/_head.mustache]?
** would the <%= yield %> be built from additional ui-components based on the controller/action?
*** how would this be done in the controller/action?
*** which ui-component(s) should be used to create the blacklight search form?
** [atoms/meta/_foot|https://github.com/europeana/Europeana-Patternlab/blob/develop/source/_patterns/atoms/meta/_foot.mustache]?
* identify which model, localisation, and application variables need to be present in the ui-components
** make sure they are present in the ui-components
** sort out a method for providing those variables to the ui-components via the application controllers
* en,yml localisation should be provided via the [localeapp|https://www.localeapp.com/projects/7916] project setup for this application
** ask [~Michelle.vanduijn] for more details
** it looks as though localeapp may have added a feature to directly link it with a github project - look into the possibility of linking updated to localeapp directly with the channels application repo"
"[Spotlight|http://spotlight.projectblacklight.org/], a plugin for Blacklight, enables librarians, curators, and others who are responsible for digital collections to create attractive, feature-rich websites that highlight these collections. A logged in user (a curator, special collections librarian, Europeana Channel Curator, etc.) can set up and publish an exhibition in a WYSIWYG interface. 

This makes it a very attractive candidate for Europeana to power our curated exhibitions. Choosing a Blacklight plugin would consolidate our portal/channels/exhibitions solution around Blacklight and Ruby on Rails, reducing the number of ""moving parts"". As with Blacklight the DPLA have also chose Spotlight to power their future exhibitions which would also allow us to share development burdens with them (and Stanford University, the lead developers of Spotlight).

Therefore we need to investigate the feasibility of using Spotlight as the ""Europeana Exhibitions CMS"".


This spike has two strands of investigation:
1. What effort would be needed to configure a Spotlight instance that would allow us to use it as Europeana's ""exhibitions CMS""?  

 A challenge is that Spotlight assumes local access to Solr. We want to dogfood our API. Can this be reconciled? Or would we need to bite the bullet and accept to not dogfood with our exhibitions?

This investigation also needs to take into account that if we choose Spotlight as our exhibitions we would need to gradually migrate our [existing exhibitions|http://exhibitions.europeana.eu] from Omeka to Spotlight. This migration will likely be largely manual. Note that the exact layout and look and feel of the current exhibitions need not be preserved. The plan would rather be to redesign them in that regard to harmonise with the channel design and ""feel"" fully integrated in the new portal/channels.

Supporting localised/translated versions of the same exhibition is a hard requirement.

Combining curatorial text and selected Europeana items into a longer and navigable narrative is the primary goal of the exhibitions.

2. I wonder if we could use Spotlight as a way to allow My Europeana users with certain rights to create, contextualize and publish individual Channels? Basically by modelling each Channel as a Spotlight exhibit?


Links for information:
The [Spotlight Wiki|https://github.com/sul-dlss/spotlight/wiki] has good information on the system architecture of Spotlight. 
We're also in direct contact with Chris Beer who's one of the main developers of Spotlight and who we can ask questions and setup calls with if needed.



"
figure out a method for deploying to production that will not interrupt production service. see this post for [one possible approach|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/91-create-jenkins-build-jobs?comment=700005603#comment:700005603].
"Per the Ruby development strategy (EC-9748), the Channels application codebase needs its functionality to have automated tests written in RSpec.

Before proceeding with further development, existing functionality from the proof of concept needs to be described and well-covered by RSpec tests."
"As an alternative to moving UI components generated by Pattern Lab (as Mustache templates) into a git submodule, splitting Europeana-Patternlab into two repositories, investigate the feasibility of creating a Ruby gem containing just the templates.

*requirements*
* The develop and master branch of this gem needs to be updated without manual intervention whenever changes are made to the templates in [Europeana-Patternlab/source/_patterns|https://github.com/europeana/Europeana-Patternlab/tree/master/source/_patterns].
** It is envisaged that this can be achieved with a Jenkins build job configured to respond to commits to the Europeana-Patternlab repo by merging changes into the repository hosting the Ruby gem.
** A Ruby project requiring the templates would then need only reference the Git repo in its Gemfile (or gemspec).
* a develop and master branch should exist that corresponds with the git branches in pattern lab
* the jenkins build job should notify all team developers when a build error occurs"
"A major goal for Europeana Collections is to provide users with direct access to media whenever possible. Typically this is accomplished by data partners including links to media files in edm:isshownby and edm:hasview. Some partners however have opted to publish their media content on commercial platforms. 


The solution should:
* ideally be generic (i.e. we should avoid solutions that are 100% player specific)
* ideally be standards based, the standard in question being [oEmbed|http://oembed.com/] which most of the commercial platforms support.
* ideally not require data partners to update and resubmit data for re-harvesting and re-publication

The following standard players should be supported (listed in order of priority):
* SoundCloud
* AudioBoo
* Vimeo
* DailyMotion
* YouTube
* Sketchfab

For the first 4 datasets using these platform players are already available in Europeana.

The following custom players should be supported (and in order of priority):
* ""Picturepipe"" (used by Europeana 1914-1918 institutional partners for video)
* INA (video)
* EU Audiovisual Department (video)

Note that we have develop similar solutions in the past for Europeana 1914-1918 and the old portal:
https://europeanadev.assembla.com/spaces/europeana/tickets/1434
https://europeanadev.assembla.com/spaces/europeana-1914-1918/tickets/8
https://europeanadev.assembla.com/spaces/europeana-1914-1918/tickets/9


Tech notes:
* In 14-18 we used https://github.com/judofyr/ruby-oembed to simplify adding the generic oembed support
* Our video player, video.js, has a plugins for a number of common commercial players, https://github.com/videojs/video.js/wiki/Plugins#playback-techs-support-media-from-different-sources

 "
"a php package needs to exist that can be used by all php projects that make use of the [europeana patternlab|https://github.com/europeana/Europeana-Patternlab.git] templates.

*requirements*
* php projects should be able to
** include the package in a directory structure that does not interfere with the projectΓÇÖs directory structure
** make use of the europeana styleguide templates
* a develop and master branch should exist that corresponds with the git branches in pattern lab
* the develop and master branch of this package need to be updated without manual intervention whenever changes are made to the templates in [Europeana-Patternlab/source/_patterns|https://github.com/europeana/Europeana-Patternlab/tree/master/source/_patterns].
** It is envisaged that this can be achieved with a Jenkins build job configured to respond to commits to the Europeana-Patternlab repo by merging changes into the repository hosting the php package
** a php project requiring the templates would then use [composer|https://getcomposer.org/] to pull in the europeana styleguide templates for use, referencing the appropriate git branch
* the jenkins build job should notify all team developers when a build error occurs"
"The content negotiation must be documented both in terms of business logic and technical implementation.

* For business logic see https://docs.google.com/document/d/1XHqkK1CevIdZq-SLY0T9MiBKLd7w98e4Qy4hIHwEal4
* For technical implementation, will follow ticket EC-9854

*Related Tickets:*
* https://europeanadev.assembla.com/spaces/europeana/tickets/1885"
"*Completed*
* EC-9853: Decide on the technology to apply for implementing Content Negotiation (decided: Apache Rewrites)

*To-do*
* #244: Set-up test virtualhost for data.europeana.eu
* EC-9854: Write new Apache rewrite rules for content negotiation
* #426: Decide on how to support additional RDF formats
* #246: Update patterns/redirects for europeana.eu/schemas/edm/
* EC-9855: Migrate and deploy new content negotiation/rules
* EC-9856: Document content negotiation
* #245: Update licensing header in API response

*Related Tickets:*
* https://europeanadev.assembla.com/spaces/europeana/tickets/1892
* https://europeanadev.assembla.com/spaces/europeana/tickets/1893
* https://europeanadev.assembla.com/spaces/europeana/tickets/1885
* https://europeanadev.assembla.com/spaces/europeana/tickets/1453
* https://europeanadev.assembla.com/spaces/europeana-1914-1918/tickets/510
* https://europeanadev.assembla.com/spaces/europeana-1914-1918/tickets/366 "
"for each of the [europeana pattern lab|https://github.com/europeana/Europeana-Patternlab] branches: develop and master, update the corresponding branch of the [europeana ui-components|https://github.com/europeana/ui-components] repo with the {{source/_patterns/}} directory folders using a [jenkins build job|http://jenkins.eanadev.org/login?from=%2F].

suggested build script names:
* ui-components-deploy
* ui-components-master"
"develop branch
there are still some mustache templates using non-standard mustache syntax, which should be removed, however, those appear to be related to other projects. ideally all of these would be resolved now, however, if you would rather do it on a project-by-project basis, then add tickets to the corresponding project backlog.

hereΓÇÖs one example i found in molecules/components/pro/pro-listitem.mustache {{> molecules-item-department(team:""Software Development"") }} by searching the patternlab project source/_patterns directory for ) }}.

there may be other non-standard mustache syntax in the templates, but iΓÇÖm not sure what search can be carried out in order to find it."
"Develop support for ""hierarchies"" where children are unordered, as spiked in EC-9808. We need to be able to display also unordered objects and combinations of ordered and unordered objects.


*Suggested display principles and design:*
https://docs.google.com/document/d/1uppSGaTXC554kA6W9mUF6muvSvGUwD08Ade7Py46iR0/edit#"
"In preparation for implementing the UI design of the item display we can begin with exposing all the metadata returned in an API record call and display it ""default Blacklight style"".

Acceptance criteria:
All the metadata returned in an API record call displayed"
"is there a way to link a github project with a localeapp project so that localeapp exports the yml file to a specific directory in the github project?

more concretely, export the en.yml file in our [localeapp project|https://www.localeapp.com/projects/7916] to /app/config/locales/en.yml in the [github repo|https://github.com/europeana/europeana-channels-blacklight]."
"*links*
* [localeapp channels project|https://www.localeapp.com/projects/7916]
* [localeapp global project|https://www.localeapp.com/projects/7952]"
"Hierarchical filter

Should display a list of properties that the search results can be filterable by, eg: Type
When one of them is selected, the search results are updated to filter by the selected facet. eg: Paintings

On selection:
Other top level options in the hierarchical filter are hidden.
The selected facet is highlighted as selected.
The selected facet displays a ""remove"" button.
Relevant secondary filter types are displayed in a visual hierarchy that associates them with the selected top level facet. eg. Orientation, Painting medium (watercolour, oils etc.), Colour
When the selected facet is removed the search results are updated to the previous state."
"the localisation keys specified in the [content strategy spreadhseets|https://docs.google.com/document/d/1UE_o0vcnm6v0LoNJPSKTipYqMXfGBCeHsgbORT0xVCo/edit#heading=h.8q1kqccicmy] need to be added to the mustache templates rather than hard coded content.

the variable format should follow the examples: {{i18n.global.home}} for global keys and {{i18n.site.sitemap-link}} for site specific keys."
"enter localisation keys and messages into the corresponding localeapp projects:
* [channels|https://www.localeapp.com/projects/7916]
* [global|https://www.localeapp.com/projects/7952]
based on the corresponding [content strategy spreadsheets|https://docs.google.com/document/d/1UE_o0vcnm6v0LoNJPSKTipYqMXfGBCeHsgbORT0xVCo/edit#heading=h.r5ry6fwkoisd]:
* [global|https://docs.google.com/spreadsheets/d/1sOJlR6kO-1YkA8kzA2iXQkL9yp7b7TxlOuZnb3MryL4/edit#gid=1039625058]
* channels"
"See epic ticket (EC-9852) for specifications and background.

In scope for the first version is to set-up the skeleton application that will do this work:
* Create a GitHub repository for this
* Create an environment on Anynines (test + prod) where this service can run
* Set-up the skeleton application
* Must be able to send a request to an external API and trigger an internal API based on that
* Must be able to hold configurations (see specifications doc for the details)
* Assess further work (time-wise) and identify risks, questions or other input required

h1. Acceptance criteria 
* Agreed on a technical specification
* Skeleton application set-up in an Anynines environment
* GitHub repository created
* Agreed on an initial time estimate for the remaining work"
"Do we use Solr.MoreLikeThis or a workaround like we do in the current portal  (see https://europeanadev.assembla.com/spaces/europeana/tickets/922) ?

Using Solr.MoreLikeThis has overloaded our Solr servers in the past which is why we did the workaround. Is that (a workaround) still the better option? 

If we use Solr.MoreLikeThis the following copy fields should be taken into account and in order of weighting:
- TITLE (highest weighting)
- WHO
- WHAT
- TEXT (with veeery low weighting)
"
"*Pattern Lab:*
http://develop.styleguide.eanadev.org/?p=templates-Search-home

*Hypothesis:*
Represent editorial content (texts, links) as YAML or JSON.

*Note:* Not to be begun until April 10th (we need to get stakeholder buy-in first, meeting for that set to April 9)

*Acceptance criteria:*
Our sites navigation
Top menu (Home, Channels, Exhibitions, Blog, My Europeana, Settings).
Search box
Blurb beneath the box
Hero image with brand compliant overlays and attribution
Browse boxes
Footer

In this sprint there needs to be no working way for a non-developer to edit the contents of the landing page. However, the contents should not be hardcoded but drawn from a YAML file or similar. David and the PD-team will provide the actual content (images, labels, texts, links, etc.).

_Nice to haves:_
Three latest blog posts
"
"[~richard.doe] has kept track of issues with the hierarchical objects APIs during development, these need to be addressed and where necessary they need to be fixed:
https://docs.google.com/document/d/17bemtTq3_EZFq9yUK4T729yQKJcvcKmVuStYHtMbeT0/edit

See also, from NPC POC:
Note on optimization of API responses for objects with children: https://docs.google.com/document/d/1BU5ZV04jpBmaC0clTKkJF62q2y4-yu-lVM6hfM6HIck/edit#heading=h.7c2jcxdkkuci
Suggestion to include basic hierarchy data in record.json: https://docs.google.com/document/d/1BU5ZV04jpBmaC0clTKkJF62q2y4-yu-lVM6hfM6HIck/edit#heading=h.hltof7k7jzu (point 6)"
When ticket EC-9895 is accepted, the hierarchical objects APIs must be documented on European Labs so everyone could use them.
"


*Acceptance criteria:*
This story is accepted when a user can easily and quickly access all values for a particular facet. Needs to work well also on mobile with its smaller screen real-estate.

*Notes:*
- Interaction shown here http://develop.styleguide.eanadev.org/?p=templates-Search-results-list (click More under a facet)
- We need to settle/decide on how many facet values to show by default and how many (all?) to pull in when the user clicks More
- How to handle the selected facet values. This needs to be decided."
"*Goals:*
Add in more metadata (below the media part at the top). Invision mockup, https://projects.invisionapp.com/d/main#/console/1083571/78922945/preview and spreadsheet listing labels and fields: https://docs.google.com/spreadsheets/d/1O3pzwva0L8XtNz3SKu_eqJOTWGfCQaR8YbE9hCVQFjw/edit#gid=0

Use The Milkmaid as the case. Note that the Invision screenshot has related item/hierarachies - these are fake. Otherwise the data in the Invision screen are real.

Add Leaflet map showing coordinates in the metadata (DONE).


*Draft isplay logic rules:*
Prefer contextual class labels over literals
Match label/field language with the user's language, fallback to English if there's no match"
"The main goal is to increase the information density of the list. This will require some display logic.

*Display logic:*
# Γ£ö Append Agents prefLabel to the title of the object in the display, separate it from the dcTitle and year with a |. Choose the prefLabel that matches the user's language, fall back on English if there's no match. If there's no agents prefLabel then show altLabel, if there's no altLabel show proxy dc:creator. If there are multiple language versions of proxy dc:creator show the one matching the user's UI language, if no match English, if no English label avaialble show all. The full title of the 8th object of http://europeana-npc-test.de.a9sapp.eu/channels/art?q=corset would then be: PD Corsets (1900) | Privat-Livemont, Henri
# Γ£ö Add, after the dcDescription snippet and on a new row Concepts prefLabel. Show up to 4 prefLabels, separate them in the display with ;. Choose the prefLabel that matches the user's language, fall back on English if there's no match. Never show the labels of a Broader Concept. If there's no Concept then show the first up to two values of dcSubject and first up to two values of dcType.. Viewed as a search result list this object http://europeana-npc-test.de.a9sapp.eu/record/2026117/Partage_Plus_ProvidedCHO_Museu_Nacional_d_Art_de_Catalunya_000044_C.html would then have the labels: posters; Art Nouveau; paper (fiber product); lithography (printing process) underneath the dcDescription.
# Γ£ö Add the media type (Text, Image, Sound, Video, 3D) and icon.
# Γ£ö Show only the dc:title corresponding to the user's current UI language. If there's no match show English. If there's no English show all available (which is the current behaviour). A good example object with multiple and language tagged titles is http://europeana-npc-test.de.a9sapp.eu/record/02302/urn_imss_image_000364.html
# Γ£ö Show the dcDescription proper to the locale. So for http://europeana-npc-test.de.a9sapp.eu/?q=the+milkmaid&locale=nl the Dutch description should be displayed for the The Milkmaid at the top of the search result.

*Layout/interaction:*
# Γ£ö Search result list: Remove ""and"" between keywords in the ""xxx results for keyword""
# Add the calling in of more facet values in a facet, see http://develop.styleguide.eanadev.org/?p=templates-Search-results-list. *See also* EC-9897
# Show breadcrumb of active keywords and facets, see http://invis.io/B82MRMJA9 for the interaction design proposition from User Intelligence. 
# Γ£ö Make the thumbnails in the search result clickable taking you to the item display.

*Other fixes:*
# Γ£ö No longer possible to just leave the search box empty and click search. I now have to do star colon star
# Γ£ö star colon star can't be combined with further keywords without getting an error message. *See also* EC-9868, #180
# Γ£ö When looking at an object you've reached via a search result and you then go back you always return to the first page of the search result, not the page you came from (if youv'e paginated)"
"Because &bt=europeanaapi breaks isshownat clickthroughs for a number of providers, e.g. Het Geheugen van Nederlands and some DDB partners. Also OAPEN, see e.g. http://europeana-npc-test.de.a9sapp.eu/portal/record/9200234/BibliographicResource_3000031464013.html 

It is correctly gone from the search API but it still appears on the record API in the edmIsShownAt, eg:
http://europeana.eu/api/v2/record/2048001/Athena_Plus_ProvidedCHO_KIK_IRPA__Brussels__Belgium__AP_10087724.json?wskey=BNVFJIIZTH"
"The API's search.json endpoint accepts multiple query params, e.g. http://www.europeana.eu/api/v2/search.json?wskey=api2demo&query=paris&query=fashion

However, if one of these query params is {{*:*}}, an internal server error is caused and an HTML error page returned with HTTP status code 500.

If it is invalid to submit multiple query params when one is {{*:*}}, then the API should:

# Return a JSON response with success: false and a descriptive error message
# Return HTTP status code 400"
"the localisation keys specified in the [content strategy spreadhseets|https://docs.google.com/document/d/1UE_o0vcnm6v0LoNJPSKTipYqMXfGBCeHsgbORT0xVCo/edit#heading=h.8q1kqccicmy] need to be added to the mustache templates rather than hard coded content.

the variable format should follow the examples: {{i18n.global.home}} for global keys and {{i18n.site.sitemap-link}} for site specific keys."
"We need a set of concepts and types that are relevant for selecting and enrichment art objects.
Typical vocabulary relevance criteria apply:
- conceptual coverage
- language coverage
- ease of re-use
etc.

Some starting points:
- David's scratchpad for Art genres
https://docs.google.com/spreadsheets/d/1qIkJy4cZR3Gt4CtZ-jhQZU9bNbQHPmwaQzxibJcYj_A/
- Anna's selection of themes for sourcing content for the Art channels
https://docs.google.com/spreadsheets/d/1_4wFh0Atjs0yIcpZRGxFdFEOazt-12S1tBCvstvAreM/
- Collection vocabulary by the DPS team, augmented with mappings to Wikidata by Valentine:
https://docs.google.com/spreadsheets/d/1qjyyneg6aMoPC2v5hwC8YinmHKNyJtvTJp1HJdnnPc8/ 

We could seek and involve:
- Vladimir Alexiev from Ontotext (our goal is very similar to what he's doing for the Food and Drinks classification)
- the wider LODLAM community, as a sort of challenge (we could use LODLAM15 to call on them)"
"As a developer retrieving Europeana metadata via Blacklight, I want to get EDM field labels for nested objects.

See, for example record [/09102/_GNM_693983|http://www.europeana.eu/portal/api/console.html?function=record&embedded=false&recordId=%2F09102%2F_GNM_693983&callback=] with multiple webResources.

When the application iterates over the webResources, it needs to be able to access by key each field within the web resource, something like:

{code:java}res = []
document.fetch('aggregations.webResources').each do |web_resource|
  res << {
    preview: web_resource.fetch('about'),
    rights: web_resource.fetch('webResourceDcRights')
  }
end
{code}

This will require modifying the Europeana::Blacklight::Document class, in the [europeana-blacklight|https://github.com/europeana/europeana-blacklight] gem."
"

Art landing page contents:
https://basecamp.com/1768384/projects/588796/documents/8501708

"
"


h1. Changes to do/discuss


*White band with info*
Reduce its overall height
Make it fold in/fold out?
Add header for the items statistics
Move recent additions to a ""box""?

*Browse entry points*
Visualise them (add images for them)

*Major feature option*
Introduce the ability for an editor to feature something very heavily among the boxes. Like the assymetric large box of https://projects.invisionapp.com/d/main#/console/1083571/24165925/preview

In Music this could be their SoundCloud presence, in Art History it could be VanGoYourself or Culture Cam.

*Thematic blog posts*
Introduce them, at the bottom. 

*Footer*
How do we adapt the footer? Just a change of social media presence.

*Channel specific pages*
About
Credits


Art landing page contents:
https://basecamp.com/1768384/projects/588796/documents/8501708"
"See epic ticket (EC-9852) for specifications and background.

In scope for the first version is to set-up the skeleton application that will do this work:
Set-up the skeleton application
Must be able to send a request to an external API and trigger an internal API based on that
Must be able to hold configurations (see specifications doc for the details)
Assess further work (time-wise) and identify risks, questions or other input required

*Acceptance criteria*
?"
"Originally reported by [~richard.doe] on the CAPE board, moving it to this board instead since it isn't necessarily migration- or sysops-related.
Original ticket: https://europeanadev.assembla.com/spaces/europeana/tickets/1854-change-in-response-from-rest-api--39-s-search-json-with-empty-query-param#/activity/ticket:

==

If a request is sent to the REST API's search.json method with the query param present but empty, e.g. http://www.europeana.eu/api/v2/search.json?wskey=xxxxxx&query=, its response indicates that the request was unsuccessful:

{code:java}{
""apikey"": ""api2demo"",
""action"": ""search.json"",
""success"": false,
""error"": ""Query to Search Engine is malformed.""
}
{code}

# I _think_ that until last week it would respond with *""success"": true* but an empty result set; is this correct?
# If so, is this an intentional change to the response?
# Either way, is the above, current, response from the API the intended one against which client applications should be developed?"
"Took these from issue EC-9898, to be able to move the rest to testable

TODOs:
1. Review available Swagger plug-ins to check which ones could be of use to us at Europeana. There's interest from the business side in using https://github.com/swagger-api/swagger-codegen to generate client code and thus help newbie developers to get started with our APIs
2. Set up a Europana APIs Swagger Editor https://github.com/swagger-api/swagger-editor  so that we can begin to use Swagger specs in user story acceptance criteria and other requirements writing"
"With a proxying strategy agreed upon, and implemented, for the downloading of edm:isShownBy targets from providers (see EC-9761), this component needs to be documented:

# in this Assembla space's [wiki|https://www.assembla.com/spaces/europeana-npc/wiki/Media_downloads]
# in the [Git repo's README|https://github.com/europeana/europeana-proxy-ruby]

Documentation should cover:

# proxy's behaviour for the various response types received from proxied HTTP servers
# how to deploy the proxy application"
"*Expected outcomes of the prototyping:*
An informed decision whether to adopt the universal viewer or to instead utilize multiple different viewers

*Scope:*
We must test the viewer's capability to render the majority of images (jpg, png) , audio (mp3, later FLAC), video (mp4, flv) and text (PDF).
We must test whether the viewer can be styled and to what extent


*links*
* [universal viewer github repo|https://github.com/UniversalViewer/universalviewer]
* [uv prototype|http://media-players.gmtplusone.com/uv]
* [uv google group|https://groups.google.com/forum/#!forum/universalviewer]


*IIIF manifests*
Taken from https://github.com/IIIF/mirador

""data"": [ // This array holds the manifest URIs for the IIIF resources you want Mirador to make available to the user.
        // Each manifest object must have a manifest URI pointing to a valid IIIF manifest, and may also
        // provide a location to be displayed in the listing of available manifests.
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/drs:48309543"", ""location"": ""Harvard University""}, // Harvard Scroll 
          { ""manifestUri"": ""http://dms-data.stanford.edu/data/manifests/Walters/qm670kv1873/manifest.json"", ""location"": ""Stanford University""},
          { ""manifestUri"": ""http://dms-data.stanford.edu/data/manifests/Stanford/ege1/manifest.json"", ""location"": ""Stanford University""},
          { ""manifestUri"": ""http://dms-data.stanford.edu/data/manifests/BnF/jr903ng8662/manifest.json "", ""location"": ""Stanford University""},
          { ""manifestUri"": ""http://manifests.ydc2.yale.edu/manifest/Admont23"", ""location"": ""Yale University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/drs:5981093"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://dams.llgc.org.uk/iiif/4574752/manifest.json"", ""location"": ""National Library of Wales""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/via:olvwork576793"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/drs:14033171"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/drs:46909368"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/drs:18259372"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/drs:48331776"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:299843"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:213052"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:169892"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:304136"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:311074"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:200515"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:320161"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:198021"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:165773"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://oculus-dev.harvardx.harvard.edu/manifests/huam:320567"", ""location"": ""Harvard University""},
          { ""manifestUri"": ""http://manifests.ydc2.yale.edu/manifest/Admont43"", ""location"": ""Yale University""},
          { ""manifestUri"": ""http://manifests.ydc2.yale.edu/manifest/BeineckeMS10"", ""location"": ""Yale University""},
          { ""manifestUri"": ""http://manifests.ydc2.yale.edu/manifest/BodleianMSBodley113"", ""location"": ""Yale University""},
          { ""manifestUri"": ""http://iiif.biblissima.fr/manifests/ark:/12148/btv1b84539771/manifest.json"", ""location"":'BnF' },
          { ""manifestUri"": ""http://iiif.biblissima.fr/manifests/ark:/12148/btv1b10500687r/manifest.json"", ""location"": 'BnF'},
          { ""manifestUri"": ""http://www.e-codices.unifr.ch/metadata/iiif/sl-0002/manifest.json"", ""location"": 'e-codices'},
          { ""manifestUri"": ""http://www.e-codices.unifr.ch/metadata/iiif/bge-cl0015/manifest.json"", ""location"": 'e-codices'}
        ],"
"As a developer sending search queries to the JSON API, I expect error responses to be in JSON with a relevant HTTP status code and informative error message in the JSON {{error}} element.

h2. Not authenticated, no query param
http://www.europeana.eu/api/v2/search.json

Expected response:
* JSON
* Error message e.g. ""API key required""
* HTTP status code 401

Actual response:
* HTML
* Error message ""Sorry we can't find this page""
* HTTP status code 500

h2. Not authenticated, with query param
http://www.europeana.eu/api/v2/search.json?wskey=&query=paris

Expected response:
* JSON
* Error message e.g. ""API key required""
* HTTP status code 401

Actual response:
* HTML
* Error message generic ""Unauthorized...""
* HTTP status code 401 but missing required WWW-Authenticate header

h2. Authenticated, no query param
http://www.europeana.eu/api/v2/search.json?wskey=api2demo&query=

Expected response:
* JSON
* Error message ""invalid query parameter"" or ""query parameter required""
* HTTP status code 400

Actual response:
* HTML
* Error message ""The Europeana portal is temporarily unavailable.""
* HTTP status code 500

h2. Authenticated, invalid query param
http://www.europeana.eu/api/v2/search.json?wskey=api2demo&query=badField:paris

Expected response:
* JSON
* Error message ""invalid query parameter""
* HTTP status code 400

Actual response:
* HTML
* Error message ""The Europeana portal is temporarily unavailable.""
* HTTP status code 500"
"

Example:
http://www.europeana.eu/portal/record/04802/F3EFB1C79A8E6CBB531071709B2285D1C302977C.html

whose dc:identifier recurs in the isshownat http://www.ina.fr/video/I07337664/ and embed code:
<iframe width='620' height='349' frameborder='0' marginheight ='0' marginwidth='0' scrolling ='no' src='https://player.ina.fr/player/embed/I07337664/1/1b0bd203fbcd702f9bc9b10ac3d0fc21/620/349/0' ></iframe>

An issue here may be the hash which we can't predict!? Though some testing indicates it's always the same!?

OR

use their ready made Facebook player URL? In this case https://player.ina.fr/player/facebook/I07337664 which is fully predictable as the only parameter = dc:identifier
"
"When certain of the [API Data Fields|http://labs.europeana.eu/api/data-fields/] are used in a faceted search query, the API response can take upwards of 90 seconds. Occasionally these result in a timeout, most times they do eventually return a response.

For example, faceting the proxy_dc_description field: http://www.europeana.eu/api/v2/search.json?query=paris&facet=proxy_dc_description&profile=facets&wskey=api2demo, or same with {{*:*}} as the query parameter (observed to take 200 seconds).

# Do we have a target maximum response time for all API queries? If so, what is it?
# Why are these queries so slow? Are they putting heavy load on the API servers?
# Do we consider these slow queries acceptable? If not, what should we do about them?
# If it is not possible to improve the performance of search queries faceting against any indexed data field, is it even appropriate to offer the facility to facet them to clients?"
"Make our Swagger Editor ready for internal use by Europeana product owners and developers to specify APIs. Once that is done we can discuss and decide if we want to move on with improving the Swagger Code Generator as well.

This story is to be begun after EC-9944 (see Remy's notes below, last paragraph). 

*Acceptance criteria:*
Performance significantly improved
Installed on a server where we can host it in the long run. Give it a proper DNS.

*Remy's notes on the initial setup:*
As for the Swagger editor: I find it very useful to trial and error API specifications with this, I think it would greatly benefit better and more complete specifications. There are however still a few issues which make this really hard. Maybe something for the next iteration:
It is very slow. There are many more API calls as they are in production, this is partly because all calls are available as GET/POST/PUT/DELETE etc. while in reality the API only has GET methods except from the MyEuropeana part. If this can be specified in the API this would greatly reduce the YAML output and make it faster.
Since our API consists of quite some methods, we might want to consider not rendering the output each time. Some guidance here:
http://azimi.me/2015/04/23/swagger-editor-talk.html

As next step I would recommend to focus on stripping down our documentation with the focus on the methods that exist first, aligned with what's on Europeana Labs. I'll put that into the other ticket. When that is done we can continue on improving the Swagger editor with step 2."
"*Tasks:*

* Install Spotlight into the NPC Blacklight application
* Adapt Spotlight to work without Solr by disabling its indexing
* Deploy and test
* Assess which features of Spotlight we want, which we don't
* Assess what further work is required to connect certain features onto APIs instead of local SQL storage
* Assess what further work is required to implement missing features that we require, e.g. translation of content
* Assess what further work is required to use it as a general CMS for static pages (like About, Help)
* Estimate effort needed to make Spotlight ""localisation enabled""
* Test and confirm if Spotlight can be used to configure the data filters for a Channel, replacing our current cumbersome long queries.
* Check whether, without a Solr index, items added to an exhibition (or a Channel) via Spotlight are immediately ""aware"" that they are a part of it."
"The portal landing page and channel landing pages show the latest blog posts from blog.europeana.eu. Where the portal landing page will show the latest 3 blog posts the channel landing pages will show the three latest blog posts relevant to its theme. This will be accomplished by filtering blog posts by tag. 

Note for future development:
While we as part of this ticket link the user to the blog post we may in future pull in the entire blog posts and display them in-portal. 

*Display:*
For each pulled in blog post the following must be displayed:
Title
Image
Text

See http://develop.styleguide.eanadev.org/?p=templates-Channels-landing-art

*Interaction:*
Clicking the image or title should take you to the blog post.

There's also in the display a more link next to Art History channel news. Clicking this should take the user to the blog post listing. From the portal channel to the base-URL and to from the channel landing pages to a listing on the specific tag, e.g. http://blog.europeana.eu/tag/music/ 


*Europeana end-user blog feed:*
http://blog.europeana.eu/feed/

Art History channel: http://blog.europeana.eu/tag/art/feed/
Music channel: http://blog.europeana.eu/tag/music/feed/


*ISSUES*
There are two remaining issues:
1. Blog post images are not properly resized
2. New blog posts don't appear. I assume because of some sort of caching effect.

"
"We want include similar items at the bottom of the item display. For performance reasons we can't use Solr's in-built MoreLikeThis (see EC-9888 )but must copy the improvised solution of the current portal.

The solution to copy:
The Milkmaid in the portal  http://www.europeana.eu/portal/record/90402/SK_A_2344.html executes this query for similar items
http://www.europeana.eu/portal/search.html?query=(title:(%22The%20Milkmaid%22%20OR%20%22Het%20melkmeisje%22)^0.3%20OR%20who:(%22RM0001.PEOPLE.2529%22%20OR%20%22Vermeer,%20Johannes%22)^0.5%20OR%20DATA_PROVIDER:(%22Rijksmuseum%22)^0.2%20OR%20what:(%22http://vocab.getty.edu/aat/300177435%22%20OR%20%22http://iconclass.org/41C222%22%20OR%20%22http://vocab.getty.edu/aat/300015029%22)^0.8%20OR%20skos_concept:(%22http://vocab.getty.edu/aat/300014078%22%20OR%20%22http://vocab.getty.edu/aat/300015050%22%20OR%20%22http://vocab.getty.edu/aat/300177435%22)^0.8)%20NOT%20europeana_id:%22/90402/SK_A_2344%22&rows=24

The query is executed on copy fields title, who and what and on the data provider picking up the values to search on from the item itself. The europeana id of the item is used to filter out itself from the responses. It also adds boost on the fields. 
title 0.3, who 0.2, what 0.8, data provider 0.2

*Display:*
See https://projects.invisionapp.com/d/main#/console/1083571/81578486/preview
"
In the PatternLab templates for search results need to be made aware of the mlt param (see EC-9968 ), and include and output it if it's there, along with the "similar to: [record title]" text and remove link.
"*notes*
* need to address cross domain access to non-local pdfs
** one possible solution is to stream the non-local pdf via a service url; e.g. /getpdf?url=http://non-local-domain.com/pdf-file.pdf
** should those streamed pdfs then be cached/stored locally or in a cdn with the same domain as the application?
*links*
* [styleguide molecule|http://develop.styleguide.eanadev.org/?p=molecules-pdfjs]
* [github|https://github.com/mozilla/pdf.js]
* [website|https://mozilla.github.io/pdf.js/]
*test examples*
* [Unzer Wort. N┬░ 11447 (8 f├⌐vrier 1994 N┬░ 21)|http://europeana-npc-test.de.a9sapp.eu/record/09336/72B195E7174360280218AE261368B22242AC4E09.html]"
"*links*
* [prototype|http://media-players.gmtplusone.com/mediaelement]
* [github repo|https://github.com/johndyer/mediaelement/]
* [website|http://mediaelementjs.com/]"
"*formats supported*
* *video*
** [flv|http://develop.styleguide.eanadev.org/patterns/molecules-components-videojs-flv/molecules-components-videojs-flv.html]
** [mp4|http://develop.styleguide.eanadev.org/?p=molecules-videojs-mp4]
** mov
** [ogv|http://develop.styleguide.eanadev.org/?p=molecules-videojs-ogv]
** wmv
* *audio*
** [flac|http://develop.styleguide.eanadev.org/?p=molecules-videojs-flac] ( with plugin )
** [mp3|http://develop.styleguide.eanadev.org/?p=molecules-videojs-mp3]
** [wav|http://develop.styleguide.eanadev.org/?p=molecules-videojs-wav]

*links*
* [github repo|https://github.com/videojs/video.js]
* [prototype|http://media-players.gmtplusone.com/videojs]
* [website|http://www.videojs.com/]

*test examples*
* [Finlandia-katsaus 236|http://europeana-npc-test.de.a9sapp.eu/record/08613/394E8DEBD92AF62B2472FC05861A5FC483903351.html] (mp4) illustrates a source url that is not the actual source
* [Wereldrecord achteruitzwemmen|http://europeana-npc-test.de.a9sapp.eu/record/2021601/media_655061.html] (mp4)
* [Abi gezunt|http://europeana-npc-test.de.a9sapp.eu/record/09334/37AA73497889534EF6FD4AABD037A9E43118F29E.html] (mp3)
* [psalm 65|http://europeana-npc-test.de.a9sapp.eu/record/2023601/oai_eu_dismarc_CHARM_DISC01SIDE01METS223A.html] (flac)
* [City Spot Rom|http://europeana-npc-test.de.a9sapp.eu/record/08608/9DDBBA6B5284ED2C9227AA42A3782F8F1CD8A83A.html] (flv)"
"*Business case*
A number of Europeana providers now support the image standard [IIIF|http://iiif.io]  . With IIIF we have at our disposal an efficient technology to display high-res zoomable images in the portal without having to necessarily store the images in a Europeana service. TEL is already exploiting this with their Newspaper viewer (example: http://www.theeuropeanlibrary.org/tel4/newspapers/issue/3000073484057?hp=1&count=10&page=1&query=wiener+zeitung ) which is a IIIF-client based on IIPMooviewer.

As TEL is already using IIPMooviewer we should prototype using it also in the Europeana portal. Reason being that the TEL portal is planned to be shut down and its newspaper search, browse and display be remade into a Europeana Newspaper Channel during 2016. By using the same technology that migration should be less time consuming than if we have to reimplement the TEL Newpaper viewer in another viewer framework.

In the TEL team Alena was the person who developed their Newspaper viewer and so would be capable of offering advise and insight on working with iipmooviewer if needed.

*Interaction*
User arrives to item display and sees edm:preview thumbnail. User clicks thumbnail to enlarge/read and at that point the IIIF-viewer is activated, the IIIF-manifest pulled in and the user sees the image(s). If there are multiple images in sequence pagination is available. 

*Source code*
* [github repo|https://github.com/ruven/iipmooviewer]

*Technical note*
Cross-domain issues may occurr. See http://sourceforge.net/p/iipimage/discussion/299493/thread/04708cac/ for solution and take help from Alena/TEL who have overcome this issue.

*Test items and datasets*
Only a small number of our data providers support IIIF. Our pilot partner is the French National Library who have IIIFed all their texts and images. In terms of implementation we may want to keep a config file listing which datasets or data providers support IIIF. 

Their data in Europeana; http://www.europeana.eu/portal/search.html?query=DATA_PROVIDER%3A%22National+Library+of+France%22

*French National Library*
Also the French National Library has IIIF-manifests available for most of their items. The below pattern works for most of their items. _Note that Gallica is prioritised over the Bodleian, work with Gallica first._  

Text
http://europeana-npc-test.de.a9sapp.eu/record/9200365/BibliographicResource_3000118472743.html in Europeana has dc:identifier http://gallica.bnf.fr/ark:/12148/btv1b550084558 and IIIF-manifest http://gallicalabs.bnf.fr/ark:/12148/btv1b550084558/manifest.json  

Note how the identifier value is repeated in the IIIF manifest and thus the *the IIIF-manifest URI must be derived from the dc:identifier*

Image
http://europeana-npc-test.de.a9sapp.eu/record/9200365/BibliographicResource_1000055648760.html in Europeana has dc:identifier http://gallica.bnf.fr/ark:/12148/btv1b84238966 and IIIF-manifest http://gallicalabs.bnf.fr/ark:/12148/btv1b84238966/manifest.json  

Note how the identifier value is repeated in the IIIF manifest and thus the *the IIIF-manifest URI can be derived from the dc:identifier* 

Sound//Video/3D
Not applicable.


*Bodleian Library*
http://europeana-npc-test.de.a9sapp.eu/record/9200175/BibliographicResource_3000004696986.html 
Note the dc:identifier http://purl.ox.ac.uk/uuid/9fb27615-ede3-4fa0-89e4-f0785acbba06
The corresponding IIIF-manifest is http://iiif.bodleian.ox.ac.uk/iiif/manifest/9fb27615-ede3-4fa0-89e4-f0785acbba06.json
so for Bodleian *the IIIF-manifest URI can be derived from the dc:identifier*

*Alternative viewers*
If as a result of the prototyping we would consider or conclude that IIPMooviewer is not fit for purpose we should test [Openseadragon|https://openseadragon.github.io/].
"
"*links*
* [website|http://www.schillmania.com/projects/soundmanager2/]
* [github repo|https://github.com/scottschiller/SoundManager2/]"
"*links*
* [github repo|https://github.com/audiocogs]
* [website|http://audiocogs.org/]"
"Investigate the feasibility, suitability and effort of using Locomotive as our CMS.

Link:
http://locomotivecms.com/"
"Based on EC-9803. 

Document performance before and after."
"For the Beta API it is requested to do a full regression (see EC-9908).
The base URL I will be using is:
http://beta-api.de.a9sapp.eu
or
http://gamma-api.de.a9sapp.eu
depending on what has the latest build
(If this changes I need to be notified, since I have no way to find this out myself.)

Basic API tests can be found in Runscope:
https://www.runscope.com/radar/5vci4p0hurln

For deeper level testing, tests need to be specified more.
The API documentation seems to be the logical start point.
The documentation for the API can be found at http://labs.europeana.eu/api"
"As a user, I would like to see that all the images of the blogposts on the portal- and channelhome page, are the same size

Resize them to same height and width. Use ImageMagick to resize them and media queries. Cache the resize images. This goes of course also for the channel landing page.

Note: This is how it works in the current portal, but need to be replicated for the new.

"
"As an editor, I would like to be able to define the order of the 8 boxes below the hero-image on the Portal- and Channel home page and be able to label them as I like.

It must become possible to define the exact order of the 8 boxes below the hero. This goes of course also for the channel landing page.

 
"
"As a user I want to see content that is related to the Channel when I land on the Channel Home page. 

As a Channel Manager, I would like to see that the content related to my channel (such as relevant blog posts) are displayed on my Channel home page. 


It must be possible to have multiple channel landing pages, each updated separately without overwriting the others. This seems to be currently impossible as in-application all channel landing pages have the content of the draft Music Channel.

"
As an editor of a Channel I want to be able to feature one thing more strongly than the other feature boxes.  On the Music Channel this is for featuring the SoundCloud presence of Europeana. 
"The channels landing pages must have a layout where the channel specific social media presences/accounts can be featured.  Channel specific as opposed to the Europeana general ones in the footer.

For example the Music Channel will have:
A Music Channel specific Twitter account
A Music Channel specific Facebook account
A Music Channel specific SoundCloud account

"
"Update the Music Channel page based on http://develop.styleguide.eanadev.org/?p=templates-Channels-landing-music (minus the blog posts which should of course be dynamic).

What's currently missing in the app http://europeana-npc-test.de.a9sapp.eu/portal/channels/music is:
1. the band with social media presences that are specific to the Music Channel
2. in the global footer the social media presences for Facebook, Pinterest and Twitter are missing.

"
"As a user, I want to see the different media types displayed in a coherent and simple way.  

Implement on Video.js for video, PDF.js for PDF and select a dedicated audio player should video.js and its plugins not be sufficient to cover audio formats. Video.js Aurora looks like it would support our high priority audio formats.

We need to research and add an image viewer. Images must be displayed first inline and be opened in full-size on-click. The opened full-size modal must have a unique URL."
"As a user, I would like to see more related content to my search while using my desktop, tablet or smartphone.  

Allow users to pull in more images. Must be support touch/swipe. 


"
"Update the field grouping labels and their order based on https://projects.invisionapp.com/d/main#/console/1083571/82722391/preview

Add field labels for (field - label):

Source and Provenance
dc:identifier - Identifier
dcterms:provenance - Provenance
timestamp_created - Added to Europeana (YYYY-MM-DD)
timestamp_update - Last updated in Europeana (YYYY-MM-DD)
edm:country - Providing country

Categories
dc:type - Type
dc:subject - Subject
edm:hasType - Has type
edm:ugc - User contributed content, show only if TRUE

Descriptions
dcterms:tableofcontents - Table of Contents

Properties
dcterms:medium - Medium
dcterms:extent - Extent
dc:language - Language

People
dc:contributor - Contributor

Place
edm:currentLocation - Current location
dcterms:spatial - Location
dc:coverage - Place/Time

Time
dcterms:issued - Issued
dcterms:temporal - Temporal
dc:coverage - Place/Time

Add field groups:
References and relations
	dc:relations - Relations
	dcterms:references - References
	dcterms:hasPart - Consists of
dcterms:isPartOf - Is part of
dcterms:hasVersion - Version
dcterms:isFormatOf  - Is format of
dcterms:isReferencedBy - Is reference by	 
dcterms:isReplacedBy - Is replaced by
dcterms:isRequiredBy - Is required by
edm:hasMet - Is related to
edm:incorporates  - Incorporates
edm:isDerivativeOf - Is derivative of	 
edm:isRepresentationOf - Is representation of	 
edm:isSimilarTo - Is similar to
edm:isSuccessorOf - Is successor of
edm:realizes - Realizes
edm:wasPresentAt - Present at


Add last, after Source and Provenance

Copyright
	dc:rights - Rights statement
	edm:rights - to be shown with icons and link to rights pages 

Full field reference at http://labs.europeana.eu/api/data-fields/ - these should all have labels and be grouped."
"As a user, I would like to be able to share items on social media. 

Include: Facebook, Twitter, Pinterest and Mail. Use lightweight buttons like e.g.  http://kurtnoble.com/labs/rrssb/ 

See https://projects.invisionapp.com/d/main#/console/1083571/82722391/preview "
"some of the media viewer plugins, pdf.js and videojs-flac, make ajax requests that require a CORS header to be in place. unfortunately, CORS headers are not always in place. 

two possible solutions to the CORS issue:
* create a backend service that streams the media file from the same domain as the application
* create a backend service that streams the media file from a subdomain and add the CORS header to it

Also, videojs requires knowledge of the MIME-type and photoswipe requires knowledge of the pixel dimensions (width and height) of the image. To solve these issues we should extend the Ruby proxy already developed to expose pixel dimensions and MIME-type to the front-end. 

*Links to the viewers*
[Video.js|http://www.videojs.com/]
[Photoswipe|http://photoswipe.com/]
[PDF.js|https://mozilla.github.io/pdf.js/]

Note that a number of these viewers have existing Ruby gems supporting them:
PDF.js has https://rubygems.org/gems/pdfjs_viewer-rails
Video.js has https://github.com/seanbehan/videojs_rails
Photoswipe has https://rubygems.org/gems/photoswipe-rails"
"Footer with all its links, social media icons that are present in http://develop.styleguide.eanadev.org/?p=templates-Search-home are not present in http://europeana-npc-test.de.a9sapp.eu/ 

This must be fixed. The in-application footer must be exactly like in the Pattern Lab."
"As an editor, I want to be able to update the Channel and Portal landingpages. 

Even if itΓÇÖs by editing YAML files via GitHub or Notepad we need to be able to update portal and channel landing pages. 

It would of course be ideal if it could be done via proper CMS. If that is not possible to accomplish in max one weekΓÇÖs work by Richard then we need to go for a rougher, more simplified editing via YAMLs.

UPDATE:
This GoogleDoc https://docs.google.com/spreadsheets/d/1WBOJP30UKxbhUmXFCVzHCx_e9Nn80XzALeF224i1qI0/edit#gid=1578911975 contains an overview of what should be editable and in what way on the portal and channels landing pages."
"Many javascripts depend on other javascripts, which may in turn  have dependencies of their own.

Traditionally this was handled by chaining together script-loading ajax calls or by merging script files into single files.  The clean, efficient and modern way to handle this is to use [requirejs|http://requirejs.org/].

Acceptance criteria:

	our html markup should contain (per page) a single script tag (entry point) - that being the link to requirejs

	the load-on-demand behaviour that we began to implement for the [map|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/172-item-display-implementation--iteration-2] should continue to work as before"
"Somewhere in the region of 30 xhr requests are made - just for data - to render the initial display of a complex hierarchy.

The vast bulk of these requests are loading data that may not be seen by the user, (child nodes of unopened parent nodes).

The front-end code should be refactored to reduce this waste and only load this data on demand.
"
"The similar items component is still being designed, though a lightweight default is in place:
 
http://develop.styleguide.eanadev.org/?p=templates-Search-object

Needed next: the a mechanism for loading more items into it."
"viewer to handle single images

*links*
* [styleguide molecule|http://develop.styleguide.eanadev.org/?p=molecules-photoswipe]
* [github|https://github.com/dimsemenov/photoswipe/]
* [website|http://photoswipe.com/]
* [external prototype|http://media-players.gmtplusone.com/photoswipe]
* [local prototype|http://europeana-pattern-lab/?p=molecules-photoswipe-prototype]
*test examples*
* http://europeana-npc-test.de.a9sapp.eu/record/90402/SK_A_2344.html
* http://europeana-npc-test.de.a9sapp.eu/record/2022004/10851_E930EFBE_95EF_40EC_BA77_8CE6FB95376A.html"
"We have a JSON-LD endpoint for API record requests, but not for searches.

To fully support [Linked Open Data|https://vimeo.com/36752317], we should also offer search results in JSON-LD."
"Decouple it from:
http://www.europeana.eu/portal/api/registration.html

So that registration can happen from Labs or from any other Europeana website. 

No other changes to the current signup workflow is needed/desired.
"
"
1. To the pattern lab. Base them on http://develop.styleguide.eanadev.org/?p=templates-labs-docs-page. Both with and without left-hand nav is needed.
2. Liaise with [~richard.doe] on whether texts should come from the CMS or LocaleApp and decide which one.
3. In the footer: Add an *About* under More info. Remove the other options.
4. In the footer: Remove Using My Europeana and Copyright under Help.
"
"For tracking of user activity in https://www.hotjar.com/

The tracking code must be place in the header of everey page of the new portal and channels. The code is:


{code:java}<!-- Hotjar Tracking Code for test.europeana.eu -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:54631,hjsv:5};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
</script>
{code}



For reference a Hotjar code is in place on Europeana Pro."
"The following points, coming from stakeholders and users, should be discussed and the layout of the landing pages possibly modified accordingly:

1. Increase visual oomph: Increase the height of the channel hero so that it has the same proportions as the portal hero. This is a stakeholder request.
2. Reconsider placement and layout of the text area under the hero. Why? User input indicates the blurb is not read  and the statistics to be of interest to only some users. Recent additions though is appreciated. We need to discuss options on how to change the visual hierarchy here. 
3. Discuss the visual design of the browse entry points. Why? User feedback indicated that apart from reading the subject value or name of the creator the text and also numbers of items was largely deemed of little importance to the users. 
4. Add the name Collections underneath the Europeana logo in the top menu. 
5. For now retain the name Channel despite its issues. Internal lobbying towards renaming the portal ""Europeana Collections"" and individual channels to ""(Europeana) [theme] Collections"" e.g. ""(Europeana) Music Collections"", ""(Europeana) Art History Collections"", etc. to continue."
"Add:
The blue ""ripples"", emanating from lower left corner. Just as on the portal landing page.
The ""cut off"" europeana test, white font overlay
"
"A few suggested further tweaks:

* Requests to preceeding-siblings.json will need be redirected to preceding-siblings.json
* Where success=false in JSON response, HTTP response code should not be 200, but 4xx or 5xx. 404 seems appropriate for all, i.e. to be interpreted by the client as ""record not found"" or ""record's siblings not found"".
* Remove exclamation marks (""!"") from after the record ID in error response messages, as it looks like that character is part of the record ID. Could just remove them from all error messages.
* Rephrase ""This record has no parent, nor following siblings, and neither any preceding siblings!"" on ancestor-self-siblings.json to ""This record has no parent or siblings.""
* Include language-aware titles in record summaries (like EC-9908)"
"In a Swift filesystem at Anynines? And in a CDN like e.g. Cloudflare?

By UI assets we mean:
CSS
JS
Hero image
Box images
Blog images

Storage of assets need to have Ruby support through the [fog|http://fog.io/] gem."
"Our Jenkins jobs for deploying New Portal&Channels to Anynines are failing. (Occasionally succeeding, but mostly failing.)

This appears to be something to do with the [Ruby buildpack|https://github.com/cloudfoundry/ruby-buildpack] which was at version 1.2.1.

Have tried updating to version 1.5.0, which gets a stack error message. Have tried updating the stack from cedar to cflinuxfs2, which gets the same. Have tried upgrading Ruby 2.2 to the supported version (2.2.2), same."
"We go for a bespoke mini-CMS as outline in  EC-9982

We will use Rails Admin for our very domain-specific needs of the new portal & channels. We would create database models for each of our data types (channel, web page, feature box, etc), and manage these through the admin UI.

Highlighted benefits of Rails Admin:
Official support for Rails 4.x
Support for Versioning support (via paper_trail gem)
Support for various Ruby file upload libraries (e.g. paperclip, carrierwave), which can use the fog gem for file storage on the cloud
Customisable authentication (Devise, like Blacklight) and authorisation
Native support for a selection of WYSIWYG editors
Easy installation, no clashes with existing functionality
No native support for translation of content, but globalize gem would provide this and rails_admin_globalize_field gem acts as glue between it and rails_admin
Support for custom field types, e.g. we could define one that looks up text from Localeapp translations if the editor enters a Localeapp key into a field in the CMS"
"For scaled blog post images (EC-9985) and CMS assets (EC-10028).

See: 
* http://blog.anynines.com/how-to-use-the-anynines-swift-service-with-your-app/
* http://blog.anynines.com/ruby-fog-gem-hp-provider-now-with-openstack-swift-temp-url-support/
* http://blog.anynines.com/open-source-contribution-fog-openstack-adapter-public-urls/"
"*Acceptance criteria:*

* Γ£ö Update [Labs|http://labs.europeana.eu/apps/europeana-ruby/] to point to the europeana-api gem
* Γ£ö Update the europeana gem to issue deprecation warnings when it is used, but pull in, and map calls to, europeana-api for all existing functionality
* Γ£ö Update the europeana gem's [README|https://github.com/europeana/europeana-client-ruby] and [gem description|https://rubygems.org/gems/europeana] to make explicit that it is deprecated in favour of the europeana-api gem
* Γ£ö Move the europeana-api-client-ruby github repo from [~richard.doe]'s personal github account into [Europeana's organisational one|https://github.com/europeana/europeana-api-client-ruby]
* Γ£ö rubygems.org page for [europeana-api|https://rubygems.org/gems/europeana-api] gem to link to Europeana Github repo"
"The purpose is to make it easy for our users to attribute the creators and instutions as possible. This ticket concerns the design in patternlab.

*Pattern*

*HTML:*


{code:java}<a href=""http://www.europeana.eu/portal/record/xxx"">dc:title</a>. dc:creator. <a href=""edm:isshownat"">edm:dataProvider</a>. <a href=""edm:rights"" rel=""xhv:license http://www.europeana.eu/schemas/edm/rights"">rightslabel</a>.
{code}


_Example:_


{code:java}<a href=""url:http://www.europeana.eu/portal/record/90402/SK_A_2344.html"">The Milkmaid</a>. Vermeer, Johannes, <a href=""http://www.rijksmuseum.nl/collectie/SK-A-2344"">Rijksmuseum</a>. <a href=""http://creativecommons.org/publicdomain/mark/1.0/"" rel=""xhv:license http://www.europeana.eu/schemas/edm/rights"">Public Domain</a>.
{code}


*TEXT:*
dc:title - edm:landingpage . dc:creator. edm:dataProvider - edm:isshownat. rightslabel - edm:rights .

_Example:_
The Milkmaid - http://www.europeana.eu/portal/record/90402/SK_A_2344.html . Vermeer, Johannes. Rijksmuseum - http://www.rijksmuseum.nl/collectie/SK-A-2344. Public Domain - http://creativecommons.org/publicdomain/mark/1.0/ .


*Notes*
When there are multiple dc:title or dc:creator or edm:dataProvider use the first ones.

*License labels*
Public Domain (Public Domain mark and CC0) 
CC BY
CC BY-SA
CC BY-NC
CC BY-NC-SA
CC BY-NC-ND
Out of Copyright - Non-commerical re-use
Orphan Work
Unknown

Basically, like the facet labels.


*Benchmark*
The Wikimedia Commons image viewer include attribution snippets in HTML and text (ASCII).. Look for example at https://commons.wikimedia.org/wiki/File:Mona_Lisa.jpg#/media/File:Mona_Lisa-LF-restoration-v2.jpg and click the download icon on the right or right-click and Save as."
"Draft:

dc:creator, dc:contributor - who and with ()
dc:subject, dc:type - what and with """"
edm:dataProvider - with """"
edm:provider - with """""
"Head requests to the proxy service will give back mime types and ajax calls can be used to make those calls, but for accessibility and other practical reasons the mime type needs to be known up front.

We need a method in the back end similar to that which gives the download url:

      def edm_is_shown_by_download_url

but which gives back the content type, i.e. something like:

      def edm_is_shown_by_download_type

For now we need this only for the edm is shown by, but eventually this should work for all edm_hasView items.
"
"Our link to the original provider (edm:isshownat) fails for some, but not all objects. The reason seems to be that there's an extraneous /record/ added:

For http://www.europeana.eu/portal/record//90402/RP_P_1905_1578.html the edm:isshownat is
http://www.europeana.eu/portal/record/redirect.html?shownAt=http%3A%2F%2Fwww.rijksmuseum.nl%2Fcollectie%2FRP-P-1905-1578&provider=Rijksmuseum&id=/90402/RP_P_1905_1578

which doesn't resolve but

http://www.europeana.eu/portal/redirect.html?shownAt=http%3A%2F%2Fwww.rijksmuseum.nl%2Fcollectie%2FRP-P-1905-1578&provider=Rijksmuseum&id=/90402/RP_P_1905_1578 

does resolve.

*Solution?*
It seems that the bug would be fixed by making sure /record/ is not a part of the redirect.

*Note*
This may well be an issue in the data rather than the code.

"
"It looks like dc:format is not properly indexed. I wonder/worry it could be related to the new Solr schema!?

To replicate:
Go to http://www.europeana.eu/portal/record/2059201/data_sounds_53.html?start=1&query=es+pasauli&startPage=1&qt=false&rows=24
note the dc:format value shellac record

Search for shellac record. And note that you do not hit the item.
"
"Final update before alpha launch

*UI template to follow*
http://develop.styleguide.eanadev.org/?p=templates-Search-results-list  (but ignore the Grid view option. Out of scope for beta launch)

To add to our app:
* Γ£ö The active filters (beneath the search box) which the user must also be able to click away
* Γ£ö The action to call in More facet values

To modify in the app:
* Γ£ö Turn off the Channels filter. As we will have only the Music Channel to begin with it doesn't make sense. We can reintroduce it when we'll have both Art History and Music.
* Γ£ö Make the freetext description longer. Ellipse it at 277 characters making it 280 in total.
* Γ£ö Check the display logic for the creator. In many search results multiple creator names are shown with def values. See e.g. http://europeana-npc-test.de.a9sapp.eu/search?f%5BCOUNTRY%5D%5B%5D=sweden&q=who%3A+alexander+roslin where this occurs. We should try to hide those defs and not repeat user names.
* Γ£ö Hide the Save action (to be reintroduced once we've added My Europeana)
* Γ£ö Hide Sort action and all other actions 
* Introduce the number of hits control (options: 12, 24, 48, 96). DEFERRED.
* Γ£ö Remove the action that adds media type facet when clicking the media type. TODO for [~timharbour]"
"In the vocabulary there's a number of nearMatch defined. The issue is that SKOS has no such concept, it's properly called closeMatch. Thus all nearMatch statements must be changed to closeMatch statements (at the database level so that the various output formats are all fixed as a consequence).

(The cause of this bug  is me. Too many terms to keep straight in my head).

Example:
http://skos.europeana.eu/api/concept/4b120c59-4c79-7641-11d9-cd93951059c1.json where 


{code:java}nearMatch"":[""http:\/\/id.loc.gov\/authorities\/subjects\/sh85049843"",""http:\/\/dbpedia.org\/resource\/Folk_music"",""http:\/\/rdf.freebase.com\/ns\/m.02w4v""]
{code}


should be 


{code:java}closeMatch"":[""http:\/\/id.loc.gov\/authorities\/subjects\/sh85049843"",""http:\/\/dbpedia.org\/resource\/Folk_music"",""http:\/\/rdf.freebase.com\/ns\/m.02w4v""]
{code}"
With ticket EC-9985 implemented we can now pull in, resize and cache the blog images for display on portal and channel landing pages. The developers need clear instructions and/or layout of the images because I assume they are not intended to be displayed as they currently are http://europeana-npc-test.de.a9sapp.eu/ with wildly differing heights.
"Should be in the top menu/row so it is present and clear on all pages that these are test version. And we could have one closer to the bottom as well with a click through to testing instructions. See attached screenshot from Dean.

[~timharbour] to begin in the Pattern Lab and then for implementation in app."
"Some records get the wrong mime type set by the service described in EC-10043.

test url:
  http://localhost:3000/record/08613/2D9AB6540FB8075F8287D337FF96A734D7D6C584.html

edm is shown by for record:
  http://vastaanotin.tv.funet.fi/cgi-bin/tv?mrl=rtmp://salama.tv.funet.fi:21055/vod/fi/kava/finlandia/FINLANDIA-katsaus_229.mp4

@mime_type value:
  text/plain; charset=utf-8"
"*expected results*
after running a query and selecting an item iΓÇÖm brought to an item object page.

*actual results*
502 Bad Gateway: Registered endpoint failed to handle the request.
or
500 Internal Server Error: We're sorry, but something went wrong.

*steps to reproduce*
ran the following query:
* http://europeana-npc-test.de.a9sapp.eu/portal/search?q=los+angeles

selected the following items:
* http://europeana-npc-test.de.a9sapp.eu/portal/record/9200387/BibliographicResource_3000117258454/track?counter=12&search_id=2762
* http://europeana-npc-test.de.a9sapp.eu/portal/record/9200387/BibliographicResource_3000117269965/track?counter=39&search_id=2763
* http://europeana-npc-test.de.a9sapp.eu/portal/record/9200110/BibliographicResource_1000126577365/track?counter=40&search_id=2763"
"Front end javascripts assets like js and css are not included in our styleguide ruby gem - they are served from the ""CDN folder"".

To avoid serving development javascript code to beta users we need to point the acceptance/beta server to the correct CDN.

Our CDN is a pattern lab instance - Jenkins reports that it's been 4 months since production was updated (is that because the production branch of pattern lab doesn't build?) and current production apps hotlink to the develop pattern lab instance.


We can do two things, either we:

 - update production pattern lab and serve beta from there

but if that's problematic or risky then we could do this:

 - create a CDN snapshot: set up build task to copy js modules to ""dist-beta"" (parallel folder in our CDN)

 - create a ruby environemnt variable specifying our requirejs entry point (@js_entry set to ""dist-beta"")

 - read the new variable: in mustahe_helper.rb/js_files:
     change:
       styleguide_path('/js/dist/main/main')
     to:
       styleguide_path('/js/{@js_entry}/main/main')


(and then after we launch):

 - disable the build task that copies development work to parallel beta folder in our CDN

[~richard.doe]
@dan-nl
[~timharbour]"
"The styling for the pdfviewer (with full ui & controls) is 2006 lines of css:

	/source/js/modules/lib/pdfjs/viewer.css

This css is loaded on demand (distinct from our main stylesheet css) and it should remain the case that it only gets loaded on demand, but in order to make this stylesheet and others like it be manageable in the same way as our other stylesheets we need to:

 - add a compass config to our ""CDN""
 - add a grunt task to run compass
 - convert css files to scss files
"
"The markup that comes with the pdf-viewer (full ui with controls) is quite substantial (364 lines of .mustache template):

	/Europeana-Patternlab/source/_patterns/molecules/components/pdfjs/pdfjs-ui.mustache

The css and 8000 lines of javascript for this component are loaded dynamically but the actual component markup will always be loaded for objects that have a pdf attachment.

This sounds a bit revisiting the idea of a component api, but it would be good if we could pull in a single rendered mustache template from an ajax call."
"Let's keep it simple. Make sure a search box is prominent so we don't dead-end the user.

While we can draw a bit on http://develop.styleguide.eanadev.org/?p=templates-Not-Found-404 there are differences:
No breadcrumbs on the portal/channels
No sidebar with a contact person (unless you/Tim want those? I'd say add them later otherwise)
We don't use those style teaser boxes on the new portal but we could put in place the portal styled feature boxes instead (with e.g. boxes for the Music Channel and the two most recent exhibitions).

Text as in the Pro 404 but just linking back to the start page of the porrtal

1. Design
2. Implementation in Patternlab
3. Implementation in application"
"videojs plays flac files using the aurora plugin and the audiocogs flac plugin, which creates an ajax request to pull in the flac file and play it. unfortunately, at the moment this doesn't work. it appears that because the edm-is-shown-by service issues a content-disposition header, which forces a download of the files instead of streaming it, the aurora plugin and flac plugin cannot properly read the flac file and play it, but i'm not sure if that's the issue or not. is it possible to add a query parameter that would have the service stream the file instead of forcing a download?

*test examples*
* [psalm 65|http://europeana-npc-test.de.a9sapp.eu/record/2023601/oai_eu_dismarc_CHARM_DISC01SIDE01METS223A.html] (flac)"
"We're going to have to change out the hero image for the Music Channel. It's ND and we cropped it which we're not allowed to do without permission. So we should go for something else. I was thinking a crop of http://sged.bm-lyon.fr/Edip.BML/PubliImg/images/ESTA/00/00/02/2A/GED_00000000.JPG could work? Maybe with a raster overlay like the portal landing page?

It's attribition metadata is:
Danse de trois faunes et trois bacchantes. Hieronymus Hopfer. 
Biblioth├¿que municipale de Lyon. Public Domain.


Links: 
Item: http://www.europeana.eu/portal/record/15802/eDipRouteurBML_eDipRouteurBML_aspx_Application_ESTA_26Action_RechercherDirectement_NUID___554__ESTA_3BAfficherVueSurEnregistrement_Vue_Fiche_Principal_3BAfficherFrameset.html
Public Domain mark: http://creativecommons.org/publicdomain/mark/1.0/"
"When the new portal goes live the Music Channel will be the only channel (with Art History to be added in first week of September). So important that we optimise our Solr for the music query.

Which is:
(PROVIDER:""Europeana Sounds"" AND (what:music)) OR (PROVIDER:""DISMARC"") OR (PROVIDER: ""MIMO - Musical Instrument Museums Online"") OR ((what:music OR ""performing arts"") AND (DATA_PROVIDER:""Netherlands Institute for Sound and Vision"")) OR ((what:music) AND (DATA_PROVIDER:""Open Beelden"")) OR ((what:musique OR title:musique) AND (DATA_PROVIDER:""National Library of France"")) OR ((what:musique OR title:musique) AND (DATA_PROVIDER:""The British Library""))
"
"*NOTE:* This concerns the current portal. But we will be wanting to support this also in the new portal so the bug needs to be fixed.

*Issue:*
The OpenSearch statement is in the header of our portal pages. It looks like so:


{code:java}<link rel=""search"" type=""application/opensearchdescription+xml"" href=""http://api.europeana.eu/api/opensearch.xml"" title=""Europeana Search""/>
{code}

The issue is that http://api.europeana.eu/api/opensearch.xml does not resolve.

*Background:*
Conforming to the OpenSearch standard is what allows Europeana to be directly searched within browser search bars/address fields. This is not a capability we wish to lose."
"To better serve visual thinkers and exploration by browsing we should visualise the contents of Europeana in a way that also allows exploration of the contents via those visualisations.

*Metadata facets:*
By media type
By providing country
By copyright

By type or subject (concept)
By creator or contributor (agent)

*Media metadata facets:*
Images by colour

As this would be in-portal and outside of the statistics dashboard the purpose is to support exploration, not do formal content reporting. This means the visualisation should be playful and enticing. Visualisations could use e.g. [bubble charts|http://bl.ocks.org/mbostock/4063269] or treemaps using the number of hits to size the parts. 

*Tech ideas:*
d3.js and https://rubygems.org/gems/d3js-rails/versions/3.1.6 to implement these

*Design idea:*
Create a new top menu option called Browse or Explore which leads to a page with various ways to browse into the data."
"BUG: Increasing the API key limit does not work. Trying to causes a (generic) error page:

Sorry we can't find this page
Unfortunately we haven't found the page you were looking for.

You can go back to the Europeana home page, or browse other areas of Europeana by clicking the links below.

"
"As in the <title> in the header of the HTML


Home:
From ""Europeana Channels"" to ""Europeana Collections - Alpha"". DONE.

Search results:
From ""Europeana Search: keyword"" to ""Keyword - Europeana - Search results"". DONE.

Item page:
From ""Europeana Record: item title"" to ""Item title - Europeana"". DONE.

Music Channel:
""Europeana Music Channel - Alpha"". DONE.

Static page:
H1 - Europeana"
"h1. Results 

All results for the Desktop tab of Google Page Speed

*Home page*
https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Ftest.europeana.eu%2Fportal&tab=desktop

Should fix:
- Leverage browser caching. Setting an expiry date or a maximum age in the HTTP headers for static resources instructs the browser to load previously downloaded resources from local disk rather than over the network.

*Music Channel page*
https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Ftest.europeana.eu%2Fportal%2Fchannels%2Fmusic&tab=desktop

Should fix:
- Leverage browser caching. Setting an expiry date or a maximum age in the HTTP headers for static resources instructs the browser to load previously downloaded resources from local disk rather than over the network.

*Search results page*
https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Ftest.europeana.eu%2Fportal%2Fsearch%3Fq%3Dinro&tab=desktop

Consider fixing:
- Leverage browser caching. Setting an expiry date or a maximum age in the HTTP headers for static resources instructs the browser to load previously downloaded resources from local disk rather than over the network.

*Item display page*
https://developers.google.com/speed/pagespeed/insights/?url=http%3A%2F%2Ftest.europeana.eu%2Fportal%2Frecord%2F91619%2FSMVK_EM_objekt_1005452.html&tab=desktop

Consider fixing:
- Leverage browser caching. Setting an expiry date or a maximum age in the HTTP headers for static resources instructs the browser to load previously downloaded resources from local disk rather than over the network.
- Prioritize visible content. Your page requires additional network round trips to render the above-the-fold content. For best performance, reduce the amount of HTML needed to render above-the-fold content."
"Example:
http://europeana-npc-test.de.a9sapp.eu/portal/record/2048604/data_item_onb_abo__2BZ179741808.html
"
"
*Issues noted*

Note: Tested on a Sony Xperia Z1 Compact , running Android 4.4.4, Chrome, 1280x720 screen/342ppi (so retinaish)

General
Γ£ô Menu has some placeholder menu choices like Secondary 1 and Secondary 2

Portal landing page
Γ£ô Branding elements overlay each other making the text beneath the search field difficult to read and clicking the hero image attribution difficult. In landscape mode part of the text underneath the search field gets cut off
- Can't see my search term in the search box once I've typed it in and before I click enter or search. *SERIOUS*.

Search result page
Γ£ô No thumbnails are displayed for any items. *SERIOUS.*
X Search field: when adding a second keyword it become before the existing one in the display. This is different from desktop and could be confusing.
Γ£ô Facet options are a too close together/small and so a bit difficult to click correctly

Item display
X Similar items can't be swiped to pull in more similar items - this is JS functionality (I've created a subtask)
"
"*Business case*
A number of Europeana providers now support the image standard [IIIF|http://iiif.io]  . With IIIF we have at our disposal an efficient technology to display high-res zoomable images in the portal without having to necessarily store the images in a Europeana service. 

Note we have tested IIPMooViewer and it cannot support our use case. OpenSeadragon can't currently. Universal viewer can but has some drawbacks like its reliance on Typescript.

*Viewer technology*
We should  test [Mirador|https://github.com/IIIF/mirador] first which is explicitly positioned as a IIIF-viewer capable of pulling in IIIF from multiple sources. [Mirador project page|http://projectmirador.org/]. In its demo you can actually load an image by pasting in its IIIF-manifest. An issue with Mirador is that it's ambition goes well beyond being but a simple viewer and so it is ""big"". They are working on a simplified version though.

Later we could  also test [Openseadragon|https://github.com/openseadragon/openseadragon] who have IIIF-manifest support on their roadmap. OpenSeadragon is a more basic viewer and thus more suitable to our use case of basic display, zoom and pan.There is a [Ruby gem for OpenSeadragon to simplify using it in Rails based applications|https://github.com/IIIF/openseadragon-rails] that should also be considered as part of the spike to estimate whether it could be useful to us. NOTE: Currently OpenSeadragon does not support rendering IIIF-manifests, see https://github.com/openseadragon/openseadragon/issues/692 but the Mirador lead developer says he plans to create a plugin for it, see his response to a question of mine on the IIIF-mailing list here, https://groups.google.com/d/msg/iiif-discuss/lv1c0GSRJzo/CfRVbgWaAgAJ


After testing both we should decide which of them best suits us.

*Interaction*
User arrives to item display and sees edm:preview thumbnail. User clicks thumbnail to enlarge/read and at that point the IIIF-viewer is activated, the IIIF-manifest pulled in and the user sees the image(s). If there are multiple images in sequence pagination is available. 

*Test items and datasets*
Only a small number of our data providers support IIIF. 

*Bodleian Library*
Example object we can use is http://europeana-npc-test.de.a9sapp.eu/portal/record/9200175/BibliographicResource_3000004696986.html  

Note the dc:identifier http://purl.ox.ac.uk/uuid/9fb27615-ede3-4fa0-89e4-f0785acbba06

The corresponding IIIF-manifest is http://iiif.bodleian.ox.ac.uk/iiif/manifest/9fb27615-ede3-4fa0-89e4-f0785acbba06.json
so for Bodleian *the IIIF-manifest URI can be derived from the dc:identifier*

In Mirador's demo site I loaded that manifest manually and got http://projectmirador.org/demo/#9da5eb2f-9bc2-4621-8318-670fe13e2c44

*French National Library*
Another pilot partner is the French National Library who have IIIFed some  their texts and images (the ones from Biblissima). In terms of implementation we may want to keep a config file listing which datasets or data providers support IIIF. 

Text example:
http://europeana-npc-test.de.a9sapp.eu/portal/record/9200365/BibliographicResource_3000094705862.html in Europeana which has the IIIF-manifest http://iiif.biblissima.fr/manifests/ark:/12148/btv1b84539771/manifest.json

The IIIF-manifest URI can be derived from the item's dc:identifier http://gallica.bnf.fr/ark:/12148/btv1b84539771

Mirador demo http://projectmirador.org/demo/#4958afdd-3e7e-4732-bcf2-0b5ecd24bceb





"
Via [Video.js plugins|https://github.com/videojs/video.js/wiki/Plugins#playback-techs-support-media-from-different-sources] like videojs-java and videojs-silverlight.
See EC-10112.
"At present, all Europeana REST API responses are cached for 24 hours from time of retrieval, after which time any page request requiring the response will need to re-request from the API.

This is acceptable (for now) in the context of search results and records, but not for the counts of various sets of items, i.e. on the portal landing page and channel landing pages, where one end user may suffer an extended wait while many API queries are executed.

There are two aspects to improving this:

# Allow configurable cache expiration times for different API responses, e.g. 24 hours, 1 week, 1 month, never (see point 2)
# Set up scheduled jobs to periodically re-query the API for data known to be needed by the site at all times, e.g. recent additions to channels, media type counts per-channel, and then _overwrite_ the existing cache entry, so that it never expires and hence no end user will need to wait while the API is queried. This is already in place for blog feeds (see #226, EC-9985)."
"Unsure whether it is related but exhibitions.europeana.eu and remix.europeana.eu are both offline. Remix since 06.40 and exhibitions since 07:31. Blog.europeana.eu went offline at 07:37 but recovered at 07.40 and is now working as it should.

Error message for both Exhibitions and Remix is:
Error Code: 408. The operation timed out. The remote server did not respond within the set time allowed. The server might be unavailable at this time. Try again later or contact the server administrator. (12002)

@bramlohman [~andyjmaclean] @yorgos.mamakis
Exhibitions needs to come online again ASAP. Remix is of lower priority.

UPDATE: Blog went temporarily offline again. So this seems to be a Genesis-wide issue."
"Noted at 19:44 on the Saturday that all portals were down. Internal test and acceptance. And the public test site. Don't know for how long they had been down by the time I checked.

We need to investigate, find out what's wrong and try to fix it. If possible also set up some montitoring that warns us if the service goes down.
"
More graceful than now where if the similar items fail the item page doesn't load at all (see EC-10125).
"

*1.* 
Multiple items download via marking individual objects. Either A. in a search result, see https://projects.invisionapp.com/d/main#/console/1083571/42152235/preview or http://demo.deanbirkett.name/5H336U/search_result.html ,  or B. from saved My Europeana items, see https://projects.invisionapp.com/d/main#/console/1083571/78714750/preview or saved My Europeana items with a specific tag

Options: 
- Various metadata formats (JSON, JSON-LD, RDF/XML, CSV)
- With linked media or without linked media (with= the app tries to fetch the edm:isshownbys and edm:hasviews).


*2.* 
Multiple items download based on a whole search result, either A. directly from a search result or B. from saved search in My Europeana.

Options: 
- Various metadata formats (JSON, JSON-LD, RDF/XML, CSV)
- With linked media or without linked media (with= the app tries to fetch the edm:isshownbys and edm:hasviews).

Interaction, B: See https://projects.invisionapp.com/d/main#/console/1083571/78754103/preview where the user would mark a saved search and choose Download as an Action (actions are top left).


*Notes*
- Ideally developed API-first with the portal acting as a client to an API that allows requesting these exports and fetching the output
- Metadata is retrieved via Get record calls. Support for CSV output would need to be added to the API. With CSV we'd also need to flatten/simplify the metadata, perhaps make it the equivalent of the Rich Search call response
- The generation of the exports must happen as a background job with the user notified, via mail and in their My Europeana pages, that the job is completed (or for some reason has failed)
- Metadata and media files to be zipped up for smaller disk space usage and quicker downloads
- Exports need to be persisted for more than a couple of days
- Exports of media may be limited to only media files that are CC-licensed or Public Domain (i.e. the two reusable values of Can I reuse it?)
- A cap on the max number of items possible to download must be configurable
- A cap on the max number of parallel exports a user can have must be configurable

*Comparisons*
- [Getty Search Gateway|http://search.getty.edu/gateway/search?q=&cat=highlight&f=%22Open+Content+Images%22&rows=10&srt=a&dir=s&pg=1] allows users to mark multiple objects and download their metadata in XML
- Auckland Museums allows download of item metadata from [search results|http://www.aucklandmuseum.com/collections-research/collections/search?pht=True&k=posters]

Not aware of any GLAM that does something exactly as we plan to here (asynchronous, metadata+media).
"
"To make it easier also for API-clients to attribute.

The snippet should be available both in HTML and in plain text/ASCII.

The purpose is to make it easy for our users to attribute the creators and institutions as possible. 

*Pattern*

*HTML:*


{code:java}<a href=""http://www.europeana.eu/portal/record/xxx"">dc:title</a>. dc:creator. <a href=""edm:isshownat"">edm:dataProvider</a>. <a href=""edm:rights"" rel=""xhv:license http://www.europeana.eu/schemas/edm/rights"">rightslabel</a>.
{code}


_Example:_


{code:java}<a href=""url:http://www.europeana.eu/portal/record/90402/SK_A_2344.html"">The Milkmaid</a>. Vermeer, Johannes, <a href=""http://www.rijksmuseum.nl/collectie/SK-A-2344"">Rijksmuseum</a>. <a href=""http://creativecommons.org/publicdomain/mark/1.0/"" rel=""xhv:license http://www.europeana.eu/schemas/edm/rights"">Public Domain</a>.
{code}


*TEXT:*
dc:title - edm:landingpage . dc:creator. edm:dataProvider - edm:isshownat. rightslabel - edm:rights .

*NOTE:If there's a dc:creator and edm:rights on the WebResource let it take precedence.*

_Example:_
The Milkmaid - http://www.europeana.eu/portal/record/90402/SK_A_2344.html . Vermeer, Johannes. Rijksmuseum - http://www.rijksmuseum.nl/collectie/SK-A-2344. Public Domain - http://creativecommons.org/publicdomain/mark/1.0/ .


*Notes*
When there are multiple dc:title or dc:creator or edm:dataProvider use the first ones.

(Or should we inlcude them all? Makes for a loong snipper sometimes)

Ask [~antoine.isaac] how to include 
{code:java}<span rel=""cc:useGuidelines"" resource=""http://www.europeana.eu/rights/pd-usage-guide/""></span>
{code}


*License labels*
Public Domain (Public Domain mark and CC0)
CC BY
CC BY-SA
CC BY-NC
CC BY-NC-SA
CC BY-NC-ND
Out of Copyright - Non-commerical re-use
Orphan Work
Unknown

Basically, like the facet labels."
"When a user first arrives to the portal they need to be made aware that we set cookies. The message needs to include a link to our privacy policy (which needs to be reviewed and updated to include also a list of what cookies we create and also be more user friendly, smth like https://silktide.com/privacy-policy/ ).

*Copytext:*
This website uses cookies to ensure you get the best experience on our website. By clicking or navigating the site, you agree to allow our collection of information through cookies. [More info|http://www.europeana.eu/portal/rights/privacy.html]       Action: Close
(should be translated in all languages)

Clicking Close sets a cookie so that the user never gets this info again (unless he/she clears her cookies). 

*Acceptance criteria:*
* Cookie notice visible on all pages with the copytext above.
* Close button makes sure the notice disappears and never pops up again for that user.
* If a user has this plugin: http://www.kiboke-studio.hr/i-dont-care-about-cookies/, the notice will not pop up."
"
Victoria and Albert Musum items here:
http://test.europeana.eu/portal/search?f%5BTYPE%5D%5B%5D=IMAGE&page=4&q=who%3A+%28walter+crane%29

Issue related to EC-10050 ?"
"Based on findings documented in EC-10087.

MUST:
- Leverage browser caching. Setting an expiry date or a maximum age in the HTTP headers for static resources instructs the browser to load previously downloaded resources from local disk rather than over the network.


SHOULD:
- Prioritize visible content. Your page requires additional network round trips to render the above-the-fold content. For best performance, reduce the amount of HTML needed to render above-the-fold content."
"- Draw on the experience of the implementation in the current/old portal and focus on the areas where we had trouble implementing the logging there, see EC-9890
- But draft the spec from the perspective of implementing the logging in the new portal
- Use a GoogleDoc for the spec for easy collaborative editing and Q&A
- *The spec to be used as a basis for a follow-up contract with 904Labs to update their SDK and/or assist in the implementation in the front-end*"
"Note to @bramlohman and [~gsergiu79] to create sub-tasks for this story as needed.


Notes:
Should be as automatised as possible with Jenkings jobs, etc.
AIT should also have received info on how we do branching and release mgmnt in Github"
In line with https://docs.google.com/document/d/1dGbqaSDNduZmQj3ebE-pzBIUAli8OcvZtAZs75GQp8w/edit#
"Implement Leaflet based IIIF-viewer prototype in the application. Limit it to specific datasets or even individual items.

*Controls needed:*
* Zoom in and out
* Pan
* Pagination
* Full screen (and return to non-full screen)
* Keyboard controls (see http://leafletjs.com/reference.html )

*For the following dataset from Bodleian Library:*
9200175_Ag_EU_TEL_a1008_EU_Libraries_Bodleian where the dc:identifier can be used to generate the IIIF-manifest URI.

For example for dc:identifier http://purl.ox.ac.uk/uuid/9fb27615-ede3-4fa0-89e4-f0785acbba06 the corresponding IIIF-manifest is http://iiif.bodleian.ox.ac.uk/iiif/manifest/9fb27615-ede3-4fa0-89e4-f0785acbba06.json

The pattern is consistent.

*And the two following individual items from the National Library of France*

1.
http://test.europeana.eu/portal/record/9200365/BibliographicResource_3000094705862.html in Europeana which has the IIIF-manifest http://iiif.biblissima.fr/manifests/ark:/12148/btv1b84539771/manifest.json

The IIIF-manifest URI can be derived from the item's dc:identifier http://gallica.bnf.fr/ark:/12148/btv1b84539771

2.
http://test.europeana.eu/portal/record/9200365/BibliographicResource_3000094948479.html.html which has the IIIF-manifest http://iiif.biblissima.fr/manifests/ark:/12148/btv1b10500687r/manifest.json

The IIIF-manifest URI can be derived from the item's dc:identifier http://gallica.bnf.fr/ark:/12148/btv1b10500687r
"
"Before the support for additional RDF formats was done within Cesare's servlet. 
Since we decided to move towards Apache rewrites we need to decide on how to best support these formats.

*Formats to be supported:*
* JSONLD for OpenSKOS
* JSONLD extension for the Record API needs to be changed to ""jsonld""
* Turtle, N3, NTriples, N3, Trig

*References:*
* Dependent on ticket EC-9854
* Content negotiation update - Provide support for other RDF formats, https://europeanadev.assembla.com/spaces/europeana/tickets/1893
* 1453: Dereferencing Europeana URIs, https://europeanadev.assembla.com/spaces/europeana/tickets/1453"
"*Template:*
http://develop.styleguide.eanadev.org/?p=templates-search-404

*Acceptance criteria:*
Creation/selection of browse entry points to be done via the CMS
The text ""Sorry we can't find that page. Unfortunately we couldn't find the page you were looking for. Try searching Europeana or you might like the selected items below."" to be translatable and editable in the CMS."
"At the *beginning* of sprint 14 release the acceptance tested and demoed outcomes of Sprint 13. So a deploy on August 31 or Sep 1.

# As FLAC support (EC-10070) is implemented and to be deployed, the proxy service will need its codebase updated to tag v0.2.0 of the europeana-proxy-ruby repo.
# Merge acceptance branch of europeana-channels-blacklight into master, tag as v0.2.1, deploy from that tag
# Write a release summary for v0.2.1 tag on Github, summarising new features"
"Parent ticket EC-9939 is blocked due to a pending migration. 
Sergiu, you suggested you might have a solution for this based on the Annotations work.

Can you reference this in this ticket and assign to Maike to see if that works for this case?"
"Blogs not displaying on music channel or portal. Might be caching issue? 

Note 1:
There was a new blogpost added not too long before the blogs disappeared, I don't know if there is a connection though... 

Note 2:
While test.europeana.eu didn't pick up the new blog posts correctly it seems http://europeana-npc-test.de.a9sapp.eu/portal did (and its Music Channel landing page, http://europeana-npc-test.de.a9sapp.eu/portal/channels/music )


"
"When a search is run on the new portal and the API response is already cached, the web application still takes on average more than 1 second to generate its response, with most of this time being spent in the view code. An example log entry:

{code:java}Completed 200 OK in 1238ms (Views: 1190.7ms | ActiveRecord: 1.8ms){code}

Investigate why rendering the search results page takes so long, and optimise if possible."
"Implementing authorization workflow to Europeana using OAuth protocol as client (based on http://labs.europeana.eu/api/authentication/), we encountered problems: 

1. The main problem is not getting the access token. Employing http://europeana.eu/api/oauth/authorize request we only receive JSESSIONID.
2. Api Key verification (preferrably over http and not as java call). This is a design issue that we should discuss. (for the time being we can use a hardcoded/mock implementation)
3. Integration of OAuth. We are not able to use current OAuth2 from browser or unit tests. 
4. The specifications on the authentication/authorization are also not complete for the annotation API. Samples would be very helpful in order to know - how should Europeana requests/responses look out.



"
"Try to use https://github.com/collab-project/videojs-wavesurfer

Let's try to make the colour of the waveform the signal blue colour of our new portal.
"
"Some records have language labels with three-letter codes (in search results and record responses). Some have empty languages codes (in search results). Until that can be fixed at the data/API level, the app needs to handle these cases with language aware metadata.

{{undefined method `gsub!' for #<ActiveSupport::HashWithIndifferentAccess:0x00000005e7fd60>}}

see: http://test.npc.eanadev.org/portal/record/2023838/nashy_kolekcii_upload_17_document_files_dmp06ktt_mp3.html

(three-letter language codes)

{{undefined method `map' for nil:NilClass}}

see: http://test.npc.eanadev.org/portal/channels/music?q=opera

(empty language codes)"
"MP3 will not play:

http://europeana-npc-test.de.a9sapp.eu/portal/record/2022611/TEdf_126867.html

Cause:

mime-type is ""application/octet-stream"" (download is an aspx page) - this is not playable."
"Some sound providers use MIDI files (.mid), e.g. {{http://www.europeana.eu/portal/search.html?qf=DATA_PROVIDER%3a%22Gotlandstoner;%20Sweden%22&rows=24}}

There's a video.js plugin https://github.com/Afterster/videojs-java  that extends support to that format that we can test to see if we could use to support MIDI-files. It also extends support to a number of video files."
"*Problem:*
The [current search widget|http://www.europeana.eu/portal/usingeuropeana_searchwidget.html] is based on the current portal. If we don't take action this means that the implementations out there in the wild will break when the new portal version is introduced.

*Acceptance criteria:*
A way to continue to support the existing implementations of the search widget must have been found. We mustn't break our customer's implementations. That's bad juju. 

NOTE: It is not necessary to develop a new search widget and search widget wizard. For now we simply want to be backwards compatible."
"

NOTE: PD-team considers this to be the wrong strategy and knows from experience and user research that it is better to have a smaller number of translations of excellent quality than a large number of translations of poor quality and low coverage. An attempt to reach all official EU-languages is very likely to result in the latter.
"
"Replacing http://www.europeana.eu/portal/europeana-providers.html and thus allowing users (mainly our data partners) to find content by provider and data provider in Europeana. 
"
"Replacing http://www.europeana.eu/portal/newcontent.html but entirely API-driven. 

We could probably implement the same way we did as when [~richard.doe] added the latest 3 datasets per channel on the channel landing page."
"[~andyjmaclean] [~cr.marcelino] [~richard.doe]

After our kick-off last Thursday we agreed to work on a rough estimation of the technical requirements and time and effort it will take to realise the concept. 

I have added the wireframes to the ticket as attachments. 

Here you can find the demo: https://projects.invisionapp.com/share/6E3W8B9JY#/screens
Here is the creative brief that will give you a little more background: https://docs.google.com/document/d/1XFv9WhWxxXrZgu0adkUXeA9ufrZT76VLo872QSbutgc/edit?usp=sharing
Here is an overview of the development goals: https://docs.google.com/document/d/1s7Ld8eTgdTJe8jScTdATTR4_pvyB8yp6tjd5NllWDSw/edit?usp=sharing

During our meeting we also mentioned ""pageflow"", which looks a lot like what we have in mind and might be helpful to check out: http://pageflow.io/en
I have signed up for the trial version, so should you need to log in, you can find the credentials here https://basecamp.com/1768384/projects/783910/documents/9610955

May the force be with you! "
As with hero images (see EC-10169), the images in promo blocks and channel browse entry points need to be decoupled from the styleguide so that full image URLs can be supplied to the templates without the styleguide image root being prepended.
"Styleguide assets deployed to the EngineYard hosted PatternLab sites have no versioning and so different versions of a JS or CSS file will often have the same filename. Clients may cache these resources and fail to pick up changes when they are deployed. Some form of versioning should be implemented so that deployed changes take effect without the need for users to clear their client's cache. *The purpose of this spike ticket is to research and propose a versioning solution.*

This affected EC-10156 when the public alpha was updated with assets from the development styleguide which then lacked minified versions of the JS assets.

*Acceptance criteria:*
A wiritten (GoogleDoc) and peer-reviewed proposal for how to version Patternlab that includes also an estimation of effort."
"Hello!

I published a new exhibition on Google Cultural Institute: https://www.google.com/culturalinstitute/exhibit/cake-cake/QRtG6eMd

It went live last Friday, but the promotion won't start before the next week. 
I would like to ask you to add a tile for it to the foyer. It should be placed as first and in full size. Also with Europeana Food&Drink logo. 

Title: Cake? Cake!
Image, white Europeana logo and white Food&Drink logo attached: 
cake_tile 
White_trans_small
europeana_food_and_drink_logo

Cheers,
Maggy"
"A la Wikipedia's mobile app:

Creating an image with an overlay:
http://blog.wikimedia.org/2015/04/02/share-a-fact-with-friends-on-android-app/

Example in the wild:
https://twitter.com/ReaderMeter/status/639389021177802752



"
"Same as in current production portal.
"
"Hello!

Some time ago we published an exhibition on Google Cultural Institute. There were some issues with content and links, so we delayed the promotion.
But now everything works, so I would like to ask you to add a tile for it to the foyer:

English: https://www.google.com/culturalinstitute/exhibit/we-know-this-war-by-heart/gQyoPck7
Portuguese: https://www.google.com/culturalinstitute/exhibit/we-know-this-war-by-heart/gQyoPck7?hl=pt-PT

Title: We know this war by heart
Image and white Europeana logo attached:
WeKnowThisWar_tile.jpg
White_trans_small.png

It should be placed *second* (after Cake) and in full size. 

Tiles for following exhibitions (Recording&Playing machines, Photography on a Silver Plate) can be made small now.

Cheers,
Maggy"
"Issue:
Facet values sometimes display dual column. This should not happen on as large displays as my laptop (from which the screenshot is taken).

See attached screenshot
"
"The top menu navigation needs to be ""fed"" with its data/options. Ideally these should be as dynamic as possible, i.e. an editor should not need to update menu choices manually. However I would leave design and choice of implementation to [~richard.doe] .

In the first release of the top menu navigation we want the following top menu choices:

Home Channels Exhibitions Blog                                                 Settings (on the right of the Sites fold-up)

*Home:*
To work just as now, click it and you go to the portal base URL

*Channels:*
This is intended to have all available channels, listed in alphabetical order, as choices. At the very first release this would be the Music  only with Art History  being added soon after. After that we would not add more channels in a long while. I would suggest that the Portal CMS is the best tool to update this menu choice but I would leave implementation to Richard.

*Exhibitions:*
This is intended to list a small number (I would suggest 5-7) of the most recently published exhibitions and a link that goes to all exhibitions at http://exhibitions.europeana.eu

In terms of implementation I would see two main options:
A - to take them in from the exhibitions landing page RSS-feed, http://feeds.feedburner.com/Europeana-Exhibitions
B - to add them editorially in the Portal CMS

*Blog:*
This is intended to list a small number (I would suggest 6 as that's the number shown per page at blog.europeana.eu) of the most recently published blog posts and a link that goes to all blog posts at http://blog.europeana.eu

In terms of implementation I would see two main options:
A - to take them in from the blog RSS-feed, http://blog.europeana.eu/feed/
B - to add them editorially in the Portal CMS

*Settings:*
To go to the settings option pages. The first such page is the language settings controls Carlos is working on in EC-10198.

In terms of implementation it seems to me that this one would need to be either hardcoded to always go to one Settings page where there's a side-navigation. Or that it is a ""drop-down"" the options of which are controlled in the Portal CMS. 

*Top menu choices*
Home should always be present but I would suggest that the other top menu choices could be made editable (inlc. add/hide/remove) in the Portal CMS."
"This feed http://exhibitions.europeana.eu/rss/exhibitions.xml

Check with Dean how he created and intended to keep it up to date. I suspect manually.
"
"We do not currently have a way to prevent browsers using stale versions of javascript files.

Find a clean way of doing this so that:

 - browsers will not cache js from test site
 - we can expire the cache for the acceptance / production site"
"Which are now in the portal. Need to be recreated in the new portal, moved to Pro or moved elsewhere. With retained URIs/URLs.

Needs to be aligned with the international rights statements depending on the timeline of their implementation.


"
"We need a proper solution to in the API (both Search and Record) to denote whether an item has a thumbnail or not.



Old description:
* default thumbnails in the search result list
* default thumbnails in the object page
* the ""play"" indicator

This requires changes to ruby code so assigned to me."
"Currently the only media item available to the object page is that specified by the edm_is_shown_by.  We would like to be able to access all the media items related to the object.

An example record would be the Hammerfl├╝gel, available at this url in the api:

*	[http://www.europeana.eu/api/v2/record/09102/_GNM_693983.json?wskey=api2demo|http://www.europeana.eu/api/v2/record/09102/_GNM_693983.json?wskey=api2demo]

and here in the new crf api:

*	[[http://delta-api.de.a9sapp.eu/v2/record/09102/_GNM_693983.json?wskey=api2demo]]

This object has 13 .jpg images, 3 .mp3 and 2 .avi files, but currently only a single .jpg can be viewed:

* 	[[http://europeana-npc-test.de.a9sapp.eu/portal/record/09102/_GNM_693983.html]]


The urls for these media items are already available, but before they can be successfully displayed and played work is needed both on the front and the back end.


*The back end*

1) - normalise data

The edm-is-shown-by will always be included in the web-resource array, but it's possible that thumbnails will be included in the web-resource array too.  To build a full media-model the data should be normalised:

a) an array of urls should be created (let's call it ""url_array"") by concatenating the edm_is_shown_by url with the ""hasView"" array
b) the edm_is_shown_by url should be the first item of the url_array
c) duplicates should be eliminated from the url_array (this record, for example, has duplicates in the hasView: ""2048079/Athena_Plus_ProvidedCHO_Riksarkivet_953"")
d) the web_resources array should be filtered to only include elements the ""about"" field of which matches an items in the url_array

The filtered web_resources array forms the basis for the front-end model.

The items within it should have both a url and a mime type - this latter to help avoid the pitfalls that come with badly-mapped data, allowing us to vet urls that reportedly point to, say, a video or sound clip but which actually point to a web page that has a video or sound clip embedded within it.

The @mime_type variable used in:
	app/views/portal/show.rb

will no longer be needed once a normalised web_resource array is available.


2) - enhance proxy service

To avoid cross-domain errors we currently use a CORS-enabled proxy service:

	[[http://edm-is-shown-by.de.a9sapp.eu/09102/_GNM_693983]]

This works fine for the edm_is_shown_by web resource but not for the other images or media files.  Visiting the above url in a web browser will trigger a download dialog for an image, but it does not serve the other media files.

This service needs to be enhanced by / replaced with something more comprehensive, perhaps along the lines of the following:

	[[http://edm-web-resource/09102/_GNM_693983/escaped-web-resource-url-here]]



*The front end*

Current front-end architecture was designed with the multi-media file requirement in mind (the model defines an array of players required for an object rather than a single player, the javascript is structured to handle these players, the photo-swipe component is coded to make a gallery of all the web-resources that appear, etc.) but this architecture has not been finalised or tested.  Provisional investigations show that both the video player and the pdf viewer run into errors when they are re-initalised without a page reload.

The front end will be done when all available media can be viewed / listened to, closed and reopened without a page reload.

*Notes*

The new crf api is here:
  http://delta-api.de.a9sapp.eu/v2

The data is still being processed, so it's possible that there will be records with incomplete data.  Including the parameter ""media=true"" in a search url will return results that are guaranteed to have at least one media item processed, i.e.

  [[http://delta-api.de.a9sapp.eu/v2/search.json?query=paris&rows=25&start=1&media=true&profile=facets&wskey=api2demo]]

A record with multiple media items that's been fully processed:

  [[http://delta-api.de.a9sapp.eu/v2/record/2048079/Athena_Plus_ProvidedCHO_Riksarkivet_953.json?wskey=api2demo]]


"
"
h1. User story 

As a user I want to be able to browse for images in Europeana via colour.

*Design note:*
To support users who are visual thinkers and browsers the visualisation should be playful and enticing. Visualisations could use e.g. a bubble chart using the number of hits per colour to size the bubbles. 

*Interaction, basic*
The user chooses Colours under the Browse top menu. 

The user gets a full page (relative URL should be /portal/browse/colours) with an overview of all colours available in Europeana displayed in a grid. 

The user clicks a colour and gets a search result (with MEDIA TYPE = IMAGE automatically added)


*Comparisons:*
Remy's minimalist colour browse http://www.remy.tv/projects/europeana_crf/?action=colour    Link to a colour search result with media type=IMAGE activated, http://www.remy.tv/projects/europeana_crf/?action=search&colour=%23FF8C00&type=IMAGE

Cooper-Hewitt's collection by colour, https://collection.cooperhewitt.org/objects/colors/



*MORE ADVANCED IDEA - IGNORE FOR NOW IF IT SOUNDS TOO COSTLY*

*Interaction, advanced*
The user gets a full page (relative URL should be /portal/browse/colours) width a bubble chart showing all colours in Europeana. The bubble are sized via their frequency of occurence with the number of items matching the colour within. When a user clicks a bubble a search is excuted for items of media type IMAGE that has that colour in them. 

As greyscale colours are likely to dominate there should be an option that makes it possible for users to filter them out.

*Tech ideas:*
Use d3.js http://bl.ocks.org/mbostock/4063269 and https://rubygems.org/gems/d3js-rails/versions/3.1.6 to implement the bubble chart?"
"The mailchimp ones. There are 3: end-users, network, re-users.

[~cr.marcelino] since you will be taking ownership of these I assign this to you. [~timharbour] can give you some pointers."
To implement the rules/solution as defined in EC-10246 and push it to production.
"During the implementation of CRF metadata facets for the new portal and channels (EC-9768), the following issues were identified and should be addressed at the API level:

# facets can not be requested individually like &facet=IMAGE_SIZE but can only be retrieved within the DEFAULT facet set
# facets do not take effect if specified with quotes around them like &qf=image_aspectratio:""Landscape""
# colourpalette and media are their own API parameters, and do not work if specified in the qf parameter like &qf=colourpalette:#80000
# idiosyncratic behaviour of IMAGE_COLOUR and IMAGE_GREYSCALE. For facet retrieval, only the former exists. For search filtering, both exist but only for assertive, i.e. true, value.
# inconsistent ΓÇ£booleanΓÇ¥ fields: SOUND_HQ only has ΓÇ£trueΓÇ¥, no ΓÇ£falseΓÇ¥; IMAGE_COLOUR only has ΓÇ£trueΓÇ¥, no ΓÇ£falseΓÇ¥ with IMAGE_GREYSCALE as the inverse; TEXT_FULLTEXT has both ΓÇ£trueΓÇ¥ and ΓÇ£falseΓÇ¥

In general, the concern is the introduction of idiosyncrasy and inconsistency, expected behaviour resulting in errors, and the expectation of each and every API client  to implement excessive business logic to cope with these."
"The Jenkings configurations were created to build the Annotation API and deploy it in the test envrionment see EC-10142
test-annotations.europeana.eu

Within the europeana-client module there are implemented integration tests (junit) which test the basic functionality of the of the annotation API.

The base url of the annotation server is configured in the annotation-client.properties (this is available in the github repository but it should be deleted)
The template for generating the properties file is available in github.
https://github.com/europeana/annotation/blob/master/annotation-client/src/main/resources/annotation-client.properties.template

It is not required that the client tests are launched on the annotation server, it would be the best if we can run them from the Jenking environment.

Acceptance Criteria:
The required configurations or scripts are created so that the integration tests can be run with one click.
The integration tests are successfully executed (e.g. with the current status all tests sould success, anyway, if some of them fail, different tickets should be created)"
"The first release candidate for the alpha version of the Annotation API was deployed on the test environment:
http://test-annotations.europeana.eu/

The testing of this release candidate needs to be performed as follows:
1. User testing of the swagger console
2. Integration testing using unit tests (see EC-10256)"
"The ui shows gibberish:

See attached or here:

http://europeana-npc-test.de.a9sapp.eu/portal/search?page=16&q=provider_aggregation_edm_isShownBy%3A*.avi"
"This may only affect the new portal and channels, or it may affect other of our Git version controlled projects, but I have been concerned for a while that our use of test and acceptance branches is needless.

A short write-up of the problem as I see it , with suggestions to improve, is here: https://docs.google.com/document/d/1h3jX16Vl_XdOUr3b2vHQCpnqYBKJL0CMdQ1JgHFkAnk/edit?usp=sharing

[~andyjmaclean], @bramlohman, @DavidHaskiya: your comments on the above document are welcome, even (especially) if only to point out that I am mistaken in my assessment or application of the current workflow."
"Other Rails applications developed for Europeana will need to use the styleguide.

The [styleguide gem|https://github.com/europeana/europeana-styleguide-ruby] needs to be made ready for reuse by these applications.

In particular, ensure that the documentation is clear and comprehensive.

The first application other than the new portal to use the styleguide gem will be the new statistics dashboard (see EC-10266)."
"For context, see EC-10268.

The item display page needs a link to display more thumbnails than the four shown by default.

On clients with JS, this will be processed by AJAX. On clients without, e.g. search engine crawlers, it needs to work as a plain HTML link."
"As soon as we deploy the new Thumbnail/Media API (EC-10247), our h180 thumbnails in the search results page on the production Portal will suddenly become 200 pixels in width.

A small fix is required in the Portal code/styling in order to adapt it to this new size, in order to not break the current search results page."
"*What is required?*

It should be possible for an API user to retrieve (a list of) annotations based on a Europeana recordId, the idea is to use the Search API for this.

* First implementation of the Search API should support the retrieval of annotations based on a Europeana recordId, to facilitate the user scenario of posting annotations for a record, and then retrieving those to present to the user.

* In case of object linking, an annotation should be included in the search of any of the targets matches the recordId.

*Acceptance criteria*
This ticket is accepted when there is a first draft of this API, to support this specific search only for its first version, in the Annotations API Master Document.

*Follow-up*
In the next sprint, this first version should then be implemented. Input from [~hugo.manguinhas] [~gsergiu79] and myself needed."
"Currently our API code/branch situation is as follows:
* We have a *busymachines* branch, which is deployed to *delta-api*, and contains all changes for the re-indexing & CRF. This one is the first one that needs to go live as soon as the SolrCloud situation is resolved.
* We have various other branches, for instance one used on *alpha-api,* which include enhancements by Maike & Willem-Jan, some of which are still in progress.

Our procedures dictate that we deploy the *master* branch to production, so my suggestion is to start working on that. Should the SolrCloud situation be resolved earlier, we can always deploy the busymachines branch earlier as it contains the most important features already. If not, we'll deploy the master branch to production as soon as we have the go-ahead.

The master branch should contain the following features, fixes & branches, which should be merged into master:
* The busymachines branch in its entirety, which includes re-indexing & CRF changes (re-factoring as been instructed by @wjboogerd & @bramlohman has to be completed first, including unit tests).

And the outcomes of the following tickets, which should already be on the alpha-api but some may not:
* #1788-DPS - Fix componentColour bug in JSON-LD
* EC-9939 - API to return proper error responses in JSON for all failures
* EC-9965 - Enable sorting on timestamps
* EC-10273 - Country field missing from API response

This list will be updated with other tickets as other tasks get completed/tested/finalised.

This ticket is accepted when busymachines branch & other accepted features/bugs are merged into master, and this is available for pre-production (regression) testing on a separate URL.
Probably requires work from @bramlohman, @jaclu and @wjboogerd and input from [~luthien] and @yorgos.mamakis
When pre-production testing has been completed and the SolrCloud situation has been resolved, this API version will be deployed to production.

When this ticket has been completed, the busymachines branch can be deprecated and we can go back to our proper branching strategy."
"In order to work on this ticket, either EC-10282 has to be completed first, or you create a separate branch based on the busymachines branch (to merge into master later).

This ticket should rectify some issues that came up with the new CRF-facets. The new CRF-facets are based on ""facet tags/fake tags"" and therefore not true Solr facets.

This results in the following limitations:
* Once you select a value in a facet (eg &qf=IMAGE_SIZE:large), the counts for the other values in the same facet (eg IMAGE_SIZE: extra_large/small/medium) are not correct.
* The facets= parameter is ignored for any of these CRF-facets (eg &facet=IMAGE_SIZE is ignored).
* Facets do not take effect if specified with quotes around them like ASPECT_RATIO:""Landscape""
* The &colourpalette and &media parameters are not available as facets to search on with their name.
* IMAGE_COLOUR & IMAGE_GREYSCALE are two facets in the facet list, instead of one (would be better).

The new CRF facets are:
MEDIA
MIME_TYPE
IMAGE_SIZE
IMAGE_COLOUR
IMAGE_GREYSCALE
COLOURPALETTE	
IMAGE_ASPECTRATIO
VIDEO_HD
VIDEO_DURATION
SOUND_HQ
SOUND_DURATION
TEXT_FULLTEXT

The stories in this epic will rectify/mask some of these shortcomings, as a first step to improve the CRF API features.
Note that these changes will have to be made on the API/software level, as this cannot be done by talking differently to Solr."
"

*Acceptance criteria:*
The viewers look like 


Image
https://projects.invisionapp.com/d/main#/console/1083571/105015047/preview ( fit on screen )
https://projects.invisionapp.com/d/main#/console/1083571/105015150/preview (full size)

Audio
https://projects.invisionapp.com/d/main#/console/1083571/105017744/preview ( with preview )
https://projects.invisionapp.com/d/main#/console/1083571/105017910/preview (with waveform)

Video
https://projects.invisionapp.com/d/main#/console/1083571/105018301/preview

pdf
https://projects.invisionapp.com/d/main#/console/1083571/105018547/preview

iiif
https://projects.invisionapp.com/d/main#/console/1083571/105018641/preview
"
"As a user I would like to see my search results as a grid to allow me to:
* Browse Europeana items in a more visual way.
* Quickly scan the search results for what I'm looking for.

Previous research done on this subject can be found here:
https://docs.google.com/document/d/1TW990mixyUm9JUUJlA9m4KvArgst-nxayLXvKjqyUyo/edit#heading=h.drsufvfwfei2

There are also some early wireframes in InVision:
https://projects.invisionapp.com/d/main#/console/1083571/88153689/preview

Considerations:
* The grid display should NOT replace the current listing, which will remain the default. The user should be given the option to choose.
* We should consider changing the default number of items per page in a grid view, cp. Google Image Search. The user should also be able to change this.
* User options could be kept in a cookie so that the users preference is ""remembered""?

As for the options, there is already an (early) design for this, which may be in PatternLab already:
https://projects.invisionapp.com/d/main#/console/1083571/88423399/preview

h1. Acceptance criteria 
This ticket is accepted when there is a design proposal (in PatternLab) for the grid display with the considerations above kept in mind.

Please make sure we involve [~andyjmaclean] [~panagiotiskyrou639031] and [~cr.marcelino] in this ticket along the way.
Next iteration should be to move this into the Collections site and work on the Ruby backend to facilitate the two options."
"Reimplementing http://www.europeana.eu/portal/europeana-providers.html and thus allowing users (mainly our data partners) to find content by provider and data provider in Europeana.

* Put it as an option called Sources in the Browse top menu.
* Populating this page is heavy on the Solrs so it needs to be cached. Updated 1/24h.
* Don't put much effort into styling, Carlos and Andy can polish it up once we have the basic display of it.

Note:
There are lot of ways we could add usefuls ways of grouping/sorting this page. And add more data per provider. E.g. grouping data providers per country rather than aggregator, filtering on Can I reuse it, etc. But let's leave that to follow up stories.
"
"Sematext has identified that the way we currently include the relevancy score in our API search responses is wasteful and consumes more memory, CPU and network traffic than what is needed. In order to recude unnecessary load on our SolrCloud they recommend we remove it before we go live with SolrCloud. See this document from Yorgos for more details on the issue: https://docs.google.com/document/d/1sO-HLocTXZ2zGDHjanPCjcoLhuKPpwizzP2qt6Op6ag/edit
"
"
*Issues to tackle:*
* Type/Subject doesn't always appear when it should. *DISREGARD* 

* Some character display issues, see e.g. http://test.npc.eanadev.org/portal/channels/music?q=georges+bizet+carmen and in item display http://test.npc.eanadev.org/portal/record/2048401/item_ZPQNVOKXGZPU2AZ3VEC4ZUKN4VGHSKVI.html *FIXED*

* Doubled creator names (once from dc:creator, once from Agent prefLabel?). For example http://europeana-npc-test.de.a9sapp.eu/portal/search?f%5BDATA_PROVIDER%5D%5B%5D=Institutul+Na%C8%9Bional+al+Patrimoniului&q=Gustave+Courbet in search result list display. Once with first name last name, once with last name first name *ISSUE REMAINS*

* If there's no thumbnail show no thumbnail, not even the default. *STILL OCCURS FOR SOME ITEMS, FOR SOME NOT*

* Clicking through to the provider's site must open in a new window/tab. *FIXED.*
"
"Facet changes:
* Show 5 facet values by default, not 4. Reason being we then show all media type facet values.


Move filters:
* Move the ""Only items with media"" filter up to under Media as the first option there
* Remove the UGC filter entirely (making it so that UGC is always shown) and then also the Advanced filters choice itself

"
"For clicks on isshownat:
* In the search results list
* And in the item display. BOTH when the user clicks under Find out more and when they click a thumbnail.

This is Event Category = Redirect. Give them distinct labels: CTR List, CTR Findoutmore, CTR Thumbnail.

and isshownby and hasview:
* When the user clicks to access/enlarge/read/play a digital object. This is the equivalent of the current Event Category = Lightbox. This category should be renamed to Category = Media view
* When the user clicks the download link in the fold down. Give this a specific Event Category and Label = Media Download


"
"Perform a tools based accessibility review.  Use tools listed here http://deanbirkett.name/articles/my-accessibility-toolkit/

Check especially:
Colour contrast/Legibility
Tab order

Goal is WCAG AA compliance.
"
"We need to make it impossible to paginate beyond hit 1000. This change is to reduce load on SolrCloud and allow us to go live with it. The free pagination we allow now is the main cause of it crashing.

More detail in Detailed background in https://docs.google.com/document/d/1il2oL6DP_QWcAE0WfDOCLOeFG5kJEVnKm8zQbJu-7tM/edit


*Acceptance criteria:*
Must not break current API-implementations including our own new portal
Upper limit must be in a config file so that it can be easily changed in the future
Hitting the limit must come with a nice error specific error message"
"To be added in the search and the search API. This is to support for example full harvests a la ProQuest and Embedr.  

Detailed background in https://docs.google.com/document/d/1il2oL6DP_QWcAE0WfDOCLOeFG5kJEVnKm8zQbJu-7tM/edit

Acceptance criteria:
We must be able to support large harvest cases like ProQuestr and Embedr if they change their clients to use cursorMark
We must update our Labs documentation adding cursorMark as a specific type of pagination parameter

Note: 
Clients will have to change their implementations to take advantage of the deep paging.

"
UPDATE: Allow download of everything, no matter what the edm:rights value is.
Implement SVG default images as agreed in EC-10233.
"A consequence of parent bug (change request) EC-10277 is that the ""provider"" request parameter is either no more used (provider being identified based on apiKey) or .. it might be provided by user and be inconsistent with the provider attached to apiKey.

We need to decide which solution we support 1st or 2nd?!
In each case an update of the sourcecode is required."
"The search results here, when opened, are not found:

http://europeana-npc-test.de.a9sapp.eu/portal/search?q=provider_aggregation_edm_hasView%3A*&f[TYPE][]=TEXT"
"The value of the context attribute is hardcoded to ""@context"": ""http://www.w3.org/ns/oa"", as in specification document.
However the context, is not used at all ... and the compliance is not ensured. 

A new definition of the context is available by W3C, still this is much more complex and only partially supported.
http://www.w3.org/ns/anno.jsonld

It seems also that the annotatedBy/serializedBy, annotatedAt, serializedAt were changed in the latest versions of the draft standard:
{
  ""@id"": ""http://example.org/anno2"",
  ""@type"": ""Annotation"",
  ""creator"": ""http://example.org/user1"",
  ""created"": ""2015-01-28T12:00:00Z"",
  ""generator"": ""http://example.org/client1"",
  ""generated"": ""2015-02-04T12:00:00Z"",
  ""body"": {""@id"": ""http://example.net/review1""},
  ""target"": ""http://example.com/restaurant1""
}"
"NOTE: This is a ticket that affects the CURRENT production Portal. For the sake of having an overview I have put it into this sprint.
This ticket requires work from [~andyjmaclean] and input & work from @yorgos.mamakis (eg instructions + help in building the portal..). Final deployment requires work from @jaclu.

This ticket removes or changes features as covered in EC-10319 and EC-10320. Three things have to be done:

h1. Change 1: Remove option to go to the last page
Remove the "">>"" from the navigation on the search results page, it shouldn't be allowed for users to go to the last page anymore, just the first, next & previous ones.

h1. Change 2: Change page number from input field into literal
Currently, the portal search result page has a navigation which looks like ""<<  	  <  	2 of 1863582 Submit  >  	  >>"" whereas the ""2"" is an input field.
This needs to be removed, and changed into a literal. So <input value=""2""> becomes just the page number, in this case just the number 2.

h1. Change 3: Ensure user-friendly error message pops up in case of deep navigation
In case a user browsers beyond 1000 items, Solr/Corelib will throw an error message. This needs to be catched in a friendly way and rendered like that in the portal (just so that it doesn't show up as a 500 error or something, it should be something inline). Please align with @yorgos.mamakis as to how this message comes in.

*Suggested error message*: ""Sorry! It is not possible to paginate beyond the first 1000 search results. We've set this limit in order to preserve the stability of our service.""

h1. Change 4: Search widget
The search widget must be changed in the same way as above (1-3) as it also allows for ""free"" pagination.

[~DavidHaskiya] Please review this ticket and see if this is OK, @yorgos.mamakis same for you, do we cover everything with this?"
...and remind them that if they block access to them we can't create thumbnails and others, like Europeana API-users, can't use them.
"As described in EC-10347, the Ruby/Rails Mustache implementation does not allow for fragment caching of rendered HTML, which in a high-traffic site with complex display logic will result in unsustainable computational load on the platform, and hence unacceptable performance.

Also, the Mustache/Rails implementation (i.e. stache gem) is now unmaintained, with pull requests submitted by us never acknowledged.

An alternative needs to be designed so that we can continue to use the Patternlab/Mustache template styleguide for front-end design, but not sacrifice the ability to use Rails' fragment caching.

Desired outcome: A draft specification and estimate of implementation."
"The createAnnotation functions should be adjusted to take indexing into account:

* When a new annotation is inserted, a new Solr document should have to be created for the annotation, following the requirements as defined in EC-10354 & EC-10353.
* The 'indexOnCreate' parameter for the creation of annotations can be deprecated or removed.

For now, no updates or removals are needed when it comes to indexing, this will come at a later stage and is not needed for this very first iteration."
"Basic protection against code injection. And any other *basic* measures leaving us confident to go live with the new portal from a security perspective.

*To consider:*
Get a Hakiri Medium account for non-profits, https://hakiri.io/pricing
"
"The display is a mess on the Samsung S4.

Chrome version 46.0.2490.76
Android version 5.0.1
Model: GT-I9515 value edition
Screen Resolution 1,920 x 1,080 pixels
"
"1 - combining facets gives empty result
2 - layout untidy when labels run onto 2nd line
3 - can break layout by opening facet (provider / data-provider) - see attachment
4 - data normalisation needed for locale keys (we can't use mime_types - with values like ""application/pdf"" - as keys) - see attachment 2."
"As a result of our implementing action caching (see EC-10347) it has been necessary to remove from the item display pages the breadcrumb links back to search and next/previous.

If feasible, these should be restored using JS."
"The current analysis chain for the 'text' field-type in our schema.xml file could be improved in several ways.

# Stopword treatment: right now, the stopwords.txt file is entirely empty. It is possible to query Solr for common English stopwords ('the', 'of') and retrieve a result.
(nb: it is probably not desirable to strip stopwords entirely. In order to preserve phrase-querying capacity, a CommonGram approach should probably be used)
#  The configuration of the WordDelimiterFilterFactory is different in the query and analysis chains. This creates side-effects that are unexpected and probably undesirable. The current configuration is apparently intended to support queries by ID against contextual classes. A new approach to this (probably circumventing the text-analysis chain entirely for such queries) should be taken.
# The stemmer (SnowballPorter) is hyperactive - for example truncating 'Johannes' to 'Johann' and 'Anders' to 'Ander'. Investigate whether we need another stemmer, or whether an improved protwords.txt file will do the trick.
# The synonyms.txt analyzer is present, but the synonyms.txt file holds only stub data. 
# Multilingual support could be improved. In an ideal world we could use different analysis chains for different languages. Failing that, we can at least provide multilingual stopwords, and perhaps exploit the synonyms.txt field for multilingual support. The desirability of implementing the ICUNormaliser2Factory should be assessed

Note that implementation of schema changes will involve a full reindex of all content.
"
"We need to define the scope of the first release (""the july one"" or the ""january 2016) and to create a proper release.
The artifacts will need to be placed in artifactory when the release is made. 
(eventually also prepare a ""production"" server for it) 

After creating the first release we will switch to the usage of branches.

@Remy please add the epics that need to be closed for creating the release.
"
"As with the stats dashboard (EC-10266), the new portal should use the A9s developer version of the PostgreSQL service.

Once they have provisioned one of these for the stats dashboard, ask them to do the same for the new portal, in the production space, named ""portal-beta-pgsql""."
"From now on what we have used to call the Europeana portal is now Europeana Collections, what we used to call Channels are a now Europeana thematic collections e.g. Europeana Music Collections and Europeana Art History Collections.

Resulting changes:
* Change the top menu Channels to Collections with the two drop down values Music Collections and Art History Collections
* Change the page title of Europeana channels to instead of following Europeana Music Channel, Europeana Art History Channel they be called Europeana Music Collections and Europeana Art History Collections
* Change to /portal/collections in the URL pattern
* Change CMS Channel model to Collection
* Rename Localeapp keys
* Update templates
* Rename the Git repo
* For [~andyjmaclean] and [~cr.marcelino] check if nav breaks and fix.


*TO DISCUSS CONSEQUENCES OF:*

* Change the URL pattern from /portal/channels/ to /collections/ and /collections/art-history  and /collections/music

NOTE: This would change the canonical URLs and lots of other URLs users may have saved or shared. So we'd HAVE to very carefully set up redirects."
"Static pages are to be made editable in the Portal CMS and available on the site.  

*Notes:*
* Take help from end-user services and corp comms in writing. 
* These pages must be in place when we go beta launch which means that prep (esp. of CMS changes) need to start in Sprint 17.
* This is an Epic, create more specific Stories as children.
* There are keys in LocaleApp that were added when we edited e.g. the About pages and Landing page blurb from there. These are now in the CMS. SO the keys should be removed. They're redundant.

*General rule:* 
KISS! Let's keep it very basic and succinct. Copy over what is in current portal unless truly atrocious. Because the deadline is tight and the user gets easily bored with chunks of text.

*Pages concerned:*
* About (already exists /portal/about.html). Must be very short and point to Pro for more in-depth info about Europeana as an organisation. 
* Contact (equivalent of http://www.europeana.eu/portal/contact.html).  Skip the form for the MVP, can be added later..
* Help. This should be a one pager with internal navigation. Copy text and pages from the existing Help pages on the current portal. Modify as needed. Skip the Search Widget page entirely.
* Terms & Policies. (equivalent of http://www.europeana.eu/portal/rights/terms-and-policies.html ) Make it into a one-pager with internal nav. Copy all texts as are, make no modifications. Make no translations, English only. Preserve all URLs or ensure there are redirects. 

*Navigation:*
Static pages are intended to be accessed from the fat footer of the site under a More info header and listed in 2-3 columns. Compare w. Pro.

*Page design:*
Static page with internal navigation, http://develop.styleguide.eanadev.org/?p=templates-Search-static-page
Static page with no navigation, http://develop.styleguide.eanadev.org/?p=templates-Search-static-page-no-nav 

BUT I NOTE THE ONE THAT IS SUPPOSED TO HAVE NO NAV HAS. PLS [~cr.marcelino] fix that."
"The top level navigation texts, if too long, can break page layout (the tab for pulling down the global navigation component drops a couple of inches instead of remaining stuck to the top of the page).

One consequence of renaming ""Channels"" to ""Collections"" is that the layout-breaking threshold is easily reached. 

On the right hand side of the page the settings menu switches from [icon + label ""settings""] to just [icon] at a certain breakpoint.

Following a conversation with [~cr.marcelino] we think that the same should happen on the left, the logo image changing from one that says [*e* - europeana collections] to just [*e*] once the viewport width drops below a certain threshold.

This may not fix the issue of the layout breaking for all languages but it's a good start to mitigating the problem."
"The German language is now finished in LocalApp. 
Would like that added to the test environment so we can test if everything is there. "
"Most of the results from this search:

[http://europeana-npc-test.de.a9sapp.eu/portal/search?f[DATA_PROVIDER][]=Glasgow+School+of+Art&f[MEDIA][]=true&q=Glasgow|http://]

are to records with images that appear with the playability indicator (+)

If you try to open them, however, the front end decides they're too small for the photoswipe gallery, doesn't open them and removes their playability.

TODO: the back end should mark image media as playable only if the CRF metadata shows them to be wider than the minimal playable threshold."
"If you open one of these and close it again the poster is huge:

http://europeana-npc-test.de.a9sapp.eu/portal/record/09102/_CM_0160497.html

It should be shown, once the viewer is closed, with max400px width (even if that is just a resize via HTML).


Also, for this item: http://europeana-npc.de.a9sapp.eu/portal/record/2023601/oai_eu_dismarc_GHT_001_P10413A20001.html the edm:object is just hotlinked in. That cannot be done. "
"Facet values for what used to be called ""Language of Description"" can be many different languages.  Because this is data it is not translated into the user's selected locale.

TODO: think about how to normalise this data.

One approach would be to make translations where the key is the non-English value returned in the search facets, i.e.

 * i18n.facet.language.╨ú╨║╤Ç╨░╤ù╨╜╤ü╤î╨║╨░ = Yiddish(?) Ukrainian(?)
"
"I'm attempting to 'crowdsource' multilingual queries by asking Europeana staff and other people connected to Europeana for queries in languages not  yet represented in our test corpus.

The result is a webform, which can be found here: http://144.76.218.178/volgus/

This needs a second pair of eyes on it to assess:

* whether or not it's working
* whether the instuructions are clear
* if the interaction design is clear

Basically: could someone who was sent this link easily complete the task without too much thought? "
As defined in EC-10359.
"This is a child ticket to EC-10407 which contains more level of detail and some references.

This ticket is accepted when there is a design for the scenario where a user would add a genre to an item which doesn't have one yet, through semantic tagging.

Also, a proposal for business logic for more complex annotation scenarioΓÇÖs (enrichment, moderation, flagging, display, etc.) will need to have a first draft (esp. the moderation part)."
"Check what the issue is with the extraction of metadata from the edm:isshownbys of http://europeana-npc-test.de.a9sapp.eu/portal/search?q=europeana_collectionName%3A+%222048005_Ag_EU_AthenaPlus_SwedenNationalMuseum%22

It seems that about in a half of the cases this has failed (filter on Only show items with media links). Can it be rerun? It's an important set for the art history theme.

Example item:
http://europeana-npc-test.de.a9sapp.eu/portal/record/2048005/Athena_Plus_ProvidedCHO_Nationalmuseum__Sweden_23921.html?debug=json
"
"For the Music and Art History collections. Try to leverage the CRF-filters.

Music, see https://europeanadev.assembla.com/spaces/europeana-npc/wiki/Channel_filters
Art History, see https://europeanadev.assembla.com/spaces/europeana-npc/wiki/Channel_filters"
"The current production styleguide resources (js, css, images) cannot just be overwritten when we go live with the new styleguide.

They need to be saved (under the ""frozen version"" 0.1) and remain available for the externally developed styleguide-using sites.

Once this is done the frozen version url should become the root styleguide url for Labs, Pro, etc."
"These ones: http://europeana-npc-test.de.a9sapp.eu/portal/search?f%5BDATA_PROVIDER%5D%5B%5D=Rijksdienst+voor+het+Cultureel+Erfgoed&f%5BMEDIA%5D%5B%5D=true&f%5BTYPE%5D%5B%5D=IMAGE&q=tapestry

Looks like a HTTP500 and note that api record calls for these items work, eg http://delta-web.de.a9sapp.eu/api/v2/record/2020704/DR_20363041.json?wskey=api2demo
"
"Purpose of the spike is to investigate the feasibility (and ideally effort) of supporting in our audio/video player (video.js) streaming audio. If video.js does not support it we investigate other options. 

*Notes:*
Desktop research suffices, prototyping is a nice to have.  
The solution must not be dependent on Flash or any other browser plugin but must be HTML5/JS only.

See thread on Sounds WP4 Basecamp where the suggestion from Vassilis and Themis is that we store media, https://basecamp.com/1936492/projects/4984678/messages/51490442 

*Protocols:*
RMTP
Others?

*Examples (to prototype with?)*
[http://europeana.eu/portal/search?q=provider_aggregation_edm_isShownBy%3A*.asf*|http://europeana.eu/portal/search?q=provider_aggregation_edm_isShownBy%3A*.asf*]"
To improve precision and relevancy ranking [~timothy.d.hill982002] is creating a new Solr config with boosted fields. This new config can be applied without the need for a re-index and is intended to be put in place and ready for the December 14 launch of Europeana Collections Beta.
"The Provenance url - and the find out more link to provider for MelkMeisje contains THREE redirects:

http://delta-web.de.a9sapp.eu/api/24659/redirect?shownAt=http%3A%2F%2Fdelta-web.de.a9sapp.eu%2Fapi%2F24659%2Fredirect%3FshownAt%3Dhttp%253A%252F%252Fdelta-web.de.a9sapp.eu%252Fapi%252F24659%252Fredirect%253FshownAt%253Dhttp%25253A%25252F%25252Fwww.rijksmuseum.nl%25252Fcollectie%25252FSK-A-2344%25253Fbt%25253Deuropeanaapi%2526provider%253DRijksmuseum%2526id%253Dhttp%25253A%25252F%25252Fwww.europeana.eu%25252Fresolve%25252Frecord%25252F90402%25252FSK_A_2344%2526profile%253Dfull%2526bt%253Deuropeanaapi%26provider%3DRijksmuseum%26id%3Dhttp%253A%252F%252Fwww.europeana.eu%252Fresolve%252Frecord%252F90402%252FSK_A_2344%26profile%3Dfull%26bt%3Deuropeanaapi&provider=Rijksmuseum&id=http%3A%2F%2Fwww.europeana.eu%2Fresolve%2Frecord%2F90402%2FSK_A_2344&profile=full

(see that record here: http://europeana-npc-test.de.a9sapp.eu/portal/record/90402/SK_A_2344.html)



On the old portal meanwhile, the ""view item at"" link is simply this:

http://www.europeana.eu/portal/redirect.html?shownAt=http%3A%2F%2Fwww.rijksmuseum.nl%2Fcollectie%2FSK-A-2344&provider=Rijksmuseum&id=/90402/SK_A_2344

(see that record in the old portal here: http://www.europeana.eu/portal/record/90402/SK_A_2344.html)


This happens at API level (THREE redirects in the edmIsShownAt):

""edmIsShownAt"": ""http://delta-web.de.a9sapp.eu/api/24659/redirect?shownAt=http%3A%2F%2Fdelta-web.de.a9sapp.eu%2Fapi%2F24659%2Fredirect%3FshownAt%3Dhttp%253A%252F%252Fdelta-web.de.a9sapp.eu%252Fapi%252F24659%252Fredirect%253FshownAt%253Dhttp%25253A%25252F%25252Fwww.rijksmuseum.nl%25252Fcollectie%25252FSK-A-2344%25253Fbt%25253Deuropeanaapi%2526provider%253DRijksmuseum%2526id%253Dhttp%25253A%25252F%25252Fwww.europeana.eu%25252Fresolve%25252Frecord%25252F90402%25252FSK_A_2344%2526profile%253Dfull%2526bt%253Deuropeanaapi%26provider%3DRijksmuseum%26id%3Dhttp%253A%252F%252Fwww.europeana.eu%252Fresolve%252Frecord%252F90402%252FSK_A_2344%26profile%3Dfull%26bt%3Deuropeanaapi&provider=Rijksmuseum&id=http%3A%2F%2Fwww.europeana.eu%2Fresolve%2Frecord%2F90402%2FSK_A_2344&profile=full""

(see the api call here: http://delta-web.de.a9sapp.eu/api/v2/record/90402/SK_A_2344.json?wskey=api2demo)"
"See epic EC-10443 for more details.

The sitemap reading part which is currently part of the SitemapController in the Java Portal will need to move to corelib/API in order to become part of the API.

@yorgos.mamakis to provide further info. Note that in this ticket the specs should be written as the Collections app needs to call this API."
"See epic EC-10443 for more details. Needs EC-10444 to be completed, or at least specified, first.

The Collections app needs to catch requests to the sitemap(s) and return the response from the API.
(for reference, sitemap base URL is /portal/europeana-sitemap-index-hashed.xml, which contains all the individual files)"
"[~cr.marcelino] has updated the Swagger CSS to make it a bit more coherent with Europeana Labs.

This ticket is to update the stylesheet in the Swagger console with this new CSS file, so the Swagger console becomes ready for its first use.

The file can be found here:
https://bigfiles.assembla.com/spaces/europeana-npc/documents/download/cGKY88Meur5zdcacwqjQYw"
"I will use this first comment as the main point where I describe the Browser test and will add updates to this comment.
Feel free to add suggestions and comments to this ticket as they can help me to do a better job.

Browsers to test:
Google Chrome (latest)
Firefox (latest)
Internet explorer 10, 11
Safari (latest)

I don't know if it will make much difference if I test these browsers on a Windows machine and not on a Mac or Linux.
Since I only have Windows available to myself I start there.

Android (stockbrowser) (both phone and tablet)
IPad (stockbrowser)
IPhone (stockbrowser)

URL to use:
http://europeana-npc-test.de.a9sapp.eu/portal/
"
"

Incude copyright icon
Information showing mutliple media
Actions like enlarge/play image/media
"
"[~andyjmaclean]
Hi Andy, can you have a look at this Object?

I select ""Only Items With Links To Media"" in the facets.
The thumbnail shows a generic text icon
I open the the Object:
http://europeana-npc-test.de.a9sapp.eu/portal/record/08603/efg_censorshipcards_00041_FAA_CEN_191031_P1_pdf.html
When I try to open the PDF, I get an error message:
""An error occurred while loading the PDF.""

So the questions arises:
Should this Object be in the search results?
It has edmIsShownBy: http://www.filmarchiv.at/efg/censorshipcards/00041_FAA_CEN_191031_P1.pdf
But has no isShownAt
The edmIsShownBy shows an (invalid) link to media."
"In http://acceptance.npc.eanadev.org/portal/ and http://test.npc.eanadev.org/portal the footer still says ""copyright"". 
This should be ""Terms of use & Policies"" corresponding with https://www.localeapp.com/projects/7952/translations?utf8=%E2%9C%93&in_locale=23972&search=Terms in LocaleApp. 
"
"Do a search for ""*:*""
In the facet media select 3D. It says 1295 objects for pdf.
After the sub facet opens, I select pdf.
Next I see no results, but the message:
*No Results
Your search for┬á*:*┬áreturned no results*
It looks like selecting pdf as type will never return search results.
"
"To allow users to retrieve all facets, without the Collections site loading all of them in at once (backend + rendering) we should only load in the first facets right away and the rest via Ajax.
To implement as what is proposed in EC-10479.

Depending on the load time we might need some way to show to a user that the facets are loading.
Alternatively, we could still load in almost all facets instantly (and show/hide with Javascript) but only load in the data provider one via Ajax as that's the only true long list.

Part of this ticket involves a bit of spiking to the best possible solution, continuing what's done in EC-10479.

Note to self: work for both front- and backend."
"I selected Dutch as the site Language.
Next I search for *:*
I open the language Facet to show all possible languages.
For 2 languages only the number of Objects are shown, but not the Language itself."
"I found a weird bug in http://beta.europeana.eu/portal/help.html 

The source for all other languages seems to be different from the English source for the text. 
They are both pulling from the CMS, the English text can be found here: ""Searching Europeana"" http://blue-portal-beta.de.a9sapp.eu/portal/cms/page/10/edit 
But the other languages are pulling in from: ""Can't find what you are looking for"" http://blue-portal-beta.de.a9sapp.eu/portal/cms/page/11/edit 

It also seems to be the case that it is pulling in a part from the news letter sign up page. 

To recreate the bug go to: http://beta.europeana.eu/portal/help.html 
Switch to Dutch and save. Then go to ""zoek tips"" in the footer. 

[~richard.doe] I was wondering if you could fix this in such a way that they are both pulling in from ""Searching Europeana""? "
"CMS has only 18 languages available. 
Would be awesome to have the remaining languages in there as well. 

So far: DA, ET and LV can be added to the CMS
"
"See http://europeana-npc-test.de.a9sapp.eu/portal/help.html where e.g. the fopter doesn't load at all.

[~Michelle.vanduijn] Please liaise with Andy to ensure that this page has its correct and intended editorial content."
"Latest results of [PageSpeed Insights|https://developers.google.com/speed/pagespeed/insights/]:
!Screen Shot 2017-08-03 at 17.01.28.png!
!Screen Shot 2017-08-03 at 17.01.34.png!"
"To make the API & Collections support unordered children (again). 

* Re-introduce the changes for hierarchies in the Alpha API which were rolled back earlier, to support unordered children, the new Neo4j cluster & various other fixes.
* Try to work out the issues we've had with this such as the performance, the incorrect counts & the multiple hierarchies, see: EC-10440.
* Do a new regression test and identify all changes needed to fully support hierarchies again in frontend & backend. "
"On the nexus 7 2013 (Android 6.0.1, Chrome 47.0.2526.83) the menu shows partly open overlapping a part of the page incl the menu button itself.

This tablet has a res of 1200x1920 with 323 DPI and is naturally mostly used in portrait mode similar to a phone.
In landscape mode, the menu is shown at the top of the screen and works fine."
"The browse sections ""New Content"" http://beta.europeana.eu/portal/browse/newcontent , ""Colours"" http://beta.europeana.eu/portal/browse/colours  and ""Sources"" http://beta.europeana.eu/portal/browse/sources all have a missing translation source: 

<span class=""translation_missing"" title=""translation missing: en.site.browse.newcontent.description"">Description</span>
<span class=""translation_missing"" title=""translation missing: en.site.browse.colours.description"">Description</span>
<span class=""translation_missing"" title=""translation missing: en.site.browse.sources.description"">Description</span>

I have added these to localeapp with the keys: 


site.browse.colours.description
site.browse.sources.description
site.browse.colours.description

(See https://www.localeapp.com/projects/7916/translations/5064941?in_locale=23833) 

But they are not being picked up. 

[~richard.doe] I marked this as low priority because I know that you are very busy and it is being extremely nitpicky of me :) 
But it would be fabulous if you could pick this up when you have the time! "
"Search input width appears to be constrained so content that exceeds that width disappears or gets cutted.
"
"If an object has no edmIsShownAt link to the providers website, the search result page still shows a link but since there is none it just links to its own page.

Example: http://www.europeana.eu/portal/search?q=europeana_collectionName%3A2020903%2A
If you look at the search json: http://www.europeana.eu/portal/search.json?q=europeana_collectionName%3A2020903%2A
You can see there is no edmIsShownAt for these objects.

h1. Acceptance criteria 
This ticket is accepted when there is no link to the data provider in the search result page, if there is no edmIsShownAt available for a record.

[~richard.doe] [~andyjmaclean] Not sure on which level this needs solving, let me know if I assigned it to the wrong person."
"Existing search widget implementations currently return a Javascript error, despite the redirect to styleguide being in place correctly.

Example code:
<script type=""text/javascript"" src=""http://www.europeana.eu/portal/themes/default/js/eu/europeana/min/EuSearchWidget.min.js?sw=true&query=palm&qf=DATA_PROVIDER:{Royal+Botanic+Gardens%2C+Kew}&withResults=true&theme=dark&v=2""></script>

Error:
Uncaught TypeError: Cannot read property 'appendChild' of undefined

h1. Acceptance criteria 
This ticket is accepted when current search widget implementations worked as before."
"The MongoDb currently in use for the annotations test application (test-annotations.europeana.eu/annotations-web) will be deprecated in the near future.

This ticket is for @bramlohman and [~gsergiu79] to work together to migrate this. Bram will set-up all that's needed and Sergiu just has to repoint or slightly reconfigure the application."
"The filter for HD video now says: TRANSLATION MISSING: EN.GLOBAL.FACET.HEADER.VIDEO_HD

Cheers,
Joris"
"Kate Fernie had a couple of questions related to their collections. The thumbnail problems will probably be fixed once thumbnails creation is finished. Not sure about the language mark-up, maybe this is a real bug. I add her email below.
 
Best, Henning
 
From: Kate Fernie [mailto:kfernie27@gmail.com]
Sent: 17 December 2015 14:34
To: Henning Scholz
Subject: New portal
 
Dear Henning,

Congratulations on the launch of the new portal.  IΓÇÖve been browsing quickly taking a look at the Locloud and CARARE collections

I'm slightly confused by the language mark-up appearing around some of the titles.  This looks like a glitch.  See for example: http://www.europeana.eu/portal/search?f[DATA_PROVIDER][]=N%C3%A1rodn%C3%AD+pam%C3%A1tkov%C3%BD+%C3%BAstav&f[PROVIDER][]=CARARE 
 
Some thumbnails seem to have disappeared - :
 
I think this collection used to display thumbnails: http://www.europeana.eu/portal/search?f[DATA_PROVIDER][]=Riksantikvarie%C3%A4mbetet+|+Swedish+National+Heritage+Board&f[PROVIDER][]=CARARE
 
This one also: http://www.europeana.eu/portal/search?f[DATA_PROVIDER][]=National+Archive+Norway&f[PROVIDER][]=LoCloud 
 
Ditto: http://www.europeana.eu/portal/search?f[DATA_PROVIDER][]=Kulturstyrelsen&f[PROVIDER][]=LoCloud  This collection has images available behind the grey icon when you click on it in the record.
 
 
IΓÇÖm not sure if its a glitch, a technical reason why the thumbnails arenΓÇÖt appearing, or ?   Do you know?
 
 
This is a very superficial browse on my part, I havenΓÇÖt had time today to look properly at all the new features (IΓÇÖm sure there are many great new aspects)
 
With best regards,
 
Kate
 
"
"See {{http://www.europeana.eu/portal/search?f[DATA_PROVIDER][]=N%C3%A1rodn%C3%AD+pam%C3%A1tkov%C3%BD+%C3%BAstav&f[PROVIDER][]=CARARE}}

where it looks like to me that the language tagging of the title is correctly formatted, see:
{{http://www.europeana.eu/portal/search?f[DATA_PROVIDER][]=N%C3%A1rodn%C3%AD+pam%C3%A1tkov%C3%BD+%C3%BAstav&f[PROVIDER][]=CARARE}}"
"To reproduce: do a {{*:*}} search, select ""Poland"" as country and then Zachodniopomorska Biblioteka Cyfrowa ""Pomerania"" as Institution.

You will end up here:
http://www.europeana.eu/portal/search?f%5BCOUNTRY%5D%5B%5D=poland&f%5BDATA_PROVIDER%5D%5B%5D=Zachodniopomorska+Biblioteka+Cyfrowa+%22Pomerania%22&q=

Without any search results."
"See this record:
http://europeana.eu/portal/record/2058608/object_DP_16216783.html

This record has a ""dcCreator"", being ""Leo Swan"".
And a ""dcContributor"", being ""The National Museum of Ireland"" & ""Louise Kennedy"".

However, on the record page, ""Louise Kennedy"" is listed as ""dcCreator"". This shouldn't be. She should be listed just as dcContributor, and Leo Swan should be dcCreator.
Something gets mixed up here.

[~richard.doe] Assigning to you as Andy told me its the Ruby code that handles this logic."
"PDF that fails to load in the viewer

To repeat the issue, go to:
http://europeana.eu/portal/record/2059209/C1379X0043XX_0002.html

Click the text item icon to open up the PDF. You then get an error message:
PDF.js v1.1.311 (build: 7065c1b)
Message: Unexpected server response (0) while retrieving PDF ""http://proxy.europeana.eu/2059209/C1379X0043XX_0002?view=http%3A%2F%2Fsounds.bl.uk%2Frelated-content%2FTRANSCRIPTS%2F021T-C1379X0043XX-0000A0.pdf"".

The base URL to the PDF loads correctly when opened in the browser, http://sounds.bl.uk/related-content/TRANSCRIPTS/021T-C1379X0043XX-0000A0.pdf
"
We need a more elegant solution than the one implemented in EC-10482 for the reasons listed by Richard here https://europeanadev.assembla.com/spaces/europeana-npc/tickets/758/details?comment=879210213
"h1. Remove notepadjs / designer-made hacks
We have a couple of simplified ""main"" files that serve as examples of how requirejs can be configured for specific molecules in the styleguide with just a couple of lines of code.  These should be used as templates for designers who want to integrate js with their work, but don't want to have to get too deeply acquainted with requirejs.  The current scripts are not consistent with [AMD|https://en.wikipedia.org/wiki/Asynchronous_module_definition] and caused the failure of the global nav links that nearly slipped into our beta release.

h1. Componentise javascript utilites 
For simple scripts with no dependencies and no reuse cases it can be optimal to include them inline (in the mustache templates).  We currently do this in two places:

    * the newsletter form validation js
    * the js that bootstraps/rewires the pdf viewer markup in order to allow us to change the sidebar orientation

Elsewhere, however, js dependencies are loaded through requirejs.  These scripts should be

 * made into separate github projects, versions dynamically pulled in by a grunt / bower script
 * where the component requires (non-trivial) markup, organise into reusable molecules

This would apply to:

# the carousel
# expanding / collapsing (semantic) component
# toggle show / hide / change component (attribution snippet)
# the search form?
# the map?
# data loading infrastructure components
# custom Europeana js utils (resize, event throttle, scrollTrigger) 

* TODO: list them all?"
"So we can:
 * manage versions of js components (see EC-10564)"
"So we can:
 * run jsunit/jasmine tests as part of our CI procedure
 * zip / unzip our ""frozen versions"" - effectively removing derived files from the code base"
"Invalid searches currently throw a 500 exception:
http://www.europeana.eu/portal/search?q=%22elena+ferrante%22%5D
http://europeana.eu/portal/search?q=has_media%3A%3Atrue

We should ensure that when there is an invalid query (malformed query error by the API), that we throw an appropriate message in the style of an error page.

Suggested text: 
Your search query is not valid, please try again or have a look at our [search help page|http://www.europeana.eu/portal/help/search.html]."
"Running

{code:java}$compass compile source{code}

gives the warning:

DEPRECATION WARNING on line 69 of /var/www/html/Europeana-Patternlab/source/sass/scss/grid/susy/output/support/_support.scss: #{} interpolation near operators will be simplified
in a future version of Sass. To preserve the current behavior, use quotes:

  unquote(""#{$_type}-exists"")
"
"Andy notified me of an error he got while working on the search widget. 
If the thumbnail-by-url.json is called without supplying the required uri parameter _(why isn't that simply called *url* btw?)_ an ""No API key provided"" error is thrown, despite that no API key is required there, e.g.:

http://www.europeana.eu/api/v2/thumbnail-by-url.json?wskey=api2demo&profile=facets,params&v=2&query=palm&callback=searchWidget.showRes&rows=6&start=1&qf=DATA_PROVIDER:%22Royal+Botanic+Gardens,+Kew%22&_=1452085829731%22 (this request is nonsensical anyhow, but it illustrates the point)

This is an unwanted result from overriding the default Spring error handling with *ExceptionControllerAdvice* for required parameters, in case to set another HTTP status than Spring does by default: it will trigger for any required parameter.

Solution: in the handling of the error, add a test to find out what parameter it is about and pass that to the output. 
"
"This ticket is a SPIKE ticket to do the technical research and implementation effort estimate of developing a ""music radio"" feature. The radio feature would allow a user to listen to a continual random (""shuffle"") stream of music from the Europeana Music Collections. Possibly, there could be two ""channels"", one for Classical Music and one for Traditional and Folk Music as these are our two major genres.

Using CRF filters we are  able to select only records that A. Have a direct link to a playable music recording and  B. are  longer than a 30s sample.  The shuffle/random feature would be to choose randomly within these and using a what:""classical music"" or what:""folk music"" parameter to shift between the two possible channels.

The radio would be on its own page and use the same video.js based player we use for the item pages. Possibly customised to show also some basic metadata (title, creator, data provider, rights/license and download/share buttons). 

Similar solutions:
Musopen's radio feature, https://musopen.org/radio/ is where I ""borrowed"" this idea from.

Acceptance criteria:
A technical design (ruby + frontend) and estimate of implementation. The estimate can of course have a margin of error but needs to be along the lines of planning poker values: 1, 2, 3, 5,8, 13, 21 development days.

"
"This is a recommendation that applies to all our pages.

The advice is to walk the line between deferring CSS loading and not getting a Flash of Unstyled Content ""above the fold"".   The advice given here is to:

# use inline styling where possible
# split up css resources between those that style the top of the page and the rest

Both of these advices seem to go against our styleguide approach of serving one monolithic, cacheable css resource.

The scripts mentioned are:

* http://fonts.googleapis.com/ΓÇªalic,400,700&subset=latin,greek,cyrillic
* http://styleguide.europeana.eu/v/0.2/css/search/screen.css


The font resource can be loaded asynchronously - that part is straightforward.  For the other we may want to check out a javascript approach developed by Google's own pagespeed team, referenced here:

http://www.giftofspeed.com/defer-loading-css/"
"Recommendation (from PageSpeed Insights): ""Setting an expiry date or a maximum age in the HTTP headers for static resources instructs the browser to load previously downloaded resources from local disk rather than over the network.""

This pertains to styleguide assets hosted on S3, none of which have an expiration specified. These have ETag headers already, but no Cache-Control header.

As styleguide assets are versioned on production, they will never change, and can therefore have a very high value set for max-age in Cache-Control, e.g. Cache-Control: public, max-age=31536000 (1 year)

We should also consider the use of [Cache-Control: immutable|https://hacks.mozilla.org/2017/01/using-immutable-caching-to-speed-up-the-web/] (see #1994)

Reference:
* https://developers.google.com/speed/docs/insights/LeverageBrowserCaching
* https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control

The URLs specified as needing an expiration setting can be found by running the pagespeed insights tool.

This is what was returned as of 4/8/17:
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/images/eu_flag_cef.svg (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇª95/images/europeana-logo-collections.png (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇª95/images/europeana-logo-collections.svg (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/eu/channels.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇª.2.95/js/modules/eu/cookie-disclaimer.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇª95/js/modules/eu/feedback/eu-feedback.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇª.2.95/js/modules/eu/feedback/spinner.gif (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇªv0.2.95/js/modules/eu/feedback/style.css (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/eu/global.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/eu/search-form.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/eu/search-home.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇªmodules/eu/tooltip/eu-clicktip-style.css (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇª.95/js/modules/eu/tooltip/eu-clicktip.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/eu/util/resize.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇª.2.95/js/modules/eu/util/scrollEvents.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇª2.95/js/modules/global/feature-detect.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/global/menus.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇªmodules/lib/blacklight/blacklight_all.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/lib/hotjar.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇªjs/modules/lib/jquery/jquery.dropdown.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/lib/jquery/jquery.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/lib/purl/purl.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇªules/lib/smartmenus/jquery.smartmenus.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇªs/keyboard/jquery.smartmenus.keyboard.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/ΓÇªdules/main/templates/main-collections.js (expiration not specified)
https://europeana-styleguide-production.s3.amazonaws.com/v0.2.95/js/modules/require.js (expiration not specified)
http://static.hotjar.com/c/hotjar-54631.js?sv=5 (60 seconds)
https://www.google-analytics.com/ΓÇªid=GTM-K7MPPLG&cid=1358072842.1501843037 (15 minutes)
http://connect.facebook.net/en_US/fbevents.js (20 minutes)
http://www.google-analytics.com/analytics.js (2 hours)"
"The ""more news' link on the homepage is broken, and leads to http://blog.europeana.eu/feed/ (should lead to just blog.europeana.eu)
Also the same links for the Art History & Music Channel are broken, they link to http://blog.europeana.eu/tag/#music where it should be ""/tag/music"" for the request URI part of the URL. 
Same for art history, where its #art-history and not just art-history/.
"
"Main pages of Europeana Thematic Collections - links to see more blog posts include unnecessary hash sign.

EUROPEANA MUSIC NEWS -> More
Wrong link: http://blog.europeana.eu/tag/#music
Should be: http://blog.europeana.eu/tag/music

The same problem in Art History.
EUROPEANA ART HISTORY NEWS -> More
Wrong link: http://blog.europeana.eu/tag/#art-history
Should be : http://blog.europeana.eu/tag/art-history

Best,
Maggy





Maggy Szynkielewska
Content Sourcing & Marketing Assistant

 
T:
M: 
E: Maggy.Szynkielewska@Europeana.eu
Skype:
 
Be part of Europe's online cultural movement - join the Europeana Network Association:http://bit.ly/NetworkAssociation
 #AllezCulture!

Disclaimer: This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the system manager. If you are not the named addressee you should not disseminate, distribute or copy this email. Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.

"
"Provide support for objects where the edmIsShownBy is a SoundCloud URN (see http://www.europeana.eu/portal/record/2021613/tracks_48062279.html) and therefore cannot be dealt with in EC-10584.

*Pattern*
urn:soundcloud:id example: urn:soundcloud:48062279 which is in the edm:isshownby of 

This solution is premised on the fact that all these platforms have only one parameter we need to set in order to embed their player. For SoundCloud the embed pattern would be:

<iframe width=""100%"" height=""166"" scrolling=""no"" frameborder=""no"" src=""https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/48062279&amp;color=1a8ac7&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false""></iframe> where the track number is the number in the URN.

This URN based solution was used in the old portal for these datasets:
9200251_Ag_EU_TEL_a1200a_British_Library
2059210_Ag_EU_eSOUNDS_1014_NISV
2021613_Ag_NL_DigitaleCollectie_GeluidvanNL

*Acceptance criteria*
* Objects where there is a URN in the edmIsShownBy and a full URL in the hasView should show the embedded code as the SoundCloud oembed provides instead of the thumbnail (example: http://www.europeana.eu/portal/record/2021613/tracks_48062279.html), there should just be one player. If a SoundCloud URL is present, this one needs to be used.
* Objects where there is just a URN and no other SoundCloud URL need to use the URN to create the player (example: http://www.europeana.eu/portal/record/9200251/BibliographicResource_3000055617801.html).
(Unfortunately we do not have any test objects where the edmIsShownBy is a SoundCloud URL).

More test objects:
http://europeana.eu/portal/search?q=provider_aggregation_edm_isShownBy:*soundcloud*

*Notes*
* The URN-based pattern was an experiment last year and will most likely be deprecated, however we still should support this as we have objects in our metadata adhering to this format.
* Note that some/most of these objects both have a full URL to the media in their webresources (which is not the case for all), and a URN. We just need to show one as they are the same. "
"We can embed their videos.

Example item that explains the pattern:
http://www.europeana.eu/portal/record/2031901/I_075705_INT_1.html

with dc:identifier = I-075705-INT-1 can use the following embed code:

<iframe src=""http://ec.europa.eu/avservices/play.cfm?ref=I075705&videolang=INT&devurl=http://ec.europa.eu/avservices/video/player/config.cfm"" id=""videoplayerI075705"" width=""670"" height=""378"" frameborder=""0"" scrolling=""no"" webkitAllowFullScreen=""true"" mozallowfullscreen=""true"" allowFullScreen=""true""></iframe>

where a slightly modified dc:identifier is present in the ref= and videplayer id and can thus work as our known paramater that allows us to embed their videos.

NOTE:
This is only for their videos. Their images do not have embeds.
"
"As a user I would like to be able to filter pages like new content, sources and colour to see only entries matching a specific theme. This will also open up for us to add links from thematic collections landing pages to overviews of new content and sources specific to the theme.


Suggestion:
Use the same layout as we do for sorting (http://styleguide.europeana.eu/?p=templates-ListPage-projects) and make a filtering variation of http://styleguide.europeana.eu/?p=molecules-sortby for the user to switch between the themes. Default is that All is shown. 

Available themes:
Available themes should always be the themes we have published (in the CMS) selections for. Currently Music and Art History but this must be dynamic, not static. 

Query Filter:
Is the same as the query for the thematic collections and should be picked up from the CMS.

URLs:
The chosen theme should be visible in the URL of the page. Perhaps simply as a &theme=[thematiccollectionslug] that uses the slug from the CMS.

Caching:
Update every 24h.





"
"Right now the ""blue banner"" we can define in the CMS is applied to all Collections pages. To be able to be more flexible we need to be able to make the banner specific to different pages. This will allow us for example to link to different surveys and polls from different landing pages. 

Blue banner needs to be made possible to make specific to:
- Collections landing page
- Thematic collections landing page (and which one), search & item pages for a Thematic collection and static pages specific to a theme

For each banner it must also be possible to turn off/on the Give us your input button.



"
"CNRS either provide no direct link at all to media or provides a .asx file (which is a container for an .asf file which can pretty much only be played by Windows Media Player). Instead we should embed their player using their custom iframe.
*
Example item from which pattern can be drawn:*
http://www.europeana.eu/portal/record/2059208/archives_items_9798_.html has dc:identifier = CNRSMH_I_1900_001_266 which is enough to build their corresponding player:


{code:java}<iframe width='361' height='215' frameborder='0' scrolling='no' marginheight='0' marginwidth='0' src='http://archives.crem-cnrs.fr/archives/items/CNRSMH_I_1900_001_266/player/346x130/'></iframe>
{code}


as that identifier is all that is needed in the src statement of their embed.

As this is custom I assume we will need to *whitelist their datasets* to know when to ""trigger"" the embed. Currently it is:
2059208_Ag_EU_eSOUNDS_1020_CNRS-CREM


This whitelist of datasets with custom embeddable players *must be in a config file that can be updated without making a portal redeploy necessary*."
"To allow users to browse into our content we have added Browse entry points to the thematic collections landing pages. However they are editorially added and when new ones are added the old ones are lost. We need to find ways to:

- Keep making editorially created browse entry points available even if not promoted on the landing page of a thematic collection
- Programmatically create Subject/Type and Agent indices

This will involve combinations of pages and content created in the portal CMS and programmatically. 

Note:
We may later add overview pages for other types of entities like Places, Time periods and Works but we begin with EDM Concepts (subjects, genres, resource types) and EDM Agents (persons, organisations)"
"By concepts we mean all:
* Editorially created browse entry points that lead to search results based on topics, subjects, genres, item types, etc. Examples are e.g. Classical music, Musical instruments, Opera, Japanese objets d'art,  and so on. An editorially created entry point is always visualised.
* Programmatically created concepts based off of API queries on EDM Concept entities and display their prefLabels as anchors as links to search results. NOTE: These will be ignored for now.

This particular story is accepted when:
* There's a page /browse/concepts where all editorially created browse entry points are displayed in a grid in in alphabetical order. Much like http://www.europeana1914-1918.eu/en/explore
* This page can be filtered by theme (browse/concepts/music, browse/concepts/art-history) 
* This page is reachable via a new option in the Browse menu
* Editors can in the CMS classify a browse entry point as a concept (or Agent, see sibling ticket for Agents overview page)
* Editors can choose which (up to 6) concepts to promote on the landing page of a thematic collection


Implementation ideas:
- Add a categorisation of browse entry points just as for promotions where the editor can choose between Concept and Agent (later we may add Work, Place, Time period)
- Add a status field for editors to choose which (up to 6) browse entry points to feature on the the landing page of a thematic collection. There can be no more than 6 Concepts + Agents in total.
"
"
Example item with pattern:
http://europeana.eu/portal/record/2051922/data_euscreenXL_955989.html where dc:identifier is 955989 and the embed is:

{code:java}<iframe src=""http://www.ccma.cat/video/embed/955989"" allowfullscreen scrolling=""no"" frameborder=""0"" width=""500px"" height=""281px""></iframe>
{code}

where dc:identifier is the only parameter needed to construct the embed snippet.

Dataset to whitelist:
2051922_Ag_EUscreenXL_TV3_1032

the whitelist, as mentioned in other tickets, must be in config so that it can be easily updated.

Note that this particular provider has a number of TV-programmes relevant to art and music. That's why I would prioritise it."
"The two-click action to get an item downloaded is confusing for a user, especially with the attribution snippet which moves the focus away.

*Suggestions:*
* Remove the download button when there is nothing to download (instead of greying it out)
* Show a 'the download will start in X seconds' instead of the second download button with some option to cancel it since I assume a download will start anyway

Would like some input from [~panagiotiskyrou639031] here as well before we go into a final implementation. 

The goal of this ticket is to in general improve the download interaction.

*Sample objects:*
http://europeana.eu/portal/record/09102/_CM_0960462.html (multiple media objects where some have technical metadata)
http://europeana.eu/portal/record/92094/BibliographicResource_1000086165662.html (one item with technical metadata)
http://europeana.eu/portal/record/92099/BibliographicResource_2000081662429.html (one item without technical metadata)"
"Collating all various tickets and acceptance criteria into one, focussing solely on the front-end part.
This ticket should mainly and hopefully be testing in sprint 20, any work needed in the API will take part in that team. 

h1. Acceptance criteria 
* An ordered hierarchy must start its count at 1 (note that the API starts at index 1)
* An unordered hierarchy is not supposed to show a number, list-wise
* Unordered children should be ordered according to the specifications as written down in EC-10476
* The total number of children should reflect the exact same children as displayed in the hierarchy
* The front-end should reflect what the API outputs in terms of order etc.

*Sample objects:*
Ordered hierarchy: http://europeana-npc-test.de.a9sapp.eu/portal/record/2048316/providedCHO_TLA_11.html
Unordered hierarchy: http://europeana-npc-test.de.a9sapp.eu/portal/record/2059205/data_sounds_TheTraditionalSongsAndPoetryOfUpperAssam.html
Multi-level hierarchy: http://europeana-npc-test.de.a9sapp.eu/portal/record/2048316/providedCHO_TLA_230_position_c0_c6.html
Ordered AND unordered hierarchy: [to be added]
Wiener Zeitung: http://europeana-npc-test.de.a9sapp.eu/portal/record/9200300/BibliographicResource_3000051831231.html

We should make sure that ALL these hierarchies display and render correctly and logically. The known bugs I'll add as child to this."
"The images from this dataset http://www.europeana.eu/portal/search?f%5BTYPE%5D%5B%5D=TEXT&q=europeana_collectionName%3A%229200231_Ag_EU_TEL_a1081_Collections_1914-1918%22 have received thumbnails but do not open in the image viewer. The raw imag URLs in edm:isshownby and edm:hasview do work. An issue with our proxy?
"
"With a few of our Ruby libraries already published to rubygems.org, we should have an official Europeana account there as their owner. (They are at present owned by my account.)

Acceptance criteria:
# Sign up at https://rubygems.org/sign_up
# Let [~richard.doe] know the email used and he will add it to the owners of the gems europeana, europeana-api and europeana-blacklight."
"Some new features require changes to the SQL database, e.g. EC-10592, EC-10594

Rails has a command line mechanism for applying these: `bundle exec rake db:migrate`

We need to devise a procedure for executing this command on our Cloud Foundry production environment

* db:migrate must only be run once per deploy, i.e. multiple app instances should not all attempt to run it
* web site needs to be taken offline while db migrations are run
* pre-migration, a db dump should be saved somewhere remote"
"The [404 page|http://www.europeana.eu/portal/record/09102/_GNM_69398] suggests ""Try searching Europeana or you might like the selected items below.""

But no browse entry points have been added to it, so nothing is displayed below.

Either:
# Create some browse entry points on the 404 page via the CMS
# Reword the 404 page so as not to refer to ""selected items"""
"Previous experiments with Learning To Rank (LTR) approaches to improving search have indicated this is a viable approach for us. We are now committed to adopting this approach as part of the [Search Improvements Plan|https://docs.google.com/document/d/1xRZYhl1KLIlhGitMD2fymdJ-go4XzTlbhziHbSZc8Og/edit#].

The initial approach taken will be experimentation with the various options available through [RankLib|http://sourceforge.net/p/lemur/wiki/RankLib/].

A precondition to this work is having clickstream data available."
"When trying to see this image http://www.europeana.eu/portal/record/2022701/lod_oai_ipce_bvpb_mcu_es_479669_ent1_.html in full screen, one get the [error|http://proxy.europeana.eu/2022701/lod_oai_ipce_bvpb_mcu_es_479669_ent1_?view=http%3A%2F%2Fbvpb.mcu.es%2Fi18n%2Fcatalogo_imagenes%2Fimagen_id.cmd%3FidImagen%3D4638614]:
""An unhandled lowlevel error occurred. The application logs may have details.""

Also: http://www.europeana.eu/portal/record/2022701/oai_bivaldi_gva_es_6532.html"
"e.g. {{http://test.npc.eanadev.org/portal/search?f%5BMEDIA%5D%5B%5D=true&q=}}

This is a result of the Blacklight 6 upgrade"
"This looks bad - any search result list with 400px wide thumbnail crops/truncates the image to the right (easier to spot with default images) if the screen is narrow enough- see attached.
"
"See [this|https://www.assembla.com/spaces/europeana-apis/tickets/new_cardwall#ticket:9] ticket about restoring the OpenSearch functionality for Europeana.

I've added the opensearch.xml file to the api project, at [api2/api2-war/src/main/webapp/opensearch.xml|https://github.com/europeana/api2/blob/develop/api2-war/src/main/webapp/opensearch.xml]

We still need to link to that file as described in that ticket, by adding 
{code:java}<link rel=""search"" type=""application/opensearchdescription+xml"" href=""http://www.europeana.eu/api/opensearch.xml"" title=""Europeana Search""/>{code}
to the HTML of the collections site. 

The file will be deployed during this sprint, for testing purposes you can also use this URL: http://alpha-api.de.a9sapp.eu/opensearch.xml"
"All tickets [tagged v0.3.4|https://www.assembla.com/spaces/ck47vGwfer5j4iacwqjQXA/tickets?tickets_report_id=0&tag_id=1147993] must be included.

Specific deployment notes:
* Γ£ö Merge release/v0.3.4 into master and tag v0.3.4
* Γ£ö Publish Git release page: https://github.com/europeana/europeana-portal-collections/releases/tag/v0.3.4
* Γ£ö Deploy maintenance page ""app"" to production env: http://maintenance.de.a9sapp.eu/
* Γ£ö Update Jenkins build job for optional db:migrate
* Γ£ö Latest styleguide needs to be deployed to production
* Γ£ö Collections site configured to use latest styleguide, v0.2.18
* Γ£ö EC-10591 requires background job for updating new content and sources pages to be run: Make Jenkins deploy job execute on scheduler `bundle exec rails runner 'Collection.published.each { |collection| Cache::ColourFacetsJob.perform_later(collection.id); Cache::RecordCounts::RecentAdditionsJob.perform_later(collection.id); Cache::RecordCounts::ProvidersJob.perform_later(collection.id) }'`
* Γ£ö `bundle exec rake db:migrate` needs to be run
* Γ£ö EC-10568 requires `bundle exec rake db:seed` to run on deployment, or an editor to manually add an exception page via the CMS.
* Γ£ö Set SoundCloud client ID in env var

Post-deploy:
* Γ£ö EC-10594, EC-10630 Existing browse entries need to be categorised as either agent or concept and by theme (in progress, ongoing).
* Γ£ö The Music Collection survey needs to be disabled, apply one banner for everything.
* Γ£ö Translate agents & concepts into something more meaningful.
* Γ£ö Document which oEmbeds we support on the Wiki (to start with) & inform DPS.
* Γ£ö List promotion types in the Wiki.
* Γ£ö Restore Jenkins job: remove higher timeout for db:migrate; remove cache background job triggers"
"I do a search, for example
""japan""
Next I do an additional search:
""tea""
The search box looks now like image 1
I remove the search item ""japan""
Now the second search item is duplicated (see image 2).

This is the same in the URL:
{{http://test.npc.eanadev.org/portal/search?q=tea&qf[]=tea}}"
"The procedure to allow the styling of dynamically loaded js components does it's job, but the workflow is slow, individual components cannot be targeted and the file organisation splits the source sass from the source js.

The Grunt script that executes this procedure should be reworked so that
* individual components can by targetted by the script
*sass sources live in the component directory, but maintain references to variables in the styleguide

This ticket is a prerequisite for EC-10564"
"Currently the browse entry point box in the CMS accepts a search query. This should be more easy and flexible.
Suggestion is to allow a CMS user to paste in a Collections search URL, which the CMS then needs to transform into a query.

Eg instead of:
DATA_PROVIDER:Statsbibliotek AND haslund-christensen

One can put in:
{{http://www.europeana.eu/portal/search?f[DATA_PROVIDER][]=Statsbiblioteket&q=haslund-christensen}}

Which will become the first after saving.
This will also make it more flexible and easy for users to for instance also include a colour filter in their search."
"Example:
http://europeana-npc-test.de.a9sapp.eu/portal/record/2048316/providedCHO_TLA_230.html

Related API call:
http://alpha-api.de.a9sapp.eu/v2/record/2048316/providedCHO_TLA_230/children.json?wskey=api2demo

The API always starts with index 1. [~andyjmaclean] Can we make it so that the hierarchy navigator also always starts with 1? "
"Saving a change to the configuration file here:

http://jenkins.eanadev.org/configfiles/editConfig?id=org.jenkinsci.plugins.configfiles.custom.CustomConfig1427810153862

gave the error below.  The change was saved but I notice that the machines are listed as ""dead"" (see attached screenshot).

A problem occurred while processing the request. Please check our bug tracker to see if a similar problem has already been reported. If it is already reported, please vote and put a comment on it to let us gauge the impact of the problem. If you think this is a new issue, please file a new issue. When you file an issue, make sure to add the entire stack trace, along with the version of Jenkins and relevant plugins. The users list might be also useful in understanding what has happened.
Stack trace

javax.servlet.ServletException: java.lang.RuntimeException: Failed to serialize org.jenkinsci.lib.configprovider.AbstractConfigProviderImpl#configs for class org.jenkinsci.plugins.configfiles.custom.CustomConfig$CustomConfigProvider
	at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:796)
	at org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)
	at org.kohsuke.stapler.MetaClass$13.dispatch(MetaClass.java:411)
	at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:746)
	at org.kohsuke.stapler.Stapler.invoke(Stapler.java:876)
	at org.kohsuke.stapler.Stapler.invoke(Stapler.java:649)
	at org.kohsuke.stapler.Stapler.service(Stapler.java:238)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:686)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1494)
	at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:132)
	at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:123)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)
	at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:49)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)
	at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
	at hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)
	at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
	at jenkins.security.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:117)
	at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
	at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
	at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
	at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)
	at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
	at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
	at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
	at jenkins.security.BasicHeaderProcessor.doFilter(BasicHeaderProcessor.java:93)
	at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
	at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
	at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:67)
	at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
	at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
	at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:171)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)
	at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:49)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)
	at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)
	at org.kohsuke.stapler.DiagnosticThreadNameFilter.doFilter(DiagnosticThreadNameFilter.java:30)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1474)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:499)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:533)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:428)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
	at org.eclipse.jetty.server.Server.handle(Server.java:370)
	at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)
	at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:960)
	at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1021)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:865)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240)
	at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:668)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
	at winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.RuntimeException: Failed to serialize org.jenkinsci.lib.configprovider.AbstractConfigProviderImpl#configs for class org.jenkinsci.plugins.configfiles.custom.CustomConfig$CustomConfigProvider
	at hudson.util.RobustReflectionConverter$2.writeField(RobustReflectionConverter.java:215)
	at hudson.util.RobustReflectionConverter$2.visit(RobustReflectionConverter.java:183)
	at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:138)
	at hudson.util.RobustReflectionConverter.doMarshal(RobustReflectionConverter.java:168)
	at hudson.util.RobustReflectionConverter.marshal(RobustReflectionConverter.java:109)
	at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)
	at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)
	at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)
	at com.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:82)
	at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.marshal(AbstractTreeMarshallingStrategy.java:37)
	at com.thoughtworks.xstream.XStream.marshal(XStream.java:1026)
	at com.thoughtworks.xstream.XStream.marshal(XStream.java:1015)
	at com.thoughtworks.xstream.XStream.toXML(XStream.java:988)
	at hudson.XmlFile.write(XmlFile.java:178)
	at org.jenkinsci.lib.configprovider.AbstractConfigProviderImpl.save(AbstractConfigProviderImpl.java:86)
	at org.jenkinsci.lib.configprovider.AbstractConfigProviderImpl.save(AbstractConfigProviderImpl.java:76)
	at org.jenkinsci.plugins.configfiles.ConfigFilesManagement.doSaveConfig(ConfigFilesManagement.java:131)
	at sun.reflect.GeneratedMethodAccessor1221.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:298)
	at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:161)
	at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:96)
	at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:121)
	at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
	at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:746)
	... 62 more
Caused by: java.lang.RuntimeException: Failed to serialize org.jenkinsci.lib.configprovider.model.Config#content for class org.jenkinsci.lib.configprovider.model.Config
	at hudson.util.RobustReflectionConverter$2.writeField(RobustReflectionConverter.java:215)
	at hudson.util.RobustReflectionConverter$2.visit(RobustReflectionConverter.java:183)
	at com.thoughtworks.xstream.converters.reflection.PureJavaReflectionProvider.visitSerializableFields(PureJavaReflectionProvider.java:138)
	at hudson.util.RobustReflectionConverter.doMarshal(RobustReflectionConverter.java:168)
	at hudson.util.RobustReflectionConverter.marshal(RobustReflectionConverter.java:109)
	at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)
	at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)
	at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)
	at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)
	at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)
	at com.thoughtworks.xstream.converters.collections.MapConverter.marshal(MapConverter.java:79)
	at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)
	at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)
	at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:84)
	at hudson.util.RobustReflectionConverter.marshallField(RobustReflectionConverter.java:224)
	at hudson.util.RobustReflectionConverter$2.writeField(RobustReflectionConverter.java:211)
	... 87 more
Caused by: com.thoughtworks.xstream.io.StreamException:  : No space left on device
	at com.thoughtworks.xstream.core.util.QuickWriter.flush(QuickWriter.java:77)
	at com.thoughtworks.xstream.core.util.QuickWriter.write(QuickWriter.java:49)
	at com.thoughtworks.xstream.io.xml.PrettyPrintWriter.writeText(PrettyPrintWriter.java:279)
	at com.thoughtworks.xstream.io.xml.PrettyPrintWriter.writeText(PrettyPrintWriter.java:231)
	at com.thoughtworks.xstream.io.xml.PrettyPrintWriter.setValue(PrettyPrintWriter.java:214)
	at com.thoughtworks.xstream.io.WriterWrapper.setValue(WriterWrapper.java:45)
	at com.thoughtworks.xstream.converters.SingleValueConverterWrapper.marshal(SingleValueConverterWrapper.java:45)
	at com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:51)
	at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)
	at com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:84)
	at hudson.util.RobustReflectionConverter.marshallField(RobustReflectionConverter.java:224)
	at hudson.util.RobustReflectionConverter$2.writeField(RobustReflectionConverter.java:211)
	... 102 more
Caused by: java.io.IOException: No space left on device
	at java.io.FileOutputStream.writeBytes(Native Method)
	at java.io.FileOutputStream.write(FileOutputStream.java:345)
	at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
	at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
	at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)
	at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
	at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
	at java.io.BufferedWriter.flush(BufferedWriter.java:254)
	at hudson.util.AtomicFileWriter.flush(AtomicFileWriter.java:91)
	at com.thoughtworks.xstream.core.util.QuickWriter.flush(QuickWriter.java:75)
	... 113 more"
"*Restore icon page*

This page has turned blank:

http://develop.styleguide.eanadev.org/patterns/atoms-iconography-svgicons-global/atoms-iconography-svgicons-global.html


*Address sass compilation warnings*

WARNING: 'laptop.png' was not found (or cannot be read) in /var/www/html/Europeana-Patternlab/source/images/heritage-in-motion
WARNING: 'clapperboard.png' was not found (or cannot be read) in /var/www/html/Europeana-Patternlab/source/images/heritage-in-motion
WARNING: 'masks.png' was not found (or cannot be read) in /var/www/html/Europeana-Patternlab/source/images/heritage-in-motion
WARNING: 'easel.png' was not found (or cannot be read) in /var/www/html/Europeana-Patternlab/source/images/heritage-in-motion
WARNING: 'gallery.png' was not found (or cannot be read) in /var/www/html/Europeana-Patternlab/source/images/heritage-in-motion
WARNING: 'award_first.png' was not found (or cannot be read) in /var/www/html/Europeana-Patternlab/source/images/icons
WARNING: 'users.png' was not found (or cannot be read) in /var/www/html/Europeana-Patternlab/source/images/icons
WARNING: 'key.png' was not found (or cannot be read) in /var/www/html/Europeana-Patternlab/source/images/icons"
"All tickets [tagged v0.3.5|https://www.assembla.com/spaces/ck47vGwfer5j4iacwqjQXA/tickets?tickets_report_id=0&tag_id=1177113] must be included.

Specific deployment notes:
* Γ£ö EC-10387: manually create the page in the CMS post-production
* Γ£ö EC-10665: We need to deploy the oEmbed service (version 0.1.0) to oembed.europeana.eu in CF production space
* Γ£ö EC-10624, EC-10637: Update production Apache with opensearch.xml and robots.txt
* Update the Wiki with the new oEmbeds and embeds.
* Γ£ö Production styleguide update to version 0.2.23, gem ref ab30cfa
* Γ£ö EC-10631: deploy new version of media proxy service with rack-cors fork (version 0.3.3)
* Ensure all the latest translations are included
* Γ£ö #958: Update Jenkins job for deployment optimization, i.e. split in two
* Γ£ö #988, #1004: Run `bundle exec rake cf:on_first_instance jobs:cache:providers` during deploy
* Γ£ö Prepare Github release notes


Production deployment procedure:
* Γ£ö Configure env vars in production CF manifest.yml (on Jenkins)
* Γ£ö Deploy Collections first *without shutting down old mirror*
* Γ£ö Deploy Apache second
* Γ£ö Shut down old Collections mirror


Post-deployment tasks:
* Γ£ö Publish Github release notes"
The issue with that is that it forces word order. A search for "Charles Dickens" will not hit a metadata record where dc:creator = Dickens, Charles. A search for (Charles Dickens) will hit both records where dc:creator = Charles Dickens and where dc:creator = Dickens, Charles.
"This needs to be transparant. On the Wiki, we should:
* Document how and where we do translations.
* How this is affected in the environments (apparently test pulls in translations every 24 hours, but for production we need to redeploy).
"
"We should investigate if we could display these better:

- Remove the Concept field as it is a slush field where we put the prefLabels for EDM Context. Instead they should be displayed in language aware manner in the respective field they are connected to (Type, Subject, Format)


This may prove very tricky as the API output doesn't make it easy to connect contextual class instances with the fields containing the URI that lead to them being generated. I think - hence the spike."
"Further iteration of EC-10298.

In this iteration:
* User testing on some of the proposals for iteration 1 (especially those regarding the collapsable facets), to see if this really is something we should do. 
(testing will happen in the first week of March)
* Further improve the grid view based on this.
* Start with the implementation (PatternLab > Collections & the Ruby level).

Comments from iteration 1 still need to address:
""Carlos and I are wondering about the controls (for ""grid"" / ""view"") on narrow viewports:
should we lose the labels?
should we center each on their own line?

(this once they line break with ""345 results for paris"")

And do the ""grid"" / ""list"" options even make sense at the narrowest breakpoint? Once you've dropped to a single column the difference between the two is a matter of a line or two of metadata.""

For [~panagiotiskyrou639031] and [~cr.marcelino] to probably start this ticket."
"And of course INA exists not only on its own as a provider but also as a data provider under EUScreenXXL...  But it's good audio-visual content and we should try to embed their videos also from this incarnation.

Link:
http://www.europeana.eu/portal/search?q=europeana_collectionName:%222051908_Ag_EU_EUscreenXL_1024%22

As in EC-9940 the player ID can be predicted from the dc:identifier. 

Note:
There's also INA as data provider under EUScreen (a different provider to EUScreenXXL). Here the links go to the EUSceen portal and so we can't embed. This is dataset 2051935_Ag_EU_EUscreenXLCore_1024

Note 2:
If ever we needed proof the way we model data providers and providers is crap this ticket is it.
"
"We've agreed to go with square images in the grid.

The current implementation hard-codes the width and height of the image squares (for one breakpoint only) and allows the remaining space to be shared across the columns.

Rather than adding in more hard-coded dimensions and breakpoints it would be optimal to pick up on a technique used in the thumbnails for the carousel on the object page.

The thumbnails here use a (pure css) technique that forces the height of the thumb to be the same as the width.

Proposal:

  * make a new html component ""thumb-square"" that isolates this behaviour
  * retro-fit the new component back into the carousel
  * use the new component in an updated grid display

This will be cleaner code-wise and will allow for a far more fluid resizing, so I'd like to look into it.  If it proves to be too time-consuming or less of a good idea than it seems then I'll limit myself to making sure the grid displays well at all breakpoints using hard-coded dimensions.
"
"Change the current address in the footer to: 

Prins Willem-Alexanderhof 5
2595 BE Den Haag

And update the logo in the footer to the latest Europeana logo.
"
"Many of the smaller providers are not in here. Maybe we need to set/increase the facet limit in our API query?

http://europeana.eu/portal/browse/sources

[~richard.doe] Adding this to the running sprint."
To implement the decision & outcomes from ticket EC-10655.
To implement what's spiked here: EC-10413.
"Some images fail to load in our viewer due to various reasons (expired SSL certificate, incorrect headers etc.). We should make the error message generic and give the user an option to open the image manually.

See EC-10703."
"Right now all text in Solr is being run through an English-language processing chain. This creates a large number of false positives in search, including results that are sometimes absurd. Language detection techniques should be applied and all text content analysed in a language-appropriate way.

Language detection in Solr is discussed:

- in the [Apache documentation|https://cwiki.apache.org/confluence/display/solr/Detecting+Languages+During+Indexing]
- by Trey Grainger, in his [CareerBuilder case study|https://lucidworks.com/blog/2015/09/18/careerbuilder-executes-semantic-multilingual-strategies-apache-lucenesolr/]
- similarly in the book he co-authored, [Solr in Action|https://www.manning.com/books/solr-in-action]

Note that any solution adopted will involve a complete reindex."
"According to the *[web accessibility evaluation tool|http://wave.webaim.org/report#/http://europeana.eu/portal/]* we have a lot of tabindex alerts:

*What It Means*
A positive tabindex value is present.
*Why It Matters*
Tabindex values of 1 or greater specify an explicit tab/navigation order for page elements. Because it modifies the default tab order, cause confusion, and result in decreased keyboard accessibility, it should be avoided.
*How to Fix It*
If the natural tab order is already logical, remove the tabindex. Otherwise, consider restructuring the page so that tabindex is not needed. If tabindex is maintained, ensure that the resulting navigation is logical and complete.
*The Algorithm... in English*
A tabindex attribute is present and has a positive value.
*Standards and Guidelines*
[2.4.3 Focus Order (Level A)|http://webaim.org/standards/wcag/checklist#sc2.4.3]

More information on *tabindex* :
http://webaim.org/techniques/keyboard/tabindex

Goal is WCAG AA compliance."
"*Main user story:* 

Europeana wants to create highly visual exhibitions where the storyline is supported by multimedia items that is presented to the user in an engaging way. 

Related user stories

1. As a user I would like to engage with the exhibition's content in a way that I can browse through it without having to click a lot. 
2. Europeana would like to see their branding / partner branding within the exhibitions so the user knows who created / powered the exhibition. 
3. As a user I find it annoying if I had to go outside of the exhibition to play or explore the content further so I would like to ΓÇ£playΓÇ¥ it within the exhibition.

*Acceptance criteria:* 

-Same header and footer as the intro page
-The exhibitions need to be Europeana branded
-Users need to be able to play different media within the exhibitions and have a visual experience. So we need different templates to support different media; 
-Template for the landing page of the exhibition
-Video (small and full width)
-Audio
-Text
-Image (small and full width) 
-Video plus text
-Audio plus text plus image
-Text plus image
-Credits page
-A navigation path on the side to give an overview of where you are in the chapter
	-This section navigation module is sticky,with the dot changing colour depending on your 
          position in the page. For each section in the page there's a dot. 
-The arrows at the end of every section of the page allow the user to ΓÇÿjumpΓÇÖ to the next section when they click it. 

See: https://europeanadev.assembla.com/spaces/europeana-npc/documents/dPuPbg2Kqr5youdmr6CpXy/download/dPuPbg2Kqr5youdmr6CpXy

Related tickets: #1010 #1011 #1012 #1014"
"Europeana and partners need to create exhibitions that look like https://europeanadev.assembla.com/spaces/europeana-npc/documents/dPuPbg2Kqr5youdmr6CpXy/download/dPuPbg2Kqr5youdmr6CpXy in an easy way. 


*Acceptance criteria*


-The exhibitions need to be Europeana branded
-There has to be room for a partner logo somewhere
-The CMS has to support the following scenarioΓÇÖs; 
   - Gallery page
   - Video (small and full width)
   - Audio
   - Text
   - Image (small and full width) 
   - Video plus text
   - Audio plus text plus image
   - Text plus image
   - Credits page
-be able to link media to portal records
-Credit section for the objects itself 
-Enable adding ΓÇ£ChaptersΓÇ¥
-Enable adding ΓÇ£sub chaptersΓÇ¥ 
-Enable ΓÇ£savingΓÇ¥ the exhibitions to edit later


See: https://projects.invisionapp.com/d/main#/projects/5970740

(Still needs work from Panos) "
"Europeana wants to add sections with Video to an exhibition to give the user a more engaged experience. 

*Acceptance Criteria:* 


-Template should allow to upload video
-Template should allow full width video
-Template should allow to type in the link of a video
-It needs to be clear to the user that they can play a video
-Template should allow a text overlay, that can be closed
-The template should allow a small box for image credits and licensing. 

See: http://djs.pageflow.io/social-robot#23264 

(needs work from Panos) "
"*Main user story:* 

Europeana wants to add sections of text to an exhibition where we can summarise stories or describe an object to the user in an engaging way. 

*Related user stories:* 

As a user I would like to browse through exhibitions and immediately notice what the highlights are without having to read a huge amount of text. 

*Acceptance criteria:* 
-Template in the CMS that allows Europeana to type in text
-This template should give the option to do ΓÇ£pull quotesΓÇ¥
-This template supports bold, italic, cursive. 
-All texts should allow for a gradient background so the text can become more visible
-The font should be open sans
   -The titles are 32px
   -subtitles are 18px
   -the full width version text should be 16px
   -the normal version should be 20px

See: https://projects.invisionapp.com/d/main#/console/5970740/133233331/preview "
"*main user story:* 

Europeana wants to add sections of audio to an exhibition to give the user a more engaging experience. 

*Related user story: 
*
As a user I would like to hear audio recordings within the exhibitions that contribute to the exhibition narrative without opening a new section. 

*Acceptance criteria:* 

-The audio needs to play in the exhibition itself.
-The template should allow to upload a background image to. This image needs to be full width.
-It needs to be clear to the user that they can play an audio file so there needs to be a clickable icon for them to start. 
-It needs to show how far along in the audio file they are. 
-the template should allow a small box for image credits and licensing. 
-The template should allow to add a subtitle field

See: http://zeiss-experience.pageflow.io/zeiss-nature-experience#6791 
Panos needs to work on this/ "
"
Europeana wants to add sections with an image to an exhibition to give the user a more engaging experience. 

*Acceptance criteria:* 

- The template should allow full width images
- The template should allow for an optional title bar where Europeana can place text in
- the template should allow for a text overlay field where Europeana can place text in
- the template should allow a small box for image credits and licensing. 
- the template should allow a subtitle field
- All texts should allow for a gradient background so the text can become more visible


See: https://projects.invisionapp.com/d/main#/console/5970740/138257292/preview"
"Europeana wants to add a section where a slider is used to compare two images with each other or show resemblances between two images in order to engage the user more. 

*Acceptance criteria:* 

- Needs to tell the user what can be done on the page. 
- Needs to have a slider function
- Needs to have the option to upload two different images
- Needs to have space for text and this text should be disabled when a user starts sliding. 


See: http://zeiss-experience.pageflow.io/zeiss-nature-experience#7061

we could also embed the following: https://juxtapose.knightlab.com/"
"

*Main user story:* 

Europeana needs to have a credits page so we can credit our partners and the institutions that contributed to the exhibitions
*
Related user stories:* 

1. As a user I would like to know who contributed to an Exhibition
2. As a partner I would like to see that there is a credit page so users know where the content is coming from. 
3. Europeana wants to create more value for partners for all the obvious reasons. 

*Acceptance criteria*

Needs some more work. "
"

*Main user story
*
Europeana should be able to update the exhibitions Gallery in the same manner that they update the landing pages for Collections. 

*Related user stories*

1.As a creator, I want to create new exhibitions from time to time so I need to be able to upload new virtual exhibitions to the landing-page
2.As a creator, I want the exhibitions landing page to change every now and then so I want to update the hero images
3.As a creator, I would like to have a system in place so that I can manually edit the text on the landing page


Acceptance criteria: 

There needs to be a space in the (portal?) CMS to edit the VE landing page where we can fill in: 
- the exhibition link
- Change the featured exhibition image
- Add the summary text for the hero exhibition
- Fill in the information for the tiles
- Add a theme / collection to the exhibitions
- Add partner logoΓÇÖs 
- Add the credits for the hero exhibition image

See: https://projects.invisionapp.com/d/main#/console/5970740/136370029/preview"
"All tickets tagged v0.3.6 must be included.
Release will require downtime as per database changes.

Specific deployment notes:
* Γ£ö Adapt Jenkins job to use the scaling strategy (see acceptance job), *reducing downtime to ~ 4 minutes*
* Γ£ö EC-10593: Update oEmbed service to support CREM-CNRS
* Γ£ö #1043: deploy proxy service bug fix (v0.3.4)
* Γ£ö Deploy styleguide version 0.2.30
* Γ£ö Use styleguide version 0.2.30
* Γ£ö backup db before making structural changes
* Γ£ö EC-10649: run db:migrate

Post-deployment tasks:

* EC-10714 Update contact page to include generic email address "
"I've added a CI-compatible mechanism for front-end testing that uses Google's JsTestDriver (jar).

This work was more experimental / fact-finding than anything else.

Karma would be an improvement:

  * no java dependency
  * a mustache preprocessor is available, allowing us to use exsting templates as fixtures with flexible models
  * fits nicely with both grunt and continuous integration
"
"*Main user story*

As a user I would like to know to be able to see a highly visual overview of all the exhibitions that makes it very easy for me to pick an exhibition that I like. 

*Related user stories*

As a user, I would like to be able to see an overview of all the exhibitions in a visual way so that itΓÇÖs easier for me to make a choice
As a user, I would like to be search for an exhibition of choice so I donΓÇÖt have to make my way to the entire page first
As a user I would like to see which channels the exhibitions relate to so I might find other exhibitions / objects that I am interested in
As a user, I would like to see the newest exhibition featured or highlighted somewhere on the page so I know that that might be an exhibition I havenΓÇÖt visited yet
As a partner, I would like to see that I am mentioned on the exhibition page so that I have a feeling of appreciation
As a user i would like to be able to trace my path back to europeana collections so I can continue my browsing/exploration of content. 


See: https://projects.invisionapp.com/share/HU637K6XE#/screens/136370029

*Acceptance criteria:* 


-A search bar on the top of the page so a user can type in an exhibition so he doesnΓÇÖt have to scroll through the entire page. 
- One highlighted exhibition per page (similar to the hero image on the collections landing pages) with room for the image credits. 
- This image is clickable and will lead you to the featured exhibition. 
- This image should have room for crediting the hero image
- This image has room for a partner logo or our own logo and this logo will take you to the partner website. 
- Each exhibition should have itΓÇÖs own feature box with a carousel containing three separate slides. 
- These slides form a carousel; there are three slides in each carousel. 
        -the first slide is an image with a separate overlay with the exhibition title and a banner with for the related theme (art, music, fashion etc.) that represents a 
         channel. If you click on this you will go into the exhibition.
        -the second one leaves room for a small summary and language selection.  If you click on this you will go into the exhibition.
        -the third one shows the partner logo. 
- The Hero image should be clickable and lead to an exhibition. "
"As Europeana we would like to be able to measure item displays based on various provider & provider-related information, in order to provider statistics to providers (and ourselves).

We currently as far as I know already track the thematic collection on an item page, if known. Covered in EC-10463.

This should be extended to more custom dimensions/metrics, namely:
* Country => europeanaAggregation.edmCountry
* Data provider => aggregations. edmDataProvider
* Provider => aggregations.edmProvider
* Rights => aggregations.edmRights

*Acceptance criteria*
This ticket is accepted when:
* Each item page tracks all of the above and sends this to Google Analytics in the same manner as the Thematic Collection. This can be tested by loading an item page and then looking at your console to see the request to Google. This should include the parameters as described above.
* All our Google Analytics custom requests are documented on our Assembla Wiki, including the ones above, the Thematic Landingpage one, the isShownAt clickthroughts (Redirect), the media requests (Media view) and the downloads (Download). If there are ones missing, please document too.

Documentation should include: 
* Page (where the event is triggered)
* Trigger (when it is triggered)
* Description (what kind of information is tracked)
* Google Analytics event category (how this is named in GA)"
"This is used to control movement between sub-chapters in an exhibition, as well as indicate the user's current location within an exhibition chapter.

(ticket complete when this appears in the styleguide)"
"The group of simplified, single-state cards (the 3rd slide of the exhibition intro page)

See the bottom of this design:
   https://projects.invisionapp.com/share/HU637K6XE#/screens/132835116"
"* Should include the basic text atom / molecule
* Should include the background image (always available)
* Should include the progress navigation widget (EC-10757)
* Should include bottom ""next"" arrow (check with design: should there be a top arrow too?)

https://projects.invisionapp.com/share/HU637K6XE#/screens/138257443


(ticket complete when this appears in the styleguide)"
"Anynines have shared their blue/green deployment scripts with us. This ticket is to assess these scripts, compare it to our own blue/green deployment (currently unversioned shell scripts in Jenkins) and provide recommendations for the best way forward. This can be staying with our own scripts, changing to Anynines' scripts, or something in between (e.g. improving ours/theirs before changing).

Scripts can be found in the private [Anynines repository|https://github.com/anynines/anynines-automation-scripts], with an Sinatra example [here|https://github.com/anynines/anynines-automation-scripts/blob/master/Documentation/ruby_sinatra_example.md]

Acceptance criteria:
* Understanding of the Anynines scripts
* Strength/weakness comparison of scripts
* Suggested steps forward"

"Europeana has published Public Domain usage guidelines, http://www.europeana.eu/portal/rights/public-domain.html The intention is that these are referenced when a user clicks the Public Domain mark icon in the item display but it's not working correctly, they're not being picked up.

It does work correctly in the old portal. So if you go to http://old.europeana.eu/portal/record/9200397/BibliographicResource_3000126264590.html and click the Public Domain mark the usage guidelines are pulled in and linked to.

<span rel=""cc:useGuidelines"" resource=""http://www.europeana.eu/rights/pd-usage-guide/""></span> is the in-HTML reference in the old portal. There is some sort of reference to that URL in the current portal but obviously smth is wrong with it.


"
"We are using Anynines' free Swift service for Collections.

It has been observed that this Swift service is very slow, perhaps due to being limited in capacity by being on the free plan. (See EC-10785, EC-10326.)

Response times for lightweight HTTP requests, e.g. for URL retrieval, is slow (~ 300 ms). File uploads and downloads are very slow (~ 100 kB/s).

Tasks:
# Find out from Anynines what the limitations of the free Swift service are (capacity, network performance, etc)
# Consider whether we should commission a higher capacity service for the production deployment of Collections"

Based on comments in EC-10770.
"In the VE editor the block for ""new chapter"" needs to be added

- Chapter needs an image
- The tile needs to lead to the next chapter of the exhibition

For a mock up of the intro page, see: https://projects.invisionapp.com/d/main#/console/5970740/132835116/comments

"
"Language options needs to be added to the menu of the exhibitions / settings in the portal. 

[~cr.marcelino] I know that you discussed this with Panos; could you ad a design to this ticket? Please include language in the top navigation, and only on the intro page. "
"To implement spike from EC-10690.

For every concept, find the respective narrower class and use that to display a language aware label instead of putting it into ""Concept"" if a match is found.

*Test objects:*
http://test.npc.eanadev.org/portal/record/2048213/W_18_1945.html?debug=json (to display ""wood"", ""paint"", ""leather"", ""silk"", etc. as ""Medium"" (not ""Concept""))
http://test.npc.eanadev.org/portal/record/2021668/naturalis_specimen_ZMA_MAM_27366.html?debug=json (here Type: Specimen should be removed from Concept and only show up as Type)"
"A series of iterations for the (thematic) landingpages to on the one hand improve the design and usability (partly based on the user research outcomes) and on the other hand to support the features for Europeana Fashion.

Iteration 1: EC-10693

For this iteration:
* Add a way to more easily ""browse"" all items, some suggestions have been offered in the InVision discussion.

Notes:
* This ""Browse"" option should also be on the Europeana Collections homepage.
* Perhaps we can power it on the homepage with a ""custom"" list of subjects (http://europeana.eu/api/v2/search.json?query=*:*&wskey=api2demo&profile=facets&rows=0&facet=proxy_dc_subject.en)
* Perhaps in the Thematic Collections themselves we can power it with a pre-configured facet? For Fashion we could consider Object Type? (when we have it)"
"See subtasks:
* Allow a Thematic Collection to display a Tumblr feed on the thematic landing page
* Display the Tumblr carousel on Thematic Collections who have such a feed

Test with Collection: Fashion
Test with Tumblr: http://europeanafashion.tumblr.com/

For design, see EC-10693."
"See EC-10601 for previous work.

In this iteration, we should:
* Remove the padding as suggested in my comments for objects which have no thumbnail and no download.
* Start the download when the user clicks the download button and at the same time expand the drawer.
* Change the download bit in the drawer into a ""retry"" phrase, in case the download failed. Suggestion: ""The download has started, you can click [here] to try again."""
"Based on the output of ""rake routes"" the following routes will need to be forwarded to the exhibitions app.

/portal/exhibitions/admin -> /admin
/portal/exhibitions/pictures -> /pictures
/portal/exhibitions/attachment -> /attachment
/portal/exhibitions/elements -> /elements
/portal/exhibitions/contents -> /elements
/portal/exhibitions/api -> /api
/portal/<locale>/exhibitions/<page-name> -> /<locale>/<page-name>


"
"error: file write error (No space left on device)
fatal: unable to write sha1 file
fatal: unpack-objects failed

See here:
 http://jenkins.eanadev.org/view/Styleguide/job/styleguide-engineyard-develop/lastBuild/console"
"If I'm at a search result and  set number of items to show to e.g. 48 (anything but 12) I can then paginate through and see 48 at a time. If I  then execute a new search, canned or entered, the results are shown 12 at a time again. I think the app should ""remember"" and stick to 48 until changed by the user (it does remember the Grid display style preference).
"
"To follow-up on the discussion from EC-10650.

To consider whether we change the way Collections detects languages, as it might be too strict and not reliable at the moment. See discussion.

We should loop in all responders from the previous ticket when we pick this up."
"In follow-up on EC-10810.

We should adapt Collections to use the same language-policy/processing as Exhibitions does.

However, this ticket, which should start as a spike, also should consider/think about:
* Backwards compatibility / redirects.
* How to make search engines aware of translated versions of a certain page.
* What to do if a user changes the URL into another language, despite having set a language already via settings.
* How to handle canonical URLs especially for item pages. 
* From Google guidelines: ""Consider cross-linking each language version of a page. That way, a French user who lands on the German version of your page can get to the right language version with a single click.""
* And probably other things when they come to mind.. feel free to add to this list.

Google guidelines: https://support.google.com/webmasters/answer/182192?hl=en"
"Should be something like:

Thematic Collection
* All of Europeana
* Art history
* Fashion
* Music

No need to show numbers/totals for each facet. 
Facet is a radio button and thus there can only be one active, there should always be one active actually.
A Thematic Collection should also be shown under the search box as a facet, for a user to unclick.

Mock-ups were already made for this, are in InVision.
[~cr.marcelino] to start this work."




"As we discussed: 

- What you see is what you share

[~cr.marcelino] can you ad sizing? "

We would like to have GIF support for the hero images in the exhibitions foyer. 
"To assess whether spike EC-10516 can actually work to improve our performance on item pages especially.

Also estimate cost on Pivotal to see if this is affordable."
"Adding more animations to the VEs. 
We need to decide what they will be and where they will be. 
"



"* Γ£ö Merge into master, tag
* Γ£ö EC-10763: Use SSL API
* Γ£ö EC-10776: Update Apache config; add CF manifest to Jenkins Config Files
* Γ£ö EC-10767: Update oEmbed provider
* Γ£ö #1191: Update proxy
* Γ£ö #1224: Add SendGrid service
* Γ£ö EC-10778: Set up Jenkins job for cache regeneration
* Γ£ö EC-10797: Set env var EXHIBITIONS_HOST: http://exhibitions.cfapps.io
* Γ£ö EC-10801: europeana-blacklight changes need merging into master, tagging, pushing to rubygems, and version ref updated in Collections
* Γ£ö Update styleguide version used to latest deployed to production. Not required, but best to keep it up-to-date. Version 0.2.40
* Γ£ö EC-10717: Disable the [custom facets|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/994/details?comment=937014943]

Post-deploy:
* Γ£ö Write Git release notes"
"*Issue:*
All the images we upload to our end user blog (http://blog.europeana.eu) media library break after a few seconds. A thumbnail is visible for a few seconds, and then it changes into a broken image (see attached screenshot).

An example is http://blog.europeana.eu/wp-content/uploads/2016/04/opera.jpg which is intended to be visible 


"
"*User story:*

As a user I want to see all exhibitions on the new platform. 

*Problem:* 

The music exhibitions is important and needs to be migrated as one of the first to the new platform. 

*Solution:* 

Migrate it to the new platform

*Acceptance criteria:*

- I want to see the full exhibition moved from the omeka platform to the new platform. "


"Has to to with isshownby, hasview and thumbnail. 
Wait for Pablo for expamples
"
"*User story:* 

- As a user I want to see a preview of the content on the itempage so I know what I am looking at. 
- As a partner I want my content to display properly in Europeana. 

*Problem:* 

TIFFs don't have a preview in the Collections (no thumbnail) but when you click on them, you will get an error message that the image can not be loaded. 
For a user this is confusing because they don't know what they are downloading and for a partner this is frustrating because we've asked them for TIFFs but as far as they can see we are not doing anything with them. 

*Solution:* 

Display the Tiff or a preview of this. 

*Acceptance criteria:* 

- i want to see a preview of the Tiff in the lightbox. 


"
waiting for instructions from [~panagiotiskyrou639031]

"There exist a number of third-party performance/code analysis services for Ruby applications, including:

* [New Relic|https://newrelic.com/]
* [AppSignal|https://appsignal.com/]
* [Skylight|https://www.skylight.io/]

Adding one of these to our Ruby web applications would help identify performance bottlenecks and thus facilitate refactoring in order to eliminate them.

The scope of this ticket is to discuss and decide _whether_ we want to use one of these services, and if so then to identify _which_."
"Adding active highlight in the top menu navigation so a user can see where they are in correspondence with the style on the portal. 
"


"Mock-up on how this should look: EC-10702.

*Implementation notes/acceptance criteria:*
* This only needs to be shown if the edm:isShownBy WebResource has colours in its technical metadata.
* If this is the case, only the six colours of the edm:isShownBy need to be shown, no need to take other webresources into account for now.
* Clicking a colour invokes a search for colour: /portal/search?f%5BCOLOURPALETTE%5D%5B%5D=COLOUR (we should make sure colour palette is visible, so maybe also pre-select image facet)
* Clicks to the colours should be measured via a Google Analytics click event and added to the Assembla Wiki page with Google Analytics info."
"Previous iteration: EC-10313.

Story: As a user I would like to browse Europeana's data by specific license type.
NOTE: These are the facets from the RIGHTS facet.

Implementation:
* Add a line under the ""CAN I USE IT"" facet with: ""Show specific licenses""
* This should show the RIGHTS facet, with some specifics:
** We should show the licenses in a more user-friendly way:
*** Strip http:// & www from the value on display 
*** If a facet has been selected from the ""CAN I USE IT"" facet, we should auto-select and grey out the RIGHTS values that belong to this one (see http://labs.europeana.eu/api/search#reusability-parameter for mapping)
* We should add a question mark/help icon/or something similar to the ""Can I use it"" facet, which links to: /portal/rights.html

In the next iteration we should test whether this improves it enough for users. I'm leaning towards the notion that we also need a better help page explaining what something like ""Yes, with attribution"" actually means. This is evidently not clear enough to some users. Also, we should then investigate whether we can make the licenses even more user friendly in naming and add icons (but given the crap that is in some of our RIGHTS values this seems like a task that needs to wait until we further normalise the data)."
"A series of iterations for the (thematic) landingpages to on the one hand improve the design and usability (partly based on the user research outcomes) and on the other hand to support the features for Europeana Fashion.

Iteration 1: EC-10693
Iteration 2: EC-10803

For this iteration we should make some improvements to the design, especially this of the overall homepage.

Specific notes/suggestions:
* There has been a suggestion to increase whitespace, especially around the tiles, we can play around with this.
* We should improve the grid, which is evident if you look at the homepage on a very big screen, which seem to lose away the grid entirely. Its also evident by the middle section & the blog, which are not aligned.
* Can we update the footer, and remove the address and Europeana logo, instead I would like to have 3 lists of links here: MORE INFORMATION (About/Roadmap/Contact us) / INSTITUTIONS (All institutions/Become a partner) & HELP (Search tips / Terms of use and policies). If possible we should also make the mission statement a bit more prominent. Note that roadmap is new, and can link to  /portal/roadmap.html)."
"Collections gives a 500 error back to Facebook.

{{http://www.europeana.eu/portal/search?f[COUNTRY]=denmark&f[PROVIDER]=Europeana+280&q=europeana+280}}

(lets not exclude the possibility that this is a Facebook bug..)"
"The collections logo in the upper left corner on http://exhibitions.cfapps.io/portal/en/exhibitions/faces-of-europe leads to the exhibition foyer. 
This needs to lead to http://europeana.eu/portal/ 
"
"E.g. http://www.europeana.eu/portal/exhibitions/faces-of-europe

In the top menu, all the way on right it says ""languages"". When you switch languages, the word ""languages"" doesn't change. 
(Not sure if this is hard coded or if there is a translation in Locale app? )

The word ""languages"" should change to the proper translation. 
"
"The 280 exhibition needs to be added to exhibitions.europeana.eu. 
[~Maggy] will add the things that we need to the ticket. "
"In the CMS the standard licence after saving will say ""public domain"". 
If you re-enter the exhibition, all the licences will be set to public domain by default so there is no way of telling what it previously said. "
Need to add all the exhibitions tiles to the new foyer. 
In the image blocks we need a field where we can put in dates. 
"Previously discussed in EC-10555.
This ticket is to further improve the contextual display for agents, as currently we just show wrong values which is why we should fix it rather than wait for improvements in the model to better link contextual classes with their entities.

Example record: http://www.europeana.eu/portal/record/2048005/Athena_Plus_ProvidedCHO_Nationalmuseum__Sweden_18536.html
This record has two agents, one is a contributor (Anders Zorn) and one is the creator (Alexander Roslin). However, we display the first agent (Anders Zorn) here as creator.

""Current logic for the creator field is to take the first agent's prefLabel if one exists, otherwise the dcCreator, otherwise the proxies.dcCreator""
We should expand and improve this logic. One thing we should do is create a new label called ""Subject"" under ""People"" if dcSubject is an agent.

*Suggested updated description*
For each agent, look for all fields in all proxies (europeanaProxy:true and europeanaProxy:false) and try to match the agentΓÇÖs about with a URI provided as dcCreator, dcContributor, dcSubject, dcPublisher, dcRights. 
* If no match is found, we should not list ΓÇ£PEOPLEΓÇ¥ on the item display page at all. 
* If a match is found: 
** Display in PEOPLE: 
*** The preferred label of the agent(s) in the proper language under the correct label (so either Creator, Contributor, Subject, Publisher, Rights, etc).
*** If there is no preferred label in the proper language, display the English preferred label if it exists
*** If there is no preferred label with a language, display the first preferred label if it exists
*** If there is no preferred label at all, display the first alternative label 
*** If there is no alternative and preferred label at all, display foaf:name
*** If there is no label, show the URI instead
** If one value for a property is found to be an agent and displayed in PEOPLE, we should not display the value under the original field (Subject in CLASSIFICATIONS, Publisher in PROVENANCE, Rights in COPYRIGHT)

*Acceptance criteria*
For record: http://www.europeana.eu/portal/record/2048005/Athena_Plus_ProvidedCHO_Nationalmuseum__Sweden_18536.html
""Anders Zorn"" should be listed as contributor and ""Alexander Roslin"" as creator. In another language, the localised label should be displayed instead.

For record: http://www.europeana.eu/portal/record/2048612/data_item_cjh_lbiarchive_oai_digital_cjh_org_1630385.html
There shouldn't be anything under People > Creator. We should have People > Subject :Bettelheim family. Friedlandt, Menasse. Harnik, Hans. Harnik, Mendel. Harnik family. 

Same for record: http://www.europeana.eu/portal/record/2048703/object_HA_1159.html
The URI http://viaf.org/viaf/100192194 should be listed under ""People"" > ""Subject"" (as the URI is not dereferenced)"
"Taking learnings and logic from EC-10900.

Subject, places (http://www.europeana.eu/portal/en/record/2064102/Museu_ProvidedCHO_Stiftung_Preussische_Schl_sser_und_G_rten_Berlin_Brandenburg_292025.html?debug=json for instance)."
need to come up with a short survey for exhibitions in Hotjar / hotjar feedback button , but the code needs to be added to the exhibitions pages. 
See EC-10861, last comment.
"Follow-up on EC-10586.

* We should pass along the search query (if we have it) to the Newspaper URL in order for it to be highlighted, eg http://www.theeuropeanlibrary.org/tel4/newspapers/issue/3000116311519?query=und. Alternatively, we could offer a search box to search inside the Newspaper, but I think this needs to be part of the embedded frame and not of Collections."
"Follow-up to EC-10867.

* To implement the design and logic according to Carlos' video, similar to the IMAGE facet (frontend).
* To group and label the facets (backend), logic for old portal here (Java):
https://github.com/europeana/portal/blob/89e7253a9e22050294c53a1636df4b59813ea162/portal2/src/main/java/eu/europeana/portal2/querymodel/query/EuropeanaRightsConverter.java
* Update the labels as following: Yes With Attribution => Free re-use, Yes With Restrictions => Limited re-use, Only With Permission = No re-use (frontend, backend?)
* Add a Google Analytics tracking code to the ""Show specific licenses"" link (don't forget to document in Wiki here)

Additional information about its logic:
* When ""Show specific licenses"" is expanded, it should remain so even after a search.

Example:
I click ""Yes, with attribution/Free re-use"", and then select ""Public Domain"" and also ""Out of copyright"" from another specific license.
I will get all records which match either Public Domain OR Out of copyright, and the ""Yes with attribution/Free re-use"" checkbox will be unchecked. 
All specific licenses are visible."
"For at the end of sprint 25.

Editorial:
* Update the Fashion Collection on Acceptance (perhaps also add in production, TBC)
* Add a roadmap static page (on Acceptance/Test & Production)

Deploy:
* Γ£ö update styleguide ref to http://styleguide.europeana.eu/v/0.2.42
* Γ£ö #1228: Update Jenkins job to register with ELK
* Γ£ö EC-10920: version update of europeana-blacklight (merge, tag, publish on rubygems, update Collections Gemfile ref)
* Γ£ö #1211: ENV var SCHEDULE_FEED_TUMBLR"
"All those who were made in EC-10803.

See children:
* Update the Thematic Collection block in the middle of the page (the grey one as in the latest Fashion design in InVision).
* Add the tagline for the thematic collections.
* Change the ripples and make them less prominent.
* Add a ""Browse"" option to all landingpages. Options: ""Images"", ""Videos"", ""Sounds"", ""Texts"", they should all link to a &type=TYPE&media=true search query for that collection (or for everything if its from the homepage)."
According to design, as was the outcome of EC-10693.
"Example:
http://www.europeana.eu/portal/record/2059211/dyn_portal_index_seam_page_alo_aloId_10905.json

Reported by CNRS:
https://basecamp.com/1936492/projects/4984360/messages/58091367
who are very bothered about it."
"In Virtual Exhibitions we have the notion of an Exhibition which is a preview (""Faces of Europe""), and which chapter(s) also have full Exhibitions which live elsewhere in the Virtual Exhibitions platform. We should come up with a solution (or likely different solutions) as to how we can improve the user flow and navigation in this particular scenario.

For the short term, we will need to complete ticket EC-10937 in order to solve the most urgent need.

On the mid-long term, we should alter the Virtual Exhibitions foyer page to help make it clear to users what the relationship is between Faces of Europe and its ""full"" related Exhibitions.

Secondly, we should think of alternate improvements. Suggestions have been risen to:
* Show ""Preview"" and ""Full exhibition"" as part of the chapter navigation below the intro page of a Virtual Exhibition, so we can route a user to either the preview or the full exhibition on a particular subject.

[~panagiotiskyrou639031] Can you start this task please? If you need more context, let me know."
"We should do push a new release of Virtual Exhibitions to production once acceptance testing is completed.

To be shared with Exhibitions/content team:
EC-10882 - Add edm:country to credits
EC-10889 - VE internal linking system not working

EC-10937 also should go in here."
"Improvements to the way we do faceting in iterations.
After some spiking in EC-10831, the thing we will pick up next is the implementation of the improvements for faceting on mobile viewports.

*As a user I would like to be able to refine my search from the top of the search results on mobile viewports.*

As for this iteration, I would like us to, for mobile viewports:
* Move the facets up from bottom of the page to top of the search results page.
* Collapse the facets by default.
* Have a link or button (proposals welcome) for ""Refine your search"" on top of the search results. If this one is clicked, the first 4 facets (as now on mobile) should be expanded. 
* Selecting a facet should collapse the search again in the next page.

We should have the design + implementation in this sprint.

This iteration shouldn't change anything on bigger viewports. We'll deal with that in the next ones, for this sprint its just dealing with the most important change we should make for our mobile users."
"Assess the use of Sidekiq for background job processing instead of Delayed Job.

DJ with Rails' ActiveJob does not support job prioritisation (see EC-10899), which we really need with thousands of error report email jobs and just a few blog post update jobs (the latter of which need to be higher priority)."
"*Update on this ticket for sprint 29:
Despite us adding a 301 redirect on the non-www domain to the www domain, Google Analytics still reports to receive traffic on the non-www domain. We should find out how and solve this.*

Google Analytics says:
{code:java}Property http://www.europeana.eu is receiving data from redundant hostnames. Some of the redundant hostnames are:
europeana.eu
www.europeana.eu
Redundant hostnames are counted as separate rows in reports, so hits that are going to the same page on your site from different hostnames will be split into multiple rows. With data split across multiple rows, traffic to specific pages will appear lower than it actually is.

To avoid this problem, consider setting up a 301 redirect from one of your redundant hostnames to the other, or create a search-and-replace filter that strips ""www."" from hostnames.
{code}

Since www is in our canonical URLs I suggest we redirect europeana.eu to www.europeana.eu - we need to be careful though so that we don't break anything inadvertently."
"Example:
http://www.europeana.eu/portal/record/2064106/Museu_ProvidedCHO_PROBADO_3D__9991.html

As can be seen there is nothing in the right hand column under Can I use it?"
"Implementation of EC-10814.

Google guidelines: https://support.google.com/webmasters/answer/182192?hl=en

*Implementation:*
* All Collections URLs will start http://www.europeana.eu/portal/xy, where xy is a two-letter language code such as ""en"" or ""nl"".
* Requesting a Collections page using a URL with a two-letter language code stores the language in one's session, and displays the page in that language.
* The language menu contains all languages, same as Exhibitions, and will update the users session and reload the page in the new language.
* Requesting a Collections page using a URL without a two-letter language code (as at present), first inspects the session for a language setting and if one is present, redirects to the URL containing that language code. If no language is set in the session, Collections should try to take the language from the users browser. If that cannot be retrieved, the user is redirected to the URL with the site's default language code, ""en"".
* Language codes in the URL take precedence over the session (and will need to update the session).
* Redirects will be handled internally, i.e. by the Collections app and not by Apache, for app-specific session handling and supported language detection.
* Requests for URLs containing unsupported language codes will return a 404, and not attempt to redirect to a supported language.
* To remove the current canonical link in the source, and replace it with:
<link rel=""alternate"" href=""http://example.com/"" hreflang=""x-default"" />
Which should be the non-languaged version.
For each language on each page, we should also include the following link in the source:
<link rel=""alternate"" hreflang=""fr"" href=""http://www.europeana.eu/portal/fr/"" />
It should refer to the current page at all times but then with another language code.

No changes to be made in the level of the sitemap or API.

*Acceptance criteria:*
* The language indicated in the page URL should always be the same as the language where the page is displayed in. If I'm on http://test.npc.eanadev.org/portal/nl/collections/music then the page should be in Dutch.
* The language menu on the upper right corner should contain all available languages, every language should work and should reload the current page with the new language code in the desired language.
* If you request a page without a language code, eg http://test.npc.eanadev.org/portal/collections/music, on your first visit to the site, i.e. with no locale stored in your session, it should redirect you to a language version based on the locale of your browser.
* If you request a page without a language code on your first visit to the site, and have no preferred language set in your browser, it should redirect you to the English version of the page
* All pages without language URLs should still work and redirect you to a version with a language.
* If you request a page with a non-existent language code, a 404 error should be seen.
* If you open Collections in Swedish, and then open a new tab with a Collections URL without a language code, it should remember your other language and should show the new page in Swedish too. 
* The working of the language dropdown on both Exhibitions and Collections should be consistent.
* If you open Collections in Dutch, and then open a new tab with a Collections URL with a different language code, eg Swedish, it should show that and subsequent pages in Swedish.
* Translating content in the CMS by changing the locale using its drop-down must continue to work
* Every page should have alternate <link> elements in the HTML <head> for each available language, and a default without any language

Please ensure testing is done with various language settings and combinations."
"*NOTE THAT THIS WILL ONLY BE NEEDED IF SPIKE #1892 CONCLUDES THAT USING THE PRO RSS FEED IS NOT FEASIBLE*

Implement based on SPIKE EC-10817.

Design/back-end/redirects/alignment end user teams etc.

*Acceptance criteria:*
To make it part of Collections (from a users perspective, so look and feel-wise).

* Show end user blogs inside Europeana Collections - cp. the solution in 14-18 which consumes a Google Blogspot instances feed.
* Use the blog template from the Styleguide/PatternLab
* Have a page with all the end user blogs, paginated, the Blog List
* Each blog has its own 'featured/first' image
* Each blog has categories and tags, such as currently (it should also be possible to filter on tag, a tag which we could use to link it to a Thematic Collection for instance)
* We should keep functionality like social sharing of individual blog posts
* Comments we can live without in the first phase, we might want to add them later. If so, likely via Disqus 

*Implementation suggested in the SPIKE:*
Given that Wordpress supports pagination of RSS feeds, e.g. http://blog.europeana.eu/feed/?paged=2, the simplest approach here is to add a controller to Collections which displays lists of, and individual, blog posts retrieved from the Wordpress RSS feed (and cached in Redis).

URLs would follow the WP convention, i.e. http://blog.europeana.eu/2016/05/mars/ would become http://www.europeana.eu/portal/blog/2016/05/mars/. As Wordpress would remain in place, we would want to redirect its public, non-admin, URLs to Collections.

Advantages of this: little development time (estimated two days), no data migration from Wordpress to another CMS, no development of another CMS, no retraining of bloggers.

Disadvantages of this: any admin preview function would not use the Collections style (unless it is also implemented as a WP theme), different technology stacks for WP and Collections, updates to blog posts would not be updated on Collections immediately.

*Question from David:*
Would it make sense to also in a second SPIKE estimate the effort of migrating to Alchemy? This seems like a bit of a half-measure. Especially since we also need to add support for thematic collection specific events which, if I understand things correctly, simply can't be done in Wordpress but must be done either in the Portal CMS or Alchem"
"To share with Europeana Fashion consortium, on how the new landingpage will look in its entirety.

[~cr.marcelino] we need to work on this at the start of this sprint."
"Deployment notes:
* Γ£ö merge into master & tag Git repo
* Γ£ö adjust Jenkins job to backup db whenever db:migrate is run
* Γ£ö EC-10931, EC-10818: run db:migrate
* Γ£ö EC-10954: update ruby buildpack version to 1.6.18
* Γ£ö EC-10983: replace SCHEDULE_BLOG_* env vars with one SCHEDULE_FEED_BLOGS env var
* Γ£ö EC-10983: increase jobber Jenkins job sleep from 10 seconds to 60 seconds
* Γ£ö EC-10988: add FASHION_HOST and WWW_HOST env vars to Apache CF manifest
* Γ£ö EC-10988: deploy Apache with fashion.europeana.eu virtualhost
* Γ£ö Set styleguide to http://styleguide.europeana.eu/v/0.2.51
* Γ£ö EC-10962: unset ERROR_REPORT_MAIL_TO env var, and remove from CF manifest
* Γ£ö EC-10962: add DISABLE_ERROR_LOGGING=1 env var to CF manifest
* Γ£ö EC-10966: sync Swift files to S3
* Γ£ö EC-10966: set S3 config env vars

Post-deploy:
* Γ£ö *immediately:* set title of ""all"" collection to ""All Items""
* Γ£ö re-run Swift to S3 backup
* Γ£ö Copy over the roadmap page and update it
* Γ£ö Check that error report emails stop
* Γ£ö EC-10962: delete error report email delayed jobs
* Γ£ö EC-10621: Check if browse entry points are properly present
* Γ£ö Check that db backup is in Dropbox. _Was not (see debrief comment), but manual backup was copied._
* Γ£ö Check that Pingdom has been updated with the new styleguide CSS
* Γ£ö EC-10931: remove site.home.strapline from Localeapp
* Γ£ö EC-10966: Decommission Swift containers"
"EC-10889 is solved on test, but upon deploy to production it still doesn't work.

On production there's a unpublished page called Test, and it has a text ""Hello Faces of Europe"" that should link to the preview exhibition
The link says however: portal/exhibitions/en/faces-of-europe, while the actual link is : /portal/en/exhibitions/faces-of-europe.

The starting slash should be added to the link for internal links."
"We've made a lot of improvements in EC-10900 as to the display of agents on the record display.

However, there are still at least two issues we have identified.

*Display of dates with the wrong agent:*
One is that the date of birth & death for agent A show up next to agent B.
Example: http://test.npc.eanadev.org/portal/record/2048005/Athena_Plus_ProvidedCHO_Nationalmuseum__Sweden_18536.html
The dates 1860-02-18 and 1920-08-22 belong to Anders Zorn, this is clear in the agent class.

*Formatting of dates BC:*
The second is that the display is off for some dates.
Example: http://test.npc.eanadev.org/portal/record/2048077/Athena_Plus_ProvidedCHO_Germanisches_Nationalmuseum_N_rnberg___Digitaler_Portr_tindex_obj_33701927.html
The date ""2016-03-22"" is in the metadata as ""-0322"" and should be displayed as such."
"[~andyjmaclean] could you check why on http://test.npc.eanadev.org/portal/search?q= under ""can I use it"" the translation is missing? 
The translation is in LocalAp https://www.localeapp.com/projects/7952/translations?in_locale=23972&search=show-specific but for some reason the connection between the two is missing. 

The same thing goes for http://test.npc.eanadev.org/portal/search?q= under ""Collection"". 
The correct keys should be: 
global.channel.home https://www.localeapp.com/projects/7952/translations/4684680
global.channel.fashion https://www.localeapp.com/projects/7952/translations/4725115
global.channel.music https://www.localeapp.com/projects/7952/translations/4725117
global.channel.art https://www.localeapp.com/projects/7952/translations/4725113

Thank you so much!"
"Example:
http://www.europeana.eu/portal/record/2063612/NO_280_001.html

Says:

CAN I USE IT?
Yes with attribution

should say:

CAN I USE IT?
Yes with restrictions
"
"[~cr.marcelino] I was thinking to use image: http://www.europeana.eu/portal/record/90402/BK_2007_24.html

Text should be:
EN: ""We'll be back shortly!"" in big letters, with underneath in smaller letters: ""We're down for maintenance. Please check back again soon.""
FR: ""Nous serons bient├┤t de retour!"" --- ""Nous sommes en maintenance. S'il vous pla├«t v├⌐rifier ├á nouveau bient├┤t . ""
ES: ┬íRegresaremos en un momento!--- ""Estamos en mantenimiento. Por favor , vuelva m├ís tarde . ""
PL: Wr├│cimy wkr├│tce ! --- Jeste┼¢my w trakcie prac konserwacyjnych . Prosimy sprawdzi─ç ponownie wkr├│tce.
IT: Torneremo presto ! --- Siamo fuori servizio per manutenzione . Si prega di riprovare pi├╣ tardi .
DE: Wir sind gleich wieder da! --- Wir sind f├╝r Wartungsarbeiten heruntergefahren . Bitte kommen Sie sp├ñter wieder .

Social icons included underneath with links to:

Facebook: https://www.facebook.com/Europeana/
Twitter: https://twitter.com/Europeanaeu
Pinterest: https://www.pinterest.com/europeana/

I don't know if it's possible to create a different portal down page for each language. I think it must be because I saw it for twitter but I can't be sure about this. Should we need to put it all in one page; then lose the image.

To summarize:

Acceptance criteria:

- I want to see image
- I want to see text (""we'll be back shortly"" needs to be bigger than "" We're down for... etc"")
- I want to see social Icons for facebook, twitter and pinterest that lead to URLs above
- Preferably a different page for each language, if this can't be done, lose the image and just put all the languages underneath eachother
- I want to see styling needs to be like the portal as we discussed."
"See EC-10932 for background.

We should add the option to the CMS to configure the ripple width for the landing pages (the branding section that is), as its an SVG anyway.
We have 4 thickness options, but should only allow the first 3 to be configured.

*Acceptance criteria*
* This ticket is accepted when there can be 3 options configured for the thickness of the ripples in the branding.
* Carlos' restrictions and info as in his comment should be applied."
"Previous iteration: EC-10900

This iteration will fix some issues, primarily those where dcContributor/creator are literals without an agent entity, these are currently not displayed.

*Updated logic in bold*
For each agent, look for all fields in all proxies (europeanaProxy:true and europeanaProxy:false) and try to match the agentΓÇÖs about with a URI provided as dcCreator, dcContributor, dcSubject, dcPublisher, dcRights.

* *If no match is found but values are present for dcCreator or dcContributor, then list ΓÇ£PEOPLEΓÇ¥ and display the values as they are under dcCreator or dcContributor*
* If no match is found and *also no value is present for dcCreator or dcContributor,* we should not list ΓÇ£PEOPLEΓÇ¥ on the item display page at all.
* If a match is found:
** Display in PEOPLE *the values present for dcCreator or dcContributor that did not have a match if they exist AND* :
*** The preferred label of the agent(s) in the proper language under the correct label (so either Creator, Contributor, Subject, Publisher, Rights, etc).
*** If there is no preferred label in the proper language, display the English preferred label if it exists
*** If there is no preferred label with a language, display the first preferred label if it exists
*** If there is no preferred label at all, display the first alternative label
*** If there is no alternative and preferred label at all, display foaf:name
*** If there is no label, show the URI instead
* If one value for a property is found to be an agent and displayed in PEOPLE, we should not display the value under the original field (Subject in CLASSIFICATIONS, Publisher in PROVENANCE, Rights in COPYRIGHT)

*Acceptance criteria*
This record:
http://www.europeana.eu/portal/record/2024913/photography_ProvidedCHO_Parisienne_de_Photographie_13432_16.html
Should show ""MAURICE-LOUIS BRANGER (1874-1950)"" as Creator.

This record:
http://www.europeana.eu/portal/record/2059220/opac_index_php_lvl_notice_display_id_4776.html
Should show ""Odion Jean-Pierre"" and "" Thibaud Jean-Paul"" as Contributors.

As part of regression testing the full logic, re-run the acceptance tests for EC-10900 as well."
"For instance for Fashion we show all the media types on the landing pages, but they don't have Sounds or 3D.

To be assigned to [~andyjmaclean] when done to adjust the frontend display to a dynamic number of items."
"Our 1 June deploy seems to have broke this, there have been no metrics collected anymore on item views that originate from a search in a Thematic Collection.

See EC-10463 for the original implementation.

If I do this:
* Open Art History collections
* Do a search
* Open an item

And then look at the source, there is also no mention (anymore) of this dimension (which should be dimension1, see https://europeanadev.assembla.com/spaces/europeana-npc/wiki/Google_Analytics)."
"On an IPad/IPhone/Android Tablet:
Look at the Object:
9200173/9B976C77421CE43F3BDA72EF47BCCC08AF94A238.html (Both Prod and Test)
Invoke the IIIF Viewer by clicking the doubleheaded arrow in the top-right.
The Image is now in full-screen mode (resize/move).
But the controls are shifted up, so the double arrow to get out of the Viewer is not reachable.
Since the IPad/IPhone/Android Tablet has no keyboard, there is also no escape key to use.
"
"So that multi-line stacktraces (for debugging errors) are registered as one event, instead of only the first line coming through.

See this for a good overview: https://kartar.net/2015/12/structured-logging/

Will require the assistance of [~stzanakis] to prepare the ELK stack to parse the JSON format.

In production env at least, but keep to a more human-readable format in development."
"To replicate:
Go to the portal landing page
Go to the music landing page
Make a search. Breadcrumb says Return to home / Europeana Music / Results
Click an item. Breadcrumb says Return to home / Results / Item. Note that Europeana Music has been lost, it should be Return to home / Europeana Music / Results / Item

Note:
This could possibly be the reason EC-10463 was broken soon after it was introduced?"
"General review and update plus trying to explicitly filter in or out content based on input from Joris and Douglas.

*Notes to self:*

* For both themes ensure BNF content gets pulled in (now that they support IIIF)
* For Art History, ensure that Catalan industrial design dataset gets pulled in. It's DATA_PROVIDER:""Museu del Disseny de Barcelona ""   (yes, whitespace at the end, sigh!)"
"Co-effort between Rene and Remy.

In general: latest 2 versions of all major browsers. But we also need to put in some restrictions to maybe some very old devices etc."
"As an outcome of the hackweek, there was more time for an overview of our current design and address some sections that could use some improvement.

Most of the design improvements are related to smaller breakpoints.

For a comprehensive breakdown of our breakpoint check out [wiki|https://europeanadev.assembla.com/spaces/europeana-npc/wiki/Breakpoints_and_screen_sizes].

This epic is completed when all its subtasks have been closed."
"This ticket results from testing EC-10903

When looking at this object:
/92099/BibliographicResource_2000081662432.html
There is a problem with to much thumbnails shown. (See image.)
When hovering over the thumbnails you see the URL's they point to.
They seem to stem from this part of the EDM:
""hasView"": [
        ""http://gallica.bnf.fr/ark:/12148/btv1b8490090z/f1.zoom"",
        ""http://gallica.bnf.fr/ark:/12148/btv1b8490090z/texteBrut"",
        ""http://gallica.bnf.fr/ark:/12148/btv1b8490090z.swf""
      ]

Which are no supported media.

*Acceptance criteria:*
This ticket is accepted when hasViews which are used for IIIF are not displayed as thumbnail/additional media."

"*Pre-deploy:*
* Γ£ö update ELK to parse JSON
* Γ£ö #1343, #1340: Apache repo merge

*Deploy:*
* Γ£ö update styleguide
* Γ£ö update styleguide env var to http://styleguide.europeana.eu/v/0.2.55
* Γ£ö #1343, #1340: update Apache
* Γ£ö EC-10949: set FEEDBACK_MAIL_TO env var for Slack
* Γ£ö EC-11018: remove env var DISABLE_ERROR_LOGGING
* Γ£ö EC-11001: run db:migrate

*Post-deploy:*
* Γ£ö Update GitHub release notes & roadmap page on Collections
* Γ£ö EC-10970: Configure and reset the Optimizely A/B campaign, to make sure it only runs on europeana.eu domains and starts with 0

*Translations:*
* Update licenses to licences in English.
* Γ£ö Translate the straplines for the Thematic Collections (they should be updated in the CMS).
* Translate site.object.meta-label."
"Follow-up on EC-10872.

*Tasks to do:*
* Change the copytext from ""Your search for dffgkdffgnyergnfg returned no results"" to ""Your search for dffgkdffgnyergnfg returned no results, try to search for a broader search term or visit our search tips page for more help.""
* Add a link below this text/notice with a link to the search tips page (/portal/search.html)
* Show the 3 latest published browse entry points under the notice, should be in the same style and template as the browse entry points on the Thematic Landingpages."
Follow-up to EC-10715.
"As with Collections (see EC-10966).

At the same time, make Exhibitions storage backend-agnostic (via fog) to ease development setup.

*Acceptance criteria*
* All static files moved from Anynines Swift to S3.
* All new static files to be automatically uploaded to S3.
* All static files read from S3.
* Exhibitions storage to be made backend-agnostic.

When this ticket is completed please also add a task to the release ticket of Exhibitions to make sure we do another migration once we go live."
"Prompted by EC-10995.

We should switch the API Record method calls to retrieve the record in JSON-LD. That will give us a ready-made relational representation of the various objects described in the response and will make it much easier to query for properties of one such object, e.g. DOB of an agent, as contrasted against reconstructing relations from the default JSON response.

Implementation:
* The Europeana Ruby API client is already able to request the record in JSON-LD, but it just parses as JSON and does nothing further. It should instead use the Ruby JSON-LD library to parse into JSON-LD.
* The Europeana Blacklight adapter would need to be adapter to work with the JSON-LD response format. (Not to replace its handling of the JSON one, but extended to support either.)
* The portal's record page would need to be heavily refactored to work against the JSON-LD response.

Considerations:
* Are API requests for JSON-LD more expensive than those for JSON? (Benchmarks suggest indistinguishable response times.)
* If yes, can the API handle all portal record requests switching to JSON-LD?"
"Iteration 1: EC-11004.

For this iteration:
* Desktop version of the new facets, with notes from the last ticket in mind. Design only.

Might be best to tackle along with all other facet improvements/related changes.

Note to self: for next iteration, also do the things listed in EC-11004."
"Implement EC-11002. 

To replace the layout of the app for the maintenance page with the new static page."
"On 10th July 2016, the acceptance site was noted (by @remygardien) to have started displaying some other website not associated with Europeana.

This issue only affected it if accessed through the Apache reverse proxy. If accessed at the portal app's URL directly, it showed up as expected.

The CNAME record for acceptance Apache was confirmed to be correct, pointing to Pivotal's SSL service, as do test and production.

Restarting the acceptance Apache (by [~cskodras]) fixed the issue, leading us to speculate that this is (something like) an internal Apache DNS/route caching issue.

To prevent this issue recurring in future, potentially on production, it is proposed that all of the ProxyPass directives in Apache should set disablereuse=on. See http://httpd.apache.org/docs/current/mod/mod_proxy.html#ProxyPass"
"(Following up on [~DavidHaskiya]'s idea on EC-10958.)

All records having a hierarchy will have either dcterms:haspart or dcterms:ispartof. If a record has neither, it has no hierarchy. Therefore, in the latter case, do not retrieve the hierarchy data from the API.

This will eliminate one of the three API calls made on each record page for ~ 65% of records, improving response times.

Acceptance criteria:
# Records with hierarchies continue to load and display the hierarchy
# Records with no haspart of ispartof do not request hierarchy data from the API, resulting in a notable improvement in response time (~ 500 ms)"
"Observed on Chrome by 2 of 3 testers.)

Load the record http://test.npc.eanadev.org/portal/en/record/2048604/data_item_onb_abo__2BZ17084070X.html

When it is displayed in Chrome (for some users), the view jumps down to the hierarchies.
"
"The What's new page unintuitively does not show new collections sorted by date of publication but by number of items. The date is also displayed only as MM-YYYY which doesn't give a user a real sense as to how recent the publication is.

The title of the page is also unfortunate as it hints at general news of any sort.

I suggest 4 changes:
1. Sort on date of publication instead (from most recent to least recent)
2. Show publication date as DD-MM-YYYY
3. Indicate in the table when a row represent an update of a dataset and when it is an entirely new dataset
4. Retitle the page to ""New collections"" or ""New content""


"
"Following on from EC-11043 and EC-10962, our logging/reporting strategy should be unified across all Ruby/Rails apps.

* Document the policy in the [Ruby dev style guide|https://github.com/europeana/europeana-dev-guides/blob/develop/ruby.md]
* Extract from portal/collections into a reusable gem, and use that in our other Ruby/Rails apps"
"As identified by Hakiri: https://hakiri.io/projects/d1403f5a7fbf44/stacks/e427a8ef93bc47/builds/ab7e966864cdca

Either fix it, or mark it as a false positive in Hakiri, before release v0.1.5 (EC-11065)"
Gather all user research and translate this to design suggestions for VEs. 
"Europeana wants to open the VEs up for partners soon. 
We need to investigate how it works with assigning different roles in Alchemy. 

The idea is that Europeana [~Maggy] will be the ""super user"" that has the power to publish exhibitions. 
The partner however, needs to be able to upload their content and create their own exhibitions.

Alchemy has the features to do this, but it's currently not working. 
We need to investigate what the best way should be do make this happen from the back-end. 
"
"Filters have been updated for Music and Art History in acceptance. Before going live the Solr warmups should be updated correspondingly.

Music:

{code:java}qf=(PROVIDER:""Europeana Sounds"" AND provider_aggregation_edm_isShownBy:*) OR (PROVIDER:""DISMARC"") OR (DATA_PROVIDER: ""National Library of France"" AND (what:musique OR title:musique)) OR (DATA_PROVIDER:""S├ñchsische Landesbibliothek - Staats- und Universit├ñtsbibliothek Dresden"" AND TYPE:SOUND) OR (DATA_PROVIDER:""Kirsten Flagstadmuseet"") OR (DATA_PROVIDER:""Ringve Musikkmuseum"") OR (DATA_PROVIDER:""Netherlands Institute for Sound and Vision"" AND provider_aggregation_edm_isShownBy:* AND (music OR muziek)) OR  (DATA_PROVIDER:""TV3 Televisi├│ de Catalunya (TVC)"" AND provider_aggregation_edm_isShownBy:* AND musica) OR (PROVIDER:""Institut National de l'Audiovisuel"" AND (musique OR opera OR pop OR rock OR concert OR chanson OR interpretation)) OR ((what:(music OR m├║sica OR musique OR musik OR musica OR musicales OR muziek OR muzyka OR muzic─â OR ""zen├⌐s el┼æad├ís"" OR ""notated music"" OR ""traditional and folk music"" OR ""western classical music"" OR ""folk songs"" OR jazz OR ""popular music"" OR ""sheet music"" OR score OR ""musical Instrument"" OR partitur OR partituras OR gradual OR libretto OR oper OR concerto OR symphony OR sonata OR fugue OR motet OR estampie OR ""gregorian chant"" OR saltarello OR organum OR ballade OR chanson OR galliard OR laude OR madrigal OR pavane OR ricercar OR tiento OR toccata OR cantata OR chaconne OR gavotte OR gigue OR minuet OR partita OR passacaglia OR sarabande OR sinfonia OR hymnes OR lied OR mazurka OR ""music hall"" OR quartet OR quintet OR requiem OR rhapsody OR rondo OR scherzo OR ""sinfonia concertante"" OR waltz OR ballet OR zanger OR chanteur OR chanteuse OR s├Ñng OR s├Ñngare OR s├ñnger OR cantante OR sopran OR tenor OR s├ñngerin OR composer OR compositeur OR orchestra OR orchester OR orkester OR orchestre OR concert OR concierto OR konsert OR konzert OR koncert OR gramophone OR ""record player"" OR phonograph OR fonograaf OR fonograf OR grammofon OR skivspelare OR ""wax cylinder"" OR jukebox OR ""cassette deck"" OR ""cassette player"")) AND (provider_aggregation_edm_isShownBy:*)) OR (""gieddes samling"") OR (musik AND DATA_PROVIDER:""Universit├ñtsbibliothek Heidelberg"") OR (title:antiphonal AND DATA_PROVIDER:""Bodleian Libraries, University of Oxford"") OR (title:(gradual OR antiphonal) AND europeana_collectionName: ""2021003_Ag_FI_NDL_fragmenta"") NOT (DATA_PROVIDER:""Progetto ArtPast- CulturaItalia"" OR DATA_PROVIDER:""Internet Culturale"" OR DATA_PROVIDER:""Accademia Nazionale di Santa Cecilia"" OR DATA_PROVIDER:""Regione Umbria"" OR DATA_PROVIDER:""Regione Emilia Romagna"" OR DATA_PROVIDER:""Regione Lombardia"" OR DATA_PROVIDER:""Regione Piemonte"" OR DATA_PROVIDER:""National Sz├⌐ch├⌐nyi Library - Hungarian Electronic Library"" OR DATA_PROVIDER:""Rijksdienst voor het Cultureel Erfgoed"" OR DATA_PROVIDER:""Phonogrammarchiv - ├ûsterreichische Akademie der Wissenschaften; Austria"" OR DATA_PROVIDER:""Minist├¿re de la culture et de la communication, Mus├⌐es de France"" OR DATA_PROVIDER:""CER.ES: Red Digital de Colecciones de museos de Espa├▒a"" OR DATA_PROVIDER:""MuseiD-Italia"" OR DATA_PROVIDER:""Narodna biblioteka Srbije - National Library of Serbia"" OR DATA_PROVIDER:""National and University Library in Zagreb"" OR DATA_PROVIDER:""National Sz├⌐ch├⌐nyi Library - Digital Archive of Pictures"" OR DATA_PROVIDER:""Vast-Lab"" OR DATA_PROVIDER:""Herzog August Bibliothek Wolfenb├╝ttel"" OR DATA_PROVIDER:""Centro de Documentaci├│n de FUNDACI├ôN MAPFRE"" OR PROVIDER:""OpenUp!"" OR europeana_collectionName:""9200123_Ag_EU_TEL_a1023_Sibiu"" OR europeana_collectionName:""2048319_Ag_EU_ApeX_NLHaNA"" OR RIGHTS:*rr-p* OR what:""opere d'arte visiva"" OR what:""operating rooms"" OR what:""operating systems"" OR what:""co-operation"" OR what:operation)
{code}

Art History:

{code:java}qf=(PROVIDER:""Europeana 280"") OR (DATA_PROVIDER:""├ûstasiatiska museet"" NOT TYPE:TEXT) OR (DATA_PROVIDER:""National Library of France"" AND what:(poster OR engraving OR enluminure OR drawing OR estampe OR peinture)) OR (DATA_PROVIDER:""Medelhavsmuseet"") OR (DATA_PROVIDER:""Rijksmuseum"") OR (europeana_collectionName: ""91631_Ag_SE_SwedishNationalHeritage_shm_art"") OR (europeana_collectionName:""2048012_Ag_EU_AthenaPlus_OKV"") OR (europeana_collectionName:""9200424_AG_EU_TEL_a1400_NLRomania"") OR (DATA_PROVIDER:""Biblioth├¿que municipale de Lyon"") OR (DATA_PROVIDER:""Museu Nacional d'Art de Catalunya"") OR (DATA_PROVIDER:""Museu del Disseny de Barcelona "") OR (DATA_PROVIDER:""Victoria and Albert Museum"") OR (DATA_PROVIDER:""Slovak national gallery"") OR (DATA_PROVIDER:""Thyssen-Bornemisza Museum"") OR (DATA_PROVIDER:""Museo Nacional del Prado"") OR (DATA_PROVIDER:""Statens Museum for Kunst"") OR (DATA_PROVIDER:""Hungarian University of Fine Arts, Budapest"") OR (DATA_PROVIDER:""Hungarian National Museum"") OR (DATA_PROVIDER:""Museum of Applied Arts, Budapest"") OR (DATA_PROVIDER:""Sz├⌐pm┼▒v├⌐szeti M├║zeum"") OR (DATA_PROVIDER:""Museum of Fine Arts - Hungarian National Gallery, Budapest"") OR (DATA_PROVIDER:""Schola Graphidis Art Collection. Hungarian University of Fine Arts - High School of Visual Arts, Budapest"") OR (PROVIDER:""Ville de Bourg-en-Bresse"") OR (DATA_PROVIDER:""Kulturkvartalet"") OR (DATA_PROVIDER:""Universit├ñtsbibliothek Heidelberg"") OR (PROVIDER:""Institut National de l'Audiovisuel"" AND (picasso OR ""salvador dali"" OR ""claude monet"" OR rodin OR ""van gogh"" OR louvre OR chagall)) OR ((what:(""fine art"" OR ""beaux arts"" OR ""bellas artes"" OR ""belle arti"" OR ""schone kunsten"" OR konst OR ""bildende kunst"" OR ""Opere d'arte visiva"" OR ""decorative arts"" OR konsthantverk OR ""arts d├⌐coratifs"" OR paintings OR schilderij OR pintura OR peinture OR dipinto OR malerei OR m├Ñleri OR m├Ñlning OR sculpture OR skulptur OR sculptuur OR beeldhouwwerk OR drawing OR poster OR tapestry OR gobelin OR jewellery OR miniature OR prints OR tr├ñsnitt OR holzschnitt OR woodcut OR lithography OR engraving OR chiaroscuro OR ""old master print"" OR estampe OR porcelain OR mannerism OR rococo OR impressionism OR expressionism OR romanticism OR ""Neo-Classicism"" OR ""Pre-Raphaelite"" OR Symbolism OR Surrealism OR Cubism OR ""Art Deco"" OR Dadaism OR ""De Stijl"" OR ""Pop Art"" OR ""art nouveau"" OR ""art history"" OR ""http://vocab.getty.edu/aat/300041273"" OR ""histoire de l'art"" OR kunstgeschichte OR ""estudio de la historia del arte"" OR Kunstgeschiedenis OR ""illuminated manuscript"" OR buchmalerei OR enluminure OR ""manuscrito illustrado"" OR ""manoscritto miniato"" OR boekverluchting OR kalligrafi OR calligraphy OR exlibris)) AND (provider_aggregation_edm_isShownBy:*)) NOT (what: ""printed serial"" OR what:""printedbook"" OR ""printing paper"" OR ""printed music"" OR DATA_PROVIDER:""NALIS Foundation"" OR DATA_PROVIDER:""Minist├¿re de la culture et de la communication, Mus├⌐es de France"" OR DATA_PROVIDER:""CER.ES: Red Digital de Colecciones de museos de Espa├▒a"" OR PROVIDER:""OpenUp!"" OR PROVIDER:""BHL Europe"" OR PROVIDER:""EFG - The European Film Gateway"" OR DATA_PROVIDER: ""Malta Aviation Museum Foundation"" OR DATA_PROVIDER:""National Sz├⌐ch├⌐nyi Library - Digital Archive of Pictures"" OR PROVIDER:""Swiss National Library"" OR what:""photographic prints"" OR ""Thom's Street Directory"")
{code}"
"Currently, the size of the hero image (or featured exhibition) fills the entire screen so to a user it's unclear that there are other exhibitions when they scroll down. 

Suggested solutions: 

- Reduce the size of the hero image like we did for the portal hero image
- OR: add an arrow to the hero image that points down so the user can see that they can scroll down. 
- OR: insert a tooltip that explains that the user can scroll down. 
"
"We have the voyer in English, but all the major languages should have a foyer. 

"
"Referring to http://www.europeana.eu/portal/en/exhibitions/foyer

So what do I find inconsistent? The mix of labels that refer to themes (e.g. Art History), domains (libraries), names of microsites (Europeana 1914-1918) and names of specific partners (Hallwylska). I would suggest it should always be themes. And actually it has been decided in the past that all exhibitions are to be matched to themes! I don't believe that has changed.

Faces of Europe should be Art History. Put the chapter number in the title. The chapter number should also be in the <title> and page URL. Having both http://www.europeana.eu/portal/en/exhibitions/revolution-and-war and http://www.europeana.eu/portal/en/exhibitions/faces-of-europe/revolution-and-war is poor SEO and URL-structure.

Europeana 1914-1918 should be First World War.

Darwinism... should be Natural History rather than History (more specific and also a potential future channel).

Royal Book Collections should be Art History. Possibly History of Literature but the exhibiton focuses more on the art aspect of illuminated manuscript than the literature aspect.

Pablo Picasso should be Art History

European Film Gateway should not be a label, the label for their exhibition should be First World War.

The wiki ones I'd label Architecture

The sport one I'd label History or possibly History of Sport

The Biodiversity Heritage Library ones should all be Natural History

Trip to Egypt is tricky but I'd put it in Photography (as this will be a future channel). One could also do that one and the TEL travel exhibition as Travel History.

The European Library ones would in order be:
History, History of Science, History, Art History, Architecture and History. The TEL exhibition Reading Europe is missing entirely and should be included - it's their flagship exhibition, I'd label it History of Literature and so should also the Book 1514-2014 exhibition be. *NOTE*: As far as I know all TEL exhibitions will be shut down at the end of the year. The only exhibition there's talk about saving is Reading Europe. Note this is not my decision, that's for Nienke/Uldis/Adrian to decide (but note that there are no development resources for this, they'd have to migrate Reading Europe and others to the new CMS manually).

Athena to Art History or possibly, Religion

EUScreen I'd label History of Television




"
"See EC-10958 for context; in summary, multiple API requests on the record page cause it to be very slow to load, making for an awful user experience.

This ticket is to investigate the feasibility of using multiple threads (in Ruby) to run those HTTP requests concurrently.

Of potential use:
* https://github.com/typhoeus/typhoeus
* http://andrey.chernih.me/2014/05/29/downloading-multiple-files-in-ruby-simultaneously/
* http://stackoverflow.com/questions/8778732/parallel-http-requests-in-ruby"
"(Our versioning is too conservative. Let's have each release be given its own new minor version, e.g. 0.5.0, 0.6.0. Hot fixes get tagged as 0.5.1, 0.5.2.)

*Deployment:*
* Γ£ö EC-10965: Update PHP buildpack on Apache to https://github.com/cloudfoundry/php-buildpack.git#v4.3.17
* Γ£ö Set styleguide version via env var to v0.2.56.2
* Γ£ö EC-11042, EC-11092: Update Jenkins job to always run db:migrate and db backup, but never put up the maintenance page, and not scale instances.

*Post-deployment tasks*
* Update release notes in Github.
* Update roadmap page on Collections."
Apply the same solution as we did in Collections in EC-11073.
"Consolidation of Exhibitions & Collections with the objective to make them one single application (being Collections + Exhibitions) running on Alchemy.

*Acceptance criteria*
* Feasibility
* Tasks required
* Effort required

Previous spike, with very useful comments and notes: EC-10944"
"*Pre-deploy:*

* In order to move away from OpenStack and to AWS S3:

# Γ£ö The https://github.com/europeana/fogup tool needs to be run to backup static files, from production Swift to production S3
# Γ£ö The following config values will need to be set in .env via jenkins:
FILE_PROVIDER: AWS
AWS_ACCESS_KEY_ID: key_id
AWS_SECRET_ACCESS_KEY: access_key
AWS_REGION: region
AWS_DIRECTORY: directory
AWS_IMAGE_PREFIX: images/
AWS_ATTACHEMENT_PREFIX: attachments/
* Γ£ö For EC-11058, RAILS_RELATIVE_URL_ROOT: /portal should be set in .env via jenkins
* Γ£ö Set styleguide version via env var to v0.2.56

*Post-deploy:*
* Γ£ö Re-sync production Swift to production S3 again, to catch any stored during deploy
* Γ£ö Ensure auto-scaling is enabled"
Currently something with regards to search & indexing is broken in 14-18, [~richard.doe] knows. At least, he knew when we discussed this way back when. To update the ticket later.
"NOTE: THIS EPIC IS WIP AND WILL HAVE MANY CHILDREN ADDED TO IT!

When searching:
Across all newspaper issues
Across all issues from one newspaper title
Within one issue of a newspaper
Within one article in one issue of a newspaper


To be considered as acceptance criteria in all search cases:
* This all means search within the freetext, not just metadata.
* Phrase search, Boolean operators, Wildcards, etc. Basically, can we support the Lucene query syntax ? Very good for power users.
* Hit highlighting, synced between the OCR:ed text and the image important. Helps the user a lot to evaluate their hits. World Digital Library does this well, https://blogs.loc.gov/digitalpreservation/2014/08/making-scanned-content-accessible-using-full-text-search-and-ocr/ and their solution for freetext search is open source and Solr based. So possibly smth to learn form.


"
"STUB

Choosing:
Individual article (or page?)
Issue


In formats like:
PDF (text + images)
ASCII/TXT (text only)
METS-ALTO (text + images?)
JPG2000 (images only?)
"

"To make misc. design improvements primarily based on User Intelligence design. 

To do:
* Adding Thematic Collection background images to the search box on the search result page.
* Getting rid of the background colour on facets and implementing some of the other suggestions.

For [~panagiotiskyrou639031] and [~cr.marcelino] to work together."
"Our item display needs some rework, as we are adding more and more to it and also plan to add even more to it in the near future. We should work on/test/iterate on an updated information architecture for the item display, which is the scope of this ticket.

Things we need to add to the item display:
* Show the planned new ways for the user to navigate from an item page to curated content
** Specifically: Item to Galleries, Item to Blog posts, Item to Exhibitions, Items to Entity pages, Items to Thematic collections, 
* Try to increase conversion by more prominent display of similar items and other navigational pathways to content (esp. curated content - see bullet above)
* User annotations incl. actions to add them
* Data provider logos (DONE, but needs to be taken into account)
* User contributed stories (14-18) - design challenges: Custom display? Or folded into a generic item display? 
* Improved/reviewed display of related items. As in related in the metadata, like for the [newspapers issues series|http://www.europeana.eu/portal/en/record/9200384/BibliographicResource_3000117070235.html]
* Improved/reviewed display of information that ties in with the media (colours, image metadata, technical metadata).
* Trying to not overwhelm casual users with too much metadata while showing professional users full metadata (this could e.g. be by not showing all metadata at once by default but let that setting be cookie based so that users who like to see all metadata can have that as the default)
* Accommodate a fairly large amounts of calls to actions while _featuring_ only a few. Apart from currently available actions we have a number of planned actions to add/review: Download/View metadata, My Europeana (Save item, Save search, Create gallery/set), Embed

*Notes*
While there is not a coherent/complete item design proposal with all of the aspects above many of them exist in simple wireframe form as they were part of the initial design efforts that preceded and paralleled the development of Europeana Collections. These designs are in Invision. While they don't need to be followed they should be reviewed and wheels that don't need redesign should not.


"
"To do (see subtasks):

* Implement facets on mobile as spiked here: EC-11004.
* Implement collapsable/expandable facets: EC-11061.
* Track facet usage via Google Analytics.
* Copytext changes: ""COUNTRY"" to ""PROVIDING COUNTRY"" and ""Only items with links to media"" to ""Items with direct links to media files"" and ""Aggregator"" to ""???"" to make them more clear."
"First implementation based on EC-10706.

*Changes to be made to the date facet:*
* Stick to proxy_dcterms_created as source for the date facet (no change, just re-emphasise).
* Editorial: Update the facet label to ""Date created"" instead of ""Date"".
* Add a ""Filter"" button next to it, as currently the only way to submit the text input is to press the enter button.
* We should show the date filter in the facets below the search box, so users can unclick their selections easily. ""DATE CREATED: 1900-1920"" it should become.
* See if its possible to add a middle value to the scale, to give users a better sense of the scale of the date range.

*Bugs that need to be fixed on the current facet:*
* If you do a ranged search, your values aren't retained.
* On tablets and phones the date range area exceeds the facet area.

*Later iterations:*
* Consider moving the date facet, or a part of it, to the top of the page, in more of a timeline view with the possibility to select a time range (similar to DigitalNZ's implementation, see EC-10706).
* Food for thought/idea: we could also go for a more facet-like date facet with grouped periods, but then these periods should adapt to the content. If there is a lot of content for the 20th century we should have facet groups for each decade. If there is not a lot from the 16th century we could do with one group for that century. "
"A better version of EC-10874.

Keep all the mechanics and acceptance criteria from EC-10874, with the only change being a visual one.
The indicator should be next to the title of the promo box (and not the label) and should be shown like this:
https://projects.invisionapp.com/share/CS146E9BR#/screens/174960581_Collections_Homepage

Note that all the mechanics etc. should still be into place."
"

*Problem:* 
The language icon in the portal is not consistent with the language icon we use in exhibitions. 

*Solution:*
Exhibtions is a part of the portal, we need this to be the same icon.  

See: http://www.europeana.eu/portal/en for the icon we should use for http://www.europeana.eu/portal/en/exhibitions/foyer

Acceptance criteria: 
 - I would like to see the same icon on http://www.europeana.eu/portal/en and http://www.europeana.eu/portal/en/exhibitions/foyer"
"placeholder ticket

white space etc. https://projects.invisionapp.com/share/AC7YHSNN9#/screens/174995321
"
"

1. As a user I want to be directed to the new exhibitions voyer (http://www.europeana.eu/portal/en/exhibitions/foyer) at all times. 
2. As a super-admin user I still need to have access to the old exhibtion-gallery (http://exhibitions.europeana.eu/) 
3. As a user I still want to be able to land directly on exhibitions in the old foyer via (e.g.) Google or old blogposts.

*Problem:*
The old exhibtions voyer (http://exhibitions.europeana.eu/) is still an active landing space for Europeana users, although we have the new exhibitions in place. We would like all users to land on the new voyer (http://www.europeana.eu/portal/en/exhibitions/foyer) , but (for editorial purposes) we still need the old Gallery to be available for Europeana personell. I hope that this will not intervene with people who come directly to exhibitions on the old platform via Google or when the link is given in a blogpost or something.  

*Solution:* 
Redirect users to the new voyer, but keep the old voyer available for Europeana and keep all exhibitions that are on  http://exhibitions.europeana.eu/exhibits/... still available. 

*Acceptance criteria:*
- I want http://exhibitions.europeana.eu/ to redirect to http://www.europeana.eu/portal/en/exhibitions/foyer
- I want http://exhibitions.europeana.eu/ content to still be available somewhere only Europeana staff can access.
- I want all direct links to keep working so (e.g.) http://exhibitions.europeana.eu/exhibits/show/past-not-as-you-know still needs to work. 

Please propose the way to do this in the ticket comments. "
"*Problem:* 
The Europeana Fashion portal will be closed soon and all of the content in their portal should be migrated to the fashion Collection here at Europeana. Currently they also have something called ""themes"" in there. These themes are very small exhibitions or very image heavy blogposts which makes them both unsuitable for the Virtual Exhibitions here at Europeana as well as the Blog. 

Europeana has however played around with the idea of creating Galleries for a long time now and this might be the perfect opportunity to start working on a platform here that supports these Galleries. This however does impose a time constraint. All of the themes in the Europeana Fashion Portal ( see http://www.europeanafashion.eu/portal/themeoverview.html ) need to be migrated to the new gallery platform before the end of February. We are looking for the easiest / quickest way to whip something up, but that is also of use for other Collections. Currently VEs doesn't have a ""building block"" to support multiple images and ""galleries"" are also not supported in the CMS.  

*The solution we had in mind:*

- Use  Alchemy as the CMS for editors to create the Galleries
- We need a Galleries foyer page with the same design as the exhibitions foyer where each gallery is represented by a tile. The tile design should differ from the exhibition tile design so that they are distinguishable from each other. I would suggest the Gallery tile looks a bit like a Pinterest board card i.e. it shows visually that there are multiple images in the gallery. See attached image.
- The Gallery foyer and individual galleries to be available under the Explore menu option
- The editor must be able to add a title for the gallery. The CMS should ensure it is unique by appending a number if necessary 
- The editor must be able to add a max 280 characters long description per gallery
- The editor must be able to add up to 24 images to a gallery. The max number should be in a config file for easy modification.
- We want the design to support credits per gallery image: Title, Creator, Creation date, Data provider, Rights value/icons, Link to item in Collections. Note that these are exactly the same as the credits on a Collections hero image and Exhibition items. Metadata can be added by the editor, or as a nice to have, be fetched via the Europeana API by the editor supplying the item link.
- The following actions must be available per image in the gallery slideshow: Social share (Facebook, Twitter, Pinterest), Download, Zoom in, Full screen, Paginate left and right

_Nice to haves:_
- The gallery images should have og and Twitter card markup so that we can control
- The editor should have the ability to add an image caption freetext of up to 280 characters.
- For images from a data provider for which we have a logo the logo is automatically included in the display


*Notes/suggestion:*
- For a first implementation of the gallery slideshow why not keep things simple and just use the image viewer component as we do for images in Collections. Photoswipe, http://photoswipe.com/ It has basically all the display features that the acceptance criteria requires and also comes with responsiveness, swipe and keyboard controls for accessibility as well as Schema.org markup, etc. Would also add a measure of consistency of user experience.
- While a different JS-library (https://sachinchoolur.github.io/lightgallery.js/) I means smth like the slideshow Collections Trust use for the Europeana images they pull in, http://collectionstrust.org.uk/cultural-property-advice/ (click any of the images in the top band). See also attached annotated screenshot.

*Why not replicate the Fashion themes 1:1 ?*
Because as  they are implemented they make very poor use of 
1. the fact their images are and 
2. forces the user into a user journey like this:
click to theme-click item-enlarge image-click to close image lightbox, click back to theme, click item, enlarge image, close image lightbox, back click, ... And repeat ad nauseam. Way too many clicks!
"
"When we have a rich image field, there is also a quote involved; however, the quote field within that element behaves not like it's supposed to - see: http://exhibitions-test.cfapps.io/portal/en/exhibitions/credit-trial/rich-image-and-so (text of the quote within rich_image shows up only when you scroll to the bottom)

Acceptance criteria: 
The quote should either be statically there, or fade in within the box. "
"Editors sometimes use the intro blocks not at the beginning of the exhibitions, but somewhere in the middle where it is used as a full width image. 
However, when they use this option; the credits are in the wrong spot (see: http://exhibitions-test.cfapps.io/portal/en/exhibitions/credit-trial/rich-image-and-so).
Plus on the credits page text within the TITLE field is repeated (see: http://exhibitions-test.cfapps.io/portal/en/exhibitions/credit-trial/credits).
"
Place holder: Carlos mock up. 
"When thumbnails are small and less than the size of the grid view, they are being stretched and look fuzzy / blurry. 

Examples here:
http://www.europeana.eu/portal/en/search?f%5BDATA_PROVIDER%5D%5B%5D=Nationaal+Jenevermuseum%2C+Hasselt&locale=en&per_page=96&q=jenever&view=grid

The thumbnail is 150 pixels wide but grid view around 280 pixels.
"
"* Keep and remove all facet options: EC-10378.
* Add the ""Reset/remove all"" option also to mobile facets: EC-11004"
"See: EC-11061 for how this should work.

Implementation notes:
* The first three facets are (for now) sort of sticky facets, they are expanded by default.
* Selecting a value from another facet will expand that facet too, also for the next search result page.
* The sticky facets can also be collapsed."
"Implement EC-11028 with notes:

* To check with Simon whether we can arbitrary fields in the JSON will register in ELK or if it needs to know about them in advance.
* To go for the approach where the parameters are appended in the query string on the item display page.
* If we are going to pass on parameters from search to item display, we should also pass on the slug of the Thematic Collection. This allows us to not only create a better solution for breadcrumbs, but also show a ""featured in Collection X"" promotion box (which is not in the scope of this ticket, but note to self).
* We should see if we can add a timestamp or hash of some sorts, which would NOT register this as a search request if the user comes in via a bookmark (perhaps 30 minute expiration time or so?).

Ticket should be tested by me but also a bit by [~timothy.d.hill982002]  and possible [~stzanakis] to make sure we're doing the right things!"
EC-10805.
"As a follow-up of spike EC-9801.

To evaluate whether CDNify works for Europeana as a CDN.
This is to apply CDNify on the test environment and then to:

* Γ£ö Compare Google Pagespeed ranking between acceptance & test, to see if there is a difference in loading time.
* Γ£ö Compare GTMetrix results for test & production for retrieval of the site from different regions
* Γ£ö Check what happens when assets are updated via the CMS or by update to the development version of the styleguide

First step is to order CDNify trial, for @cskodras."
"Introduction of the cookie notice has caused one of our feature tests to fail, the one for the search box on the record page:

{code:java}1) Object page search form with JS has a working search form
    Failure/Error: click_button('Search')
    
    Capybara::Poltergeist::MouseEventFailed:
      Firing a click at co-ordinates [997, 99] failed. Poltergeist detected another element with CSS selector 'html.js.styled.svg body div.header-wrapper header.header div.cf' at this position. It may be overlapping the element you are trying to interact with. If you don't care about overlapping elements, try using node.trigger('click').
    # ./spec/features/object_spec.rb:95:in `block (5 levels) in <top (required)>'
    # ------------------
    # --- Caused by: ---
    # Capybara::Poltergeist::BrowserError:
    #   There was an error inside the PhantomJS portion of Poltergeist. If this is the error returned, and not the cause of a more detailed error response, this is probably a bug, so please report it. 
    #   
    #   Poltergeist.MouseEventFailed: click
    #   html.js.styled.svg body div.header-wrapper header.header div.cf
    #   {""x""=>997, ""y""=>99}
    #   ./spec/features/object_spec.rb:95:in `block (5 levels) in <top (required)>'{code}

We should fix this, but also add in test coverage for the cookie notice itself."
"When the Engine Yard styleguide servers have been decommissioned and all assets are served from S3, a number of assets can be removed from the styleguide repo:

* /source/v/
* /source/js/dist/
* /source/search_widget/

(Above list for [~andyjmaclean] to confirm.)"
"*Pre-deployment:*
* Γ£ö EC-11183: set `ANNOTATIONS_HOST` env var in CF manifests to ""annotations.europeana.eu""
* Γ£ö EC-11184: unset `STYLEGUIDE_HOST` env var on Apache apps and remove from CF manifests
* Γ£ö EC-11183, EC-11184: update Apache to host search widget JS and have configurable Annotations API hostname
* Γ£ö Delete inactive mirror's app instances, to clean out previous Ruby version gems
* Γ£ö Update portal's styleguide version to v0.2.57

*Post-deployment tasks*
* Γ£ö Write release notes.
* Γ£ö Update roadmap.
* Γ£ö Delete now inactive mirror's app instances, to clean out previous Ruby version gems"
I want to know how many times each facet is used in Europeana 1914-18, in the very same way we have the tracking now for Europeana.eu on our own facets as implemented in EC-11162.
"The search button on Collection is partially or not showing on mobiles.

Attached are an iphone 5, Samsung Galaxy J3 (Android 5.1.1) and One E1003 (Android 5.1.1)
"
"As reported (and fixed) before in EC-10978.

To reproduce:
* Do a search.
* Switch to grid display.
* Click on the question mark next to Can I Reuse It, it will lead you to /portal/rights.html&view=grid, breaking the URL.
 
*Acceptance criteria*
Question mark to in all cases lead you to rights.html without any suffix."
"To allow users to view previously made annotations and to create new annotations via the Annotations API.

h3. Display Wikidata annotations in Europeana 
The first thing we could do is to get annotations to display in Europeana. The [Wikidata experiment|https://europeanadev.assembla.com/spaces/europeana-apis/tickets/35/details] seems the perfect candidate for this. No additional work for this is needed on the Annotations API and the benefit is that Collections can already start exploring how to connect with a different API and pull in annotations. We probably shouldn't label them as such as that would imply to users that they can add annotations themselves.

Tasks:
* Collections to hook-up with the Annotations API.
* Collections to do a search for annotations created by Europeana tools.
* Collections to retrieve all individual annotations and render them accordingly.

Timeframe: September 2016

h3. Collect music genres in the Music Collections 
Once we have established the connection with the Annotations API the next step is to allow our users to annotate. For this, we can do a very specific subset of data to allow us to do some experimentation and iterations on the functionality.

Flow to annotate:
* On all item pages which items which are either from the provider ""Europeana Sounds"" or are known to be retrieved via the Music Collections (breadcrumbs), we show the ability for a user to specify or enhance the music genre.
* We show the user a dropdown or a search input box (depending on the solution) to select or search a music genre, and add this as an annotation to the item.
* When a user wants to do so, he or she has to login with a MyEuropeana account first.

Tasks:
* Display music genres on the item page via an API call. We could display them somewhere along in the metadata in a new Annotations section for instance, as there will just be a few.
Allowing users to login via MyEuropeana on Collections. We should probably make these pages only accessible via the annotations feature, as these will be the only ones where a login is needed for.
* Show users either a dropdown with genres, or a search box with genres. Question is: which (API) query can Collections make to retrieve the labels?
* Collections creates the annotation via the Annotations API on behalf of the users' token from MyEuropeana. 

Timeframe: October/November 2016"
"For Collections to exploit the functionality from the [Entity API|test-entity.europeana.eu/docs/], in order to improve and enrich the search experience and offer new ways for users to discover Europeana's content.

h3. Autosuggest
The first priority would be to exploit the autosuggest functionality to power autosuggests in Europeana Collections. Europeana Collections should, upon a user typing in something in the search box, show and render a list of Europeana entities. Clicking such an entity would trigger a search based on the entity selected. Although the API is functional at this point work still needs to happen on adding all Europeana entities to our Solr search index, work which will happen over October.

Tasks:
* Create a Ruby gem for the Entity API.
* Adapt the search input box to trigger the suggest API to suggest entities.
* Adapt the search results page to trigger an entity specific search when an entity has been selected.
(as a sidetrack, and until October, we are working on user testing to determine how such a suggest functionality should look like and work)

Timeframe: November.

h3. Entity facets and filters
When the reindexing work has been completed we should show our users entity facets, for entities as topics, persons and places. These will be based on existing facets.

Timeframe: December

h3. Knowledge cards
When a user searches for an entity, Collections should show a so called ""knowledge card"" with more detailed information about the entity.

Wireframe: https://projects.invisionapp.com/d/main#/console/1083571/53772101/preview

Timeframe: TBD

h3. Entity pages
Collections should have specific entity pages for persons, topics and places based on the full entity API call, showing detailed information about an entity and links to search results. 

Lo-fi wireframe: http://demo.deanbirkett.name/400PDV/#p=creator_page_-_music

Timeframe: TBD

h3. Entity browse pages
Based on the yet to develop search API call of the Entity API, Collections could create automated browse pages for entities (for instance persons from A to Z), in which you can browse and search for specific entities. Also good to have this from an SEO perspective.

Timeframe: 2017."
"Browser = Chrome 52 on PC

Example 1:
http://www.europeana.eu/portal/en/record/2022362/_Royal_Museums_Greenwich__http___collections_rmg_co_uk_collections_objects_61671.html

There is no space between the similar items.

Example 2:
http://www.europeana.eu/portal/en/record/2051921/data_euscreenXL_8000.html

Here the default thumbnails blend into each other. Another issue is that there are no icons denoting the items are of type video.

Example 3:
http://www.europeana.eu/portal/en/record/9200397/BibliographicResource_3000126260578.html

Click on the right arrow to pull in the next four similar items and the items are loaded underneath on a second row."
"Menu sections on http://www.europeana.eu/portal/en/exhibitions/foyer appear differently than on http://www.europeana.eu/portal/en

*1. All links under ""Explore"" section lead to nowhere because URLs are missing /portal/ part.*
[[image:cVbXSEzg4r5Qfndmr6QqzO]]

*2. ""Blog"" section should show titles of recent blogs and not only the link to ""all blog posts"".*
[[image:c2Yy1Azg4r5OkvacwqEsg8]]
"
"See outcomes of spike EC-10219.

Ticket can be picked up when we have a meaningful number of images hosted on the Europeana Cloud."
"As a user I would like to view an overview of all exhibitions. 

*Problem:* 
Currently the link ""see all exhibitions"" in the header-menu lead to the English voyer. Therefor, users browsing in a different language get an ""error"" page. 

*Solution:* 
Redirect all ""View All exhibition"" links to http://www.europeana.eu/portal/en/exhibitions/foyer

*Acceptance criteria:* 

- I would like to see ""view all exhibitions"" in the top menu (under the exhibitions heading) to lead to http://www.europeana.eu/portal/en/exhibitions/foyer. 
- I would like to see this for all languages. 

*How to recreate the bug:* 

1. Go to: http://www.europeana.eu/portal/nl
2. Stand on ""tentoonstellingen"" in the top menu
3. When dropdown appears, click ""Alle tentoonstellingen"" (in bold) 
4. View our marvelous ""this page does not exist"" page. 

Very sad face. 
"
"This story represents defining the conceptual technical design of the Newspaper API and the specification of it. Based on the specificatio n user stories and user story acceptance criteria will be defined.

*Acceptance criteria*
The following should be covered in the specification:

* Requests and Responses
** Authorisation
** Mandatory request parameters
** Header information
** Content negotiation rules
** Supported formats (=only JSON(-LD)) but with links to METS-ALTO

* Base methods for Newspaper
** Retrieve a list of Newspaper titles (IIIF Collection as response format)
** Retrieve an issue list of a Newspaper title (IIIF Collection as response format)
** Retrieve a known Newspaper issue (IIIF Manifest as response format)

* Discovery methods for Newspapers
** Search across multiple titles
** Search within a title
** Search within an issue
** Hit highlighting
** Faceting (Title, Data provider, Language, Date)
** Sorting (Relevancy, Alphabetical  by Title, Chronologically by issue date)

* Error handling

*Big decision*
Should the Newspaper API be its own endpoint? Or should we try to make Newspapers part of the existing Search API as a specific profile?

*Notes/ideas*
* The capabilities of the API will be driven by the planned functionality of the thematic Newspaper Collection. See EC-11120, EC-11121 and its children, EC-11122 , EC-11123 and its children, EC-11128 , EC-11130 , and EC-11134. 
* Base it on Swagger API definitions from the start rather than writing in a Google Doc. This will force us to do a good structured definition and we will get a Swagger  API console out of it as well. @yorgos.mamakis can advise otherwise on how to markup Java code from start to make sure Swagger consoles are easily generated.
* Otherwise the [Entity Collection API spec|https://docs.google.com/document/d/16Rw_qlSpINxztGpI5sM6NcXhnQeZkW3hRA1IYjFtE1w/edit?usp=sharing] could serve as a template if we want to spec the API in a GoogleDoc, 

*Benchmarks*
[National Library of Wales|https://docs.google.com/document/d/1h3UYIX8a0u8_4aCM0b5wgFV79uU9yqxUnlNlRPhLRYc/edit#bookmark=id.ga1i1wi6tbrx] 

 "
"STUB

*Acceptance criteria:*
* All API responses must be in valid JSON-LD
* Must support searching in the freetext of all newspaper issues and return a list of newspaper issues in which there are matches
* When requesting an issue of a newspaper the response must take the form of a (valid) IIIF-manifest with all the necessary data to fuel the Newspaper viewer (this includes freetext as annotations)"
"

*Acceptance criteria:*
* The Newspaper API should support dynamically generating a IIIF Collection that contains all the manifests grouped by title
* All Newsapers form the top collection
* Within the top collection each title forms a collection which in turn holds the manifests (one manifest = one issue)

*Questions/ideas:*
* Also segment collections so that each data provider, country and language form collections? Could be a follow-up story

*Reference:*
http://iiif.io/api/presentation/2.1/#collection


"
"For reporting purposes.

STUB, acceptance criteria TODO


"
"Before we re-use or further developer code from TEL we need to move the source code to Europeana's Github and then develop/version it from there. 

I believe the relevant source code is that for the Newspapers API and the Newspapers viewer. But there may be other components that [~nfreire] and @Alena_Fedasenka are familiar with that should be moved over - their call.

*Acceptance criteria:*
* Source code on Github with a basic readme and license info
* Whether to have all newspapers related components in one repo or one repo per component is up to @Alena_Fedasenka 's good judgement  "
See EC-11209.
"Example:
http://www.europeana.eu/portal/en/search?f%5BLANGUAGE%5D%5B%5D=ar&locale=en&q=LANGUAGE%3A%22ar%22+

The language and country facet show ""Translation missing"".

We should ensure that just as we do with other language keys, when there is no translation the facet fallbacks to English.

[~Michelle.vanduijn] FYI as well, from the translation side of things."
"Userstory: 

As a user I would like to see the silder full width. 

Problem: 

Currently the slider option (comparison block in Alchemy) only displays small. 

Solution: 

Make the slider full width. 

Acceptance Criteria: 

- I want to see the comparison full width on the front end
- I want the option to set it full width in the back-end. "
"

Acceptance criteria:
* Freetext search, search within the OCR:ed text

Must return the following for each issue there's a hit in:
- Newspaper title (dc:title)
- Newspaper issue date (dcterms:issued)
- Article title (multiple)
- Page (multiple)
- IIIF-manifest
- Relevancy score

Should return:
- Data provider (edm:dataProvider)
- Country (edm:country)
- Language
- Copyright status (edm:rights)

"
"I already discussed this ticket with @richard.doe. 

Acceptance criteria: 

- I want to see all languages updated with changes that have been made in localapp. 
- I want to see Maltese and Norwegian added as new languages in the language drop down. 

[~Maggy] might add / change this ticket accordingly before the end of the sprint. "
"*Pre-deployment*
* Γ£ö Deploy to production S3 styleguide version 0.2.59
* Γ£ö #1529: update jenkins jobs to make jobber app do db:migrate and db:seed, and backup dbs, and do keep jobber app running
* Γ£ö Update Jenkins job to clear workspace before build (to delete config/proxies.yml)
* Γ£ö Update env vars to use CDNify for portal CMS and styleguide assets
* Γ£ö Update styleguide version to 0.2.59
* Γ£ö Update buildpack to https://github.com/cloudfoundry/ruby-buildpack.git#v1.6.25
* Γ£ö #1523: set NEWRELIC_LOG=stdout env var
* Γ£ö EC-11097, EC-11104: run db:migrate (via jobber app)
* Γ£ö *IMPORTANT:* check that the db migration happened (via `cf ssh` or pgadmin)
* Γ£ö EC-11104: run db:seed (via jobber app)


*Post-deployment tasks*
* Γ£ö Write release notes.
* Γ£ö Update roadmap.
* EC-11097: set grid display for fashion collection via CMS (if deploying to an env with a fashion collection)
* Γ£ö Add at least one Time Period browse entry-point via the CMS to avoid an empty explore page.
* Γ£ö #1559: use the jobber to recreate the cached facets for colours and providers pages, and redeploy to refresh cached pages"

"Example: http://www.europeana.eu/portal/en/record/11622/GLOBIS_MFN_GERMANY_9984.html

I remember you [~andyjmaclean]  told me something about some limitation where it there are too many hasViews, they won't open in the lightbox anymore. Can you clarify?

Also, when you click on them, they are being offered for download. This shouldn't be. Can we do something different in those situations?
http://globis-images.insects-online.de/images/Berlin/Berlin_12/comes_Belling_Parnassius_apollo_MNHU_3B.jpg"
"To use Sidekiq for background job processing instead of Delayed Job.

Based on spike outcomes of EC-10955."
"Same as on other sites, such as Labs: http://labs.europeana.eu/
The broken ""Europeana"" should be in the hero image on Collections.

As discussed [~andyjmaclean] @cr.marcelino."

"I am checking http://www.europeana.eu/portal/en/record/90402/SK_A_2344.html?debug=json
and I find the attribution snippet HTML code in the JSON:

""htmlAttributionSnippet"": ""<span about='http://data.europeana.eu/item/90402/SK_A_2344'><a href='http://europeana.eu/portal/record/90402/SK_A_2344.html'><span property='dc:title' xml:lang='en'>The Milkmaid</span><span property='dc:title' xml:lang='nl'>Het melkmeisje</span></a>. <span property='dc:creator'>RM0001.PEOPLE.2529. </span><a href='http://www.rijksmuseum.nl/collectie/SK-A-2344'>Rijksmuseum</a>. <a href='http://creativecommons.org/publicdomain/mark/1.0/' rel='xhv:license http://www.europeana.eu/schemas/edm/rights'>Public Domain</a><span rel='cc:useGuidelines' resource='http://www.europeana.eu/rights/pd-usage-guide/'>.</span></span>"",

The two titles are not separated as we had agreed for EC-10131: https://europeanadev.assembla.com/spaces/europeana-npc/tickets/404/details?comment=858350753
(actually this one use a comma, but we may want to have a semicolon just as we have for the textAttributionSnippet

Also, the way the creator name is rendered is not good, both for the textAttributionSnippet and for the htmlAttributionSnippet: RM0001.PEOPLE.2529. This is because Rijks sent Vermeer to us as an entity (edm:Agent). The same logic should be applied as the one in the item display: ""Vermeer, Johannes"" is displayed there. But maybe this should be seen as a sort of new feature. It was probably outside of the logic we had specified for EC-10131"
"UPDATED STORY

The purpose of this spike is to define the export format that the API-team/ [~hugo.manguinhas] want the tags in 14-18 to be exported into for easiest *one-time* batch import via the Annotations API. 

Note:
* Tag migration is a must
* Image annotations will be skipped. We won't redevelop that feature unless we find new data or reason to. It's been available in 14-18 for years and we have no more than 67 made."
"In the language drop-down menu, in keeping with all language names being written in that language, Romanian should be written as Rom├ón─â 
"
"*The problem:* 

The footer is not consistent with the rest of the portal. 
When you go to http://www.europeana.eu/portal/en/exhibitions/foyer and scroll all the way down, the footer mismatches the portal one: http://www.europeana.eu/portal/en

*Solution:* 

Make them match. 

*Acceptance criteria:* 

- I want the footer on http://www.europeana.eu/portal/en/exhibitions/foyer to match http://www.europeana.eu/portal/en _for every language that the foyer is published in_"
"*Pre-deployment:*

* #1523: set NEWRELIC_LOG=stdout env var
* Update buildpack to https://github.com/cloudfoundry/ruby-buildpack.git#v1.6.25
* Change styleguide asset host to use CDNify
* EC-11153: bind sendgrid service to apps (via CF manifest)
* set: EUROPEANA_STYLEGUIDE_ASSET_HOST: https://europeana-styleguide-production.s3.amazonaws.com/v0.2.59
* add ""FEEDBACK_MAIL_TO: *production_feedback_mail* "" to manifest file (get mail from portal manifest)"
"*User story:* 

As a Virtual Exhibition creator, I would like to duplicate exhibitions to multiple languages. 
As a Virtual Exhibtions creator, I would like to be able to duplicate the voyer. 

*Problem:* 

As a VEC (virtual exhibitions creator) I cannot copy entire pages, just their elements. This is causing me to do a lot of manual labour when (e.g.) I want to copy an entire page. There is a copy-ing option in the Alchemy interface, but only for single elements, not ALL elements. This reflects in me having to copy every single element manually. 

*Solution:* 

Make the entire page (or all elements that make up the page) able to be copied in one single click. 

*Acceptance criteria:* 

- I want to see an icon in the CMS that allows me to copy all of the elements in a page. 
the copying will happen to the clipboard (as already is the case).
- I want to see that when I hit ""paste"" in an empty page, all elements from the page I just copied are duplicated. 

[~Maggy] Could you add your thoughts to this ticket for me too? "
"_THIS TICKET IS A CLONE OF TICKET: 1435_ 

*User story:*

As an Exhibition editor I would like to be able to share my draft Exhibition in order for others to give feedback without the need for a CMS login.

*Problem*

Currently it's not possible to view an exhibition without publishing it. Since we want partners to make their own exhibitions, or share with partners what their exhibitions would look like online, we need to figure out how to work on this. It should be possible for an editor to save an Exhibition in draft, thus not making it show up on the foyer/overview/Collections menu, but still allow for the editor to share the draft Exhibition via its direct URL. You can now publish an exhibition in the live environment without it showing up in the voyer, but the header dropdown will still show it. 

*Solution:* 

Make the exhibition viewable without it showing up in the navigation in the live environment. 

*Acceptance criteria*

- I want to be able to view an exhibition via an URL without it showing up in any navigation within the Europeana live-environment 
- Or: when i publish an exhibition without clicking the eye-icon, I want it to not show up in the header drop-down or any other navigation in the live environment.

*How to test this:* 

Tbc. "
"As InVision'd here: https://invis.io/CS146E9BR#/190057728_Collections_SearchResults_Fashion_AsymGrid

Implementation notes:
* This is an upgrade to the current grid display.
* The grid should be vertically asymmetrical, and fit in 3 columns.
* We stick with the idea of 'cards'.
* The height of the card has to be relative to how much width of the thumbnail can fit into the width of the card.
* New is that we also show the creator, we should have the same logic here as for the list views creators.
* There is an increased padding between cards and between the thumbnail and the title.
* [~cr.marcelino] Can you add some notes here about what we do with very wide or tall images, or other things worth noting?"
"When I open for example the Music Collection Landing page on the IPad (in Landscape).
At the bottom of the screen a blue band is visible with some message about an ALpha release.
The Feedback button will always be positioned in the bottom right corner. The Feedback button has the same colour as the Blue band with the message.
Therefore the feedback button is not distinguishable from the Blue message bar.

[[image:avRx5GHyCr5OkTacwqjQYw]]"
"When you look at the Music collection on Acceptance in German (Deutsch), you see that the part the tells you about the amount of images, texts videos etc. is forced into 1 column.
On Test this looks fine. So we assume it is caused by the CMS somehow.
We don't know if this will propagate to Prod when deployed."
"I have an Object (Image):
http://www.europeana.eu/portal/nl/record/92093/BibliographicResource_1000086158604.html?q=antiphonal
The Page shows the ""Media Metadata"" and ""Download"" options
I click on the magnifying glass to make the image fullscreen.
I return to the Object Page.
Now the two options are gone (Download still shows but is grey and inactive).
A page refresh is necessary to make the two options available again."
"Sketchfab player not embedded as it should. The example object below is my go to test object for this so I'm 100% certain it has worked before.

Example:
http://www.europeana.eu/portal/en/record/2048705/object_HA_840.html

which has edm:isshownby = https://sketchfab.com/models/753409da062e446b9041a089df830833
which has the embed snippet:

{code:java}<div class=""sketchfab-embed-wrapper""><iframe width=""640"" height=""480"" src=""https://sketchfab.com/models/753409da062e446b9041a089df830833/embed"" frameborder=""0"" allowfullscreen mozallowfullscreen=""true"" webkitallowfullscreen=""true"" onmousewheel=""""></iframe>

<p style=""font-size: 13px; font-weight: normal; margin: 5px; color: #4A4A4A;"">
    <a href=""https://sketchfab.com/models/753409da062e446b9041a089df830833?utm_medium=embed&utm_source=website&utm_campain=share-popup"" target=""_blank"" style=""font-weight: bold; color: #1CAAD9;"">Hermitage, Skellig Michael</a>
    by <a href=""https://sketchfab.com/discoveryprogramme?utm_medium=embed&utm_source=website&utm_campain=share-popup"" target=""_blank"" style=""font-weight: bold; color: #1CAAD9;"">The Discovery Programme</a>
    on <a href=""https://sketchfab.com?utm_medium=embed&utm_source=website&utm_campain=share-popup"" target=""_blank"" style=""font-weight: bold; color: #1CAAD9;"">Sketchfab</a>
</p>
</div>

{code}


Dev console reports a javascript error (which is the likely cause of this bug):

{code:java}search-oembed-viewer.js:63 Uncaught TypeError: Cannot read property 'indexOf' of undefined(anonymous function) 
@ search-oembed-viewer.js:63loadDependencies 
@ search-oembed-viewer.js:57init 
@ search-oembed-viewer.js:61init 
@ search-oembed-viewer.js:212(anonymous function) 
@ search-media-controller.js:235execCb 
@ require.js:1670check 
@ require.js:874(anonymous function) 
@ require.js:1124(anonymous function) 
@ require.js:132(anonymous function) 
@ require.js:1174each 
@ require.js:57emit 
@ require.js:1173check 
@ require.js:925enable 
@ require.js:1161init 
@ require.js:782callGetModule 
@ require.js:1188completeLoad 
@ require.js:1564onScriptLoad 
@ require.js:1691
{code}"
"Iteration 1: EC-11100

As part of this iteration, or actually to do the thing we were supposed to do in iteration 1, we should make sure that when you share an image to Tumblr, it actually posts it as an 'image' and not as a link. This probably means passing along the thumbnail URL to Tumblr as when Tumblr tries to extract an image itself it doesn't take on any image smaller than 500px.

*Acceptance criteria*
This ticket is accepted when sharing an item to Tumblr means that the image shows up on Tumblr as an image post."
"Implement EC-11142.

When a thumbnail is not available on the item page, add an indicator as InVision'd here:
https://projects.invisionapp.com/share/CS146E9BR#/screens/180283316_Collections_ItemPage_PreviewUnavailable

Copytext should read: 
""Item preview not available, to access the full image and more information about the item go to PROVIDER.""
Where PROVIDER is a link to the provider, same as the edmIsShownAt. We should append it with the external link icon as it will need to open in a new window.

*Acceptance criteria*
This record: http://www.europeana.eu/portal/en/record/2021620/dispatcher_aspx_action_search_database_ChoiceCollect_search_object_number__StCC_20g00068f_.html should instead of showing a small dark bar without anything show the copytext above as in the InVision mock-up with a link to the providers page including the external link icon."
"As spiked here EC-10877.

As a user clicking through to a search result page I want to have an indicator to the record I came from.

To solve this, we should add a special breadcrumb:
# I've viewed the record http://www.europeana.eu/portal/record/92070/BibliographicResource_1000126223925.html
# I've clicked on the show more link for similar items http://www.europeana.eu/portal/search?mlt=%2F92070%2FBibliographicResource_1000126223925
# The breadcrumbs now read: Return to Home / Item / Similar items. ""Item"" links back to the record, and ""Similar items"" is the current page (alt. label to ""Search results"").

Also we should add this as a keyword to the search bar, something you can remove. Suggested label: ""Similar items"". See it as a ""special keyword""."
"As discussed in EC-11137 and InVision'd here:
https://projects.invisionapp.com/share/CS146E9BR#/screens/185852631

On the search results pages for the Thematic Collections, and on the general search result page, we should include the hero image of either the Thematic Collection or the 'general' one as a background to the search bar area. We should probably align it center center as it's supposed to be just a contextual indicator of where you are in the search journey. This image should change when one for instance switches from Collection through the filter or another link.

[~cr.marcelino] can you help out/chip in here with regards to not only positioning but especially opacity? We need to make sure the contrast remains clear enough for users (also the ones with limited accessibility) to read the filters and interact with them."
"In addition, the launch of the initial search query should be captured in the same form as given for item-retrieval events, but absent the 'Record' and 'Result Rank' fields.This information can be recovered from other log messages, but there's some heavy and variable string-munging involved.

Out of scope for now: Right now the ELK-stack logging outlined in EC-11166 fails to capture items opened in new tabs in both Mac Chrome and Mac Safari. "
"For Music and Art.

Music:
Include http://www.europeana.eu/portal/en/search?view=grid&q=europeana_collectionName%3A%282059208_Ag_EU_eSOUNDS_1020_CNRS-CREM%29&qf%5B%5D=what%3A+music&per_page=24  - doublecheck their embedded player. DONE in acceptance!

Include http://www.europeana.eu/portal/en/search?locale=en&per_page=24&q=DATA_PROVIDER%3A%22Lietuvos+teatro%2C+muzikos+ir+kino+muziejus+%2F+Lithuanian+Theatre%2C+Music+and+Cinema+Museum%22&view=grid but, note, some objects are not music specific, also theatre and cinema. Can't filter them out though."
"I would like to have an API console for the Annotations API on Labs, but the CORS headers are not in place.

Error: XMLHttpRequest cannot load https://annotations.europeana.eu/api-docs/. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://labs.europeana.eu' is therefore not allowed access.

We solved this for our Search API as part of ticket EC-10553, so we should now do the same for the Annotations API.

This ticket is accepted when the Swagger console here loads in fine:
http://labs.europeana.eu/api/annotations-api-console"
"To what has been designed/wireframed in InVision.



1. As a user; I would like to see a voyer filled with exhibtions.

*Problem:* 
Currently the hero image in the exhibtions voyer (see http://www.europeana.eu/portal/en/exhibitions/foyer) is taking up the entire top of the screen. 
Users have identified that this is confusing because they don't know that they need to scroll down in order to see more exibitions. 
The developed versions are really not close to the mockup by Carlos. Nor the live version. 

*Solution:* 
Decrease the size of the hero image in the voyer so that it is clear that there is more underneath. 
The hero image needs to be smaller than full width. Add some padding on the sides (white space). The image should be a bit bigger or equal to the column size of the featured boxes.

See design for this here: https://invis.io/SD5MY3XEC#/153654564_Exhibitions_Foyer_Dir

*Acceptance criteria:* 
- I want to see the size of the featured exhibitions on https://test-npc.eanadev.org/portal/en/exhibitions/foyer decreased according to this 
  https://invis.io/SD5MY3XEC#/153654564_Exhibitions_Foyer_Dir
- The scope of this ticket is just for the hero image. Other design elements are in the backlog. 
- The hero image needs to be smaller than full width. Add some padding on the sides (white space). The image should be a bit bigger or equal to the column size of the featured boxes.







"
"** This ticket comes from EC-11187

As spiked in EC-11187, major refactoring is required in order to get the Statistics Dashboard up to where it should be.

The goal of this first iteration, for which we dedicate an entire sprint for one FTE, is to have a working test, acceptance [& production] environment for the statistics dashboard including the full set-up of everything that comes with it such as Jenkins jobs, branching strategy, documentation etc. In the next sprint we can then try to tackle some bugs.

The full list of things that need to be part of this refactor round will be distilled from EC-11187, and to be listed here as acceptance criteria before this ticket work starts.

*Acceptance criteria*
* Test, acceptance environment for statistics dashboard.
* Functional project setup for dev and test environment as part of the repo (db:migrations, db:seeds, example .env files with required keys specified)
* Clear working instructions on how to setup a dev environment and run automated tests
---
* Application which adheres to Europeana development guide/best practices

*High Priority*
#1592 STATISTICS DASHBOARD: migrate it to our CloudFoundry hosting provider.
Γ£ö#1593 STATISTICS DASHBOARD: Implement standard deploy via Jenkins
Γ£ö#1604 STATISTICS DASHBOARD: SPIKE Identify what the Statistics Grape does
Γ£ö#1597 STATISTICS DASHBOARD: fix first time setup

*Standard Priority*
#1594 STATISTICS DASHBOARD: update styleguide usage
Γ£ö#1603 STATISTICS DASHBOARD: remove custom DB adapter, use ActiveRecord
Γ£ö#1591 STATISTICS DASHBOARD: switch the $redis global var for proper use of Rails.cache
#1595 STATISTICS DASHBOARD: refactor to rails standards
#1602 STATISTICS DASHBOARD use ActiveJob with Sidekiq adapter, not Sidekiq directly

*Low Priority*
#1598 STATISTICS DASHBOARD: nice error pages
#1601 STATISTICS DASHBOARD: better password strength check
#1599 STATISTICS DASHBOARD: rubocop
#1600 STATISTICS DASHBOARD: remove unnecessary frameworks"
"*User Story:* 

Collections is migrating VEs from Omeka to Alchemy. 

*Problem:* 

Currently the Omeka platform does not support an automatic export that supports both the metadata and the files into one ΓÇ£super-fileΓÇ¥. They can download the files manually and copy paste the meta data separately and then put them in one file, but the process is dreadful and labour intensive. (Total amount of items in the old exhibitions is over 1100 items.) 

*What to investigate:* 

Is there a way to make Omeka create a super-file (metadata+items) in one click? (Or at least less clicks) and does something like this http://omeka.org/forums-legacy/topic/exporting-batch-metadata-to-xml provide a solution for this problem?

*Acceptance criteria:* 

- I want to know if there is a solution for this problem. 
- I want to know how much resources (time) it will take to implement suggested solution(s). 
- I want to know what it means for Collections when the suggested solution is implemented. (basically some rough instructions :) ) "
"Getting images into static pages is not straightforward.  Markup like this:

{code:java}  <img src=""http://absolute/path/to/styleguide/image.jpg""/>

{code}
is not suitable, because it makes a reference to a specific version of the styleguide that may be deprecated.

Markup like this:

{code:java}  <img src=""../../relative/path/to/styleguide/image.jpg""/>

{code}

is not suitable either, because relative links in markup resolve relative to where the markup is served from (the application server) not where the images actually reside (the styleguide server)

The solution used [here|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/1518/] follows the technique used for the Europeana logo: it uses a background image defined in the CSS.  This works because relative paths in CSS are resolved relative to the stylesheet, not the app server, and so the div added in the CMS with the class ""opus-img"" corresponds to a CSS rule that gives it the background image ""europeana_opus.png""

A limitation of this approach is that background images do not influence the size of the element they style, so in order to give this image dimension and maintain its aspect ratio the technique described here is used:
  http://stackoverflow.com/questions/600743/how-to-get-div-height-to-auto-adjust-to-background-size

This is not ideal.  Styleguide updates are necessary in order to add new images, and calculations are required in order to maintain aspect ratios.

Proposal: allow images to be uploaded and referenced directly in the CMS"
"Load the metadata into eCloud, attached to the same eCloud Records as the images and full texts.
The metadata should be a new representation (EDM) in the Record."
"Source of right information:
- Google sheet from the Europeana Newspapers project
- Apply in addition a publishing date cut-off algorithm to avoid publishing content not im public domain
"
"Implement the data dump tool that will create the downloadable data sets, according to the researchers needs.
"
"Which formats for file, metadata, full-text, and images.
How to organize this files? "

"Europeana Collections doesn't ""feel"" more performant ever since we switched to using a CDN.

Can we repeat the tests from EC-11179 on production?"
"Improve accessibility to social media tasks for visually impaired users by adding the correct descriptive text to the social media icons.
These social media share/subscribe patterns are used across multiple pages and sites.
Descriptive text will be read out by a screenreader when the icon has the focus state.

Tasks:
[[image:dLA8LAMDer5PFddmr6bg7m]]
[[image:aSZo2iMDir5RFcdmr6QqzO]]
[[image:ba_s9MMDir5OkHacwqjQYw]]

Share icons:
test url: http://styleguide.europeana.eu/patterns/templates-Search-Search-object/templates-Search-Search-object.html
[[image:ag-QlMMDur5OoWacwqjQXA]]

Links to Europeana social media accounts:
Global footer - all pages
[[image:bsJSW8MDur5Oi7dmr6CpXy]]

Channel specific social media links:
http://styleguide.europeana.eu/patterns/templates-Search-Channels-landing-fashion/templates-Search-Channels-landing-fashion.html
[[image:ck8mjGMDur5Ok3acwqjQXA]]

"
"The old IPhone Europeana has.
As can be seen in this image below the Search Editbox is half hidden by the main Menu Bar at the top.
Some space has to be found to make it visible again.
Maybe droppening the browse options?

I have not seen this problem on phones with a larger screen (Remy's IPhone or my Samsung Note 4).

!Search Editbox half hidden IPhone.png!"
"Especially with regards to our new grid display, and Andy's comments in EC-11284.

What needs to be done:
* Update our set of standard thumbnail images (the fallbacks, for audio/video/image/3D/text). 
* Remove the border from those images.

This ticket is accepted when the new set of images is attached to this ticket, so we can update them in the API code. (todo for me)"
"Should include:
* EC-11115 - Transcribe button
* EC-11116 - Make it more clear that annotations can be created
* EC-11301 - Withdraw function broken
* EC-11189 - User behaviour tracking

All tested on the acceptance site."
"The db:seed command reports an error - this due to the data it loads not being valid according to restrictions introduced for browse entry points.

{code:java}
bundle exec rake db:drop
bundle exec rake db:create
bundle exec rake db:schema:load
bundle exec rake db:seed

rake aborted!
ActiveRecord::RecordInvalid: Validation failed: Browse entries subject type can't be blank
{code}"
Go over styleguide case studies and help new team members familiarise themselves with Europeana's styleguide-driven development procedures.
"http://www.europeana.eu/portal/en/record/07931/diglit_evans1928a.html

Error: 
http://www.europeana.eu/portal/en/record/07931/diglit_evans1928a.html?q=knossos Failed to load resource: the server responded with a status of 500 (Internal Server Error)

API-call response works and looks OK:
http://www.europeana.eu/api/v2/record/07931/diglit_evans1928a.json?wskey=api2demo

Could we troubleshoot?

Wild guess: I think Pierre may have tried to map this into a hierarchical object - and smth went wrong?"
"The alternate links in the HTML head of record pages include any URL parameters such as the preserved q parameter from a user's search.

They should not.

Example: http://www.europeana.eu/portal/en/record/92099/BibliographicResource_2000081662431.html?q=
{code:java}<link hreflang=""x-default"" rel=""alternate"" href=""http://www.europeana.eu/portal/record/92099/BibliographicResource_2000081662431.html?q="">{code} "
"When I upload a new hero image (attached) to landing page 'Home', I get this error message (on this page: http://www.europeana.eu/portal/en/cms/page~landing/6/edit): 

502 Bad Gateway: Registered endpoint failed to handle the request.

The image uploads fine on acceptance. 

Acceptance criteria: the hero image file uploads successfully and displays on Europeana Collections

(Error also occuring on attempt to upload to Landing Page Art)

[[image:dstWSSLDmr5OLDdmr6QqzO]]

"
"To go into acceptance: Friday 21 Oct
To go into production: Tuesday 25 Oct

Assigning to [~lbiedinger] to take care of acceptance tomorrow. [~andyjmaclean] to provide styleguide reference.

h1. Tasks 
* update styleguide ref to v0.2.61 in jenkins config
* merge https://github.com/europeana/europeana-portal-collections/pull/688 and create tag for v0.9.0
* set  branch to release tag 
* update portal CF env vars to use https:// -- EUROPEANA_MEDIA_PROXY, EUROPEANA_OEMBED_PROVIDER
* update production Apache to Git ref 5d7758aee90d3d4b8043f724058a313abde7f087"
"Our virtual exhibitions are great but there is no way to programmatically access the objects featured in them (or the curatorial text). This idea would make that possible (perhaps minus the curatorial text).

The suggestion would be that every virtual exhibition would be published also as an IIIF Collection with each of the objects (at least images, audio and video would need to wait for IxIF) and their metadata as IIIF Manifests within the Collection.

We could even make one IIIF Collection that contains the individual exhibitions IIIF Collections (collections can be nested).

I could see a couple of ways to do this:
1. The Alchemy CMS is developed to just do it automatically per exhibition.
2. A separate script is created that a developer can run and create and publish a IIIF Collection
3. They are manually created in a tool, e.g. https://github.com/bodleian/iiif-manifest-editor

To test whether there is actually demand for exhibitions IIIF collections we could create 1 or 2 with the IIIF Manifest Editor first. If they're popular we can then try to automate.

Before this is worthwhile we should of course support IIIF zoomable hi-res images in the exhibitions in the first place, see EC-11307"
"The workarounds for some of the earliest IIIF datasets that we implemented support for, no longer work, and should be removed from the portal codebase.

*1. Bodleian dataset*
http://www.europeana.eu/portal/en/search?q=europeana_collectionName%3A9200175_Ag_EU_TEL_a1008_EU_Libraries_Bodleian
For instance, this record http://www.europeana.eu/portal/en/record/9200175/BibliographicResource_3000004703574.html has manifest http://iiif.bodleian.ox.ac.uk/iiif/manifest/c8e33fa8-a313-42ff-8ac9-eb8117ca06fe.json, which is an error from their server. With the new IIIF fields now in EDM, the preferred solution is to have IIIF data provided and ingested, instead of doing a new workaround.

*2. Heidelberg dataset*
EC-10147 http://www.europeana.eu/portal/en/search?page=1&per_page=96&q=edm_datasetName%3A07927%2A&view=grid
This dataset has a new identifier, and has ingested IIIF metadata in the EDM, so the workaround is no longer needed."
"*User story:
*
As a user I would like to view the credits on Europeana so I know where stuff comes from. 

*Problem:* 

Currently the credits on the intro image for each chapter overlap. (example: http://www.europeana.eu/portal/en/exhibitions/sketches-by-david-ring-accessories#ve-anchor-intro_6269-js ) It seems to be that the credits for the last item on the page, display in overlay on the first images's credits. I think it might have to do with the fact that the last image in the example is an ""intro"" too. 

*Solution:* 

Make the image credits of the last image display correctly. 

*Acceptance criteria:* 

- I want to see all images displayed with their correct credits in the section of the page where the image is featured. 

*Testing this:* 

[~renekok]  you can come to my desk so I can show you, or testing can be assigned to [~Michelle.vanduijn] "
"Adjust footer heading colour to meet WCAG AA contrast requirement

a11y task:
!Screen Shot 2016-10-24 at 13.55.00.png!

-  color is now adjusted

test url: can be tested globally as it's a global molecule
eg. http://styleguide.europeana.eu/patterns/templates-Search-Search-object/templates-Search-Search-object.html"
"Tasks:
!Screen Shot 2016-10-24 at 14.01.52.png!

test url:
http://styleguide.europeana.eu/patterns/templates-Search-Search-results-list/templates-Search-Search-results-list.html?view=list

- Added relevant descriptive text where necessary to create better ux for screenreader users
- Fixed issue with previous search terms removal links
- Added descriptive text into all relevant filter modules
- fixed issues with multiple links to the same place resulting in duplicated content being read out"
"tasks:
!Screen Shot 2016-10-24 at 14.11.51.png!
!Screen Shot 2016-10-24 at 14.17.11.png!
!Screen Shot 2016-10-24 at 14.17.20.png!

test url:
http://styleguide.europeana.eu/patterns/templates-Search-Search-object/templates-Search-Search-object.html

Action taken:
-- edited relevant page javascript so that focus is not switched to the search box on page load.
-- added descriptive text to the main image and link to zoom in
-- addressed a11y issues with metadata and download drawers as much as possible
-- added correct descriptive text to download drawer items and panel switch
-- removed redundant heading generation
-- added correct date/time semantic markup for dates
-- added focus states for video playback controls
"
"Tasks:
!Screen Shot 2016-10-24 at 14.49.44.png!
!Screen Shot 2016-10-24 at 14.49.31.png!

The live Pro site currently uses v1 markup for the header component and will need to be updated to use the markup as now specified in Pattern lab.

test url:
http://styleguide.europeana.eu/patterns/templates-Pro-Home/templates-Pro-Home.html

Actions taken:
see below"
"Tasks:
!Screen Shot 2016-10-24 at 15.43.58.png!

This wasn't just a Pro only issue and affected all pagination.

Test url:
http://styleguide.europeana.eu/patterns/templates-Search-Search-results-list/templates-Search-Search-results-list.html?view=list
!Screen Shot 2016-10-24 at 15.45.37.png!


Actions taken:
-- All pagination throughout the system now has translatable descriptive text that improves a11y for screenreader users.
-- Numbered buttons will now say ""Page 1"" etc. and the Next and Previous buttons will say ""Next page"", ""Previous page""
-- This text is also translatable and has been added to Locale app"
"Task:
!Screen Shot 2016-10-24 at 16.19.12.png!

Action taken:
-- a11y improvement to global tag component
-- Added a data option to add a number of results 
-- adjusted markup to provide a better accessibility for screenreader users

Screenreader will now read ""Tag name, 35 results""

test url:
http://styleguide.europeana.eu/?p=molecules-tags-large"
"Tasks:
!Screen Shot 2016-10-24 at 16.52.37.png!

Test url:
http://styleguide.europeana.eu/patterns/templates-Exhibitions-Exhibition-Page-Foyer/templates-Exhibitions-Exhibition-Page-Foyer.html

Action taken:
-- looked into main image alt text issue - this is a content issue, not a markup/development issue
-- added empty descriptive text for decorative usage browse entry points
-- descriptive text on the social media buttons (fixed perviously)
-- removed beta link from tab order
-- tweaked the a11y of the browse entry points (next/previous arrows)"
"Tasks:
!Screen Shot 2016-10-24 at 17.01.30.png!

Test url:
http://styleguide.europeana.eu/patterns/templates-Exhibitions-Exhibition-Page/templates-Exhibitions-Exhibition-Page.html

Actions taken:
-- Added section title variables as descriptive text into the in-page navigation. This creates a skip link style navigation within the page to allow screenreader users to jump to the various anchors in the page "
"Tasks:
!Screen Shot 2016-10-24 at 17.09.33.png!
!Screen Shot 2016-10-24 at 17.10.50.png!
!Screen Shot 2016-10-24 at 17.10.03.png!

Test url:
http://styleguide.europeana.eu/patterns/templates-Statistics-dashboard-Dashboard/templates-Statistics-dashboard-Dashboard.html

Action taken:
-- added correct descriptive labels for the result filter drop-downs and descriptive text indicating what it will do
-- made supporting help areas tab-able
-- added descriptive text to increase/decrease flags
-- adjusted colour contrast of increase/decrease flags to meet WCAG AA a11y standard"
"Now having switched to SSL we should update Google Search Console to be aware of it:
https://support.google.com/webmasters/answer/6073543?hl=en
https://support.google.com/webmasters/answer/6033049
"
"See ticket EC-11378.

[~cr.marcelino] Adding it to the running sprint, under the assumption this is a 15 minute task for you. If not, let me know and I'll move it one sprint."
"# How?
# Can we do it legally speaking? Answer: Yes. The ToC for signing up related everything to Europeana, not Europeana 1914-1918 specifically.
# Do we need to reset passwords?
# What to do with accounts which email address' already exist?
# Do we want to migrate all user data collected via 1914-1918, or do we want to groom it? Can/could MyEuropeana support all data we want to retain?
# 1914-1918 permits registration by username *and/or* email, and login by same. How would we account for this in MyEuropeana?
# What roles are defined by 1418 and should they be handled in MyEuropeana, and if so how?

We need a migration and feasibility plan for this."
"Based on input from #1803, to create an improved version addressing this spike.

--
Europeana 1914-18 has items which are 'stories', and are basically hierarchically structured items with one parent record and a list of child records. A good example is a diary such as this one: 
http://www.europeana1914-1918.eu/en/contributions/96
This shows up in search as follows:
http://www.europeana1914-1918.eu/en/collection/search?q=Feldpostkorrespondenz+Familie+Ramke%2FGramm&qf%5Bindex%5D%5B%5D=a&utf8=%E2%9C%93

In Europeana, currently, this 'story' would show up in search as follows:
https://www.europeana.eu/portal/en/search?q=Feldpostkorrespondenz+Familie+Ramke%2FGramm
81 search results, of which one is the parent item (without thumbnail) and 80 are the children.

This spike is to figure out what is the best way to represent these stories in Europeana, with the following goals:
* A story should ideally be one search result in the search results, and not 81 in this examples case.
* A story should be browsable as a story, from the first to the last image.
* As each item in the story can have its own item metadata, it should be possible to view this metadata per (child) item.
* It should be made clear in the interface that items belong to a certain story.

As part of EC-11407 and of this ticket we should as a first step sketch the design - starting with lo-fi paper sketches and then iterate towards higher fidelity - the item display for these 14-18 stories. Which fields show up where and what does the media experience look like and so on. In parallell, as part of the test phase of iterating the designs, we need to investigate how we structure the relationship between the records so that only one comes up in search (and we need to ensure it has a thumbnail and proper title as well).

Ideas that could work here: IIIF Collection/manifest for the parent item so that one allows browsing all images, but separate objects via the hierarchical display for those who want to view detailed metadata for individual (child) items. OR model all items as WebResources of the parent, but then we'd loss some metadata of the items themselves.

[~DavidHaskiya] IIIF will also enable the representation of the recto/verso of a same item that are currently represented as 2 separate items. "
"How to reproduce:
In Main Collections do a search for star colon star
Select ""In copyright"" Sub-Facet

The ""No Re-use"" Facet selects itself!

[[image:dTNGzkNcSr5Otddmr6QqzO]]

As can be seen the ""In Copyright"" Sub-Facet shows more records than the ""No Re-use"" Facet!

Next de-select the ""In Copyright"" ""Sub-Facet
Notice that the ""No Re-use"" Facet stays selected
The Sub-Facets of the ""Limited Re-use"" Facet doesn't add up anymore to form the total for the main Facet.

[[image:cJedVINcWr5Ok-acwqjQXA]]"
"To Annotations API, from 14-18.

Based on current annotations (tags + image annotations) and Annotations API possibilities, assess if its feasible to 'batch import' these into the Annotations API. The Annotations API will provide a batch import function to do this, and will also support image annotations.

I would like to know for now:
* What kind of information is stored for an annotation in 14-18. 
* How many there are of each type.
* Roughly how much time it would cost to create a script which reads current annotations, transforms them into JSON structured annotations and then sends these per 100 or so to the Annotations API.
* Define the export format that the API-team/ [~hugo.manguinhas] want the tags in 14-18 to be exported into for easiest one-time batch import via the Annotations API. Based on this we can work on a new annotations JSON structure, a mapping and updates to the Annotations API to facilitate this migration.

Note:
* Tag migration is a must
* Image annotations will be skipped. We won't redevelop that feature unless we find new data or reason to. It's been available in 14-18 for years and we have no more than 67 made.
 "
The manifest here [http://gallica.bnf.fr/iiif/ark:/12148/btv1b6000107x/manifest.json] defines a number of images that all have a "label" property of "NP".  The viewer, however, shows only one of these images.  The viewer should be fixed so that all images become viewable / navigable in this situation.
"Our svg icons are defined in the markup.  As well as representing page weight that cannot be cached, this approach means the icons are unusable on elements (such as inputs) that cannot have child elements.

Proposal: URI encode the svg data and include it as a data url of a css background property, so that icon definitions like this in the html:

{code:java}	<svg id=""hamburger"">
	  <path></path>
	</svg>

{code}

get written like this in the stylesheet:

{code:java}
	#hamburger{
	  background-image: url(data:image/svg+xml,%3Csvg%20id%3D%22hamburger%22%3E%3Cpath%3E%3C%2Fpath%3E%3C%2Fsvg%3E);
	}
{code}

making them cacheable and more versatile."
"JS components that come with their own stylesheets are integrated into the styleguide via these (extra) steps:

(1) css files that come packaged with the js are renamed to be scss files
(2) the europeana variables file is imported and styling tweaks are made in the scss
(3) the grunt task ""js-component-styles"" is executed - the js folder is passed as the required paarameter
(4) the code calling the JS compoenent takes responsibility for loading the styling - this involved using requirejs' ""toUrl"" method to build a link element that gets appended to the dom

Currently our grunt watch task does not include provision for (3), and changes made to scss files under the source/js folder are not picked up automatically.

Proposal: update the grunt watch task to make it listen for changes to scss files under source/js and react to them by invoking the js-component-styles task on the containing folder of the file changed."
"As [~lbiedinger] mentioned in EC-11368, as the production app writes to the .log file that can sometimes grow so fast that there are problems with uploading static files.

Therefore, we need to find a solution which prevents the .log file from being a problem to other production-related operations.

*User story:* 

- As a user I want to change browse entry points, hero images etc. on the portal landingpage. 

*Problem:*

Currently every once and so often, we run into an error ""

*Solution:* 

Stop writing to the .log file to fix this permanently.

*Acceptance criteria:* 

- I want it to stop writing the log files. 
- I want to never see this message again and have it to do with the logs: 

[[image:bSYdbSUUur5OZcacwqjQYw]]


*Testing:* 

_developer explanation required_"
"The link ""Transcribe at transcribathon.com"" should open in a new tab/window.

*Acceptance criteria*
This ticket is accepted when that link on http://www.europeana1914-1918.eu/en/contributions/1348 opens in a new window.

Can be deployed to production right away when fix has been tested. So [~renekok] when tested please assign back to Richard.

[~richard.doe] when deploying, please ensure we also pull in all latest translations."
"As spiked in EC-11361.

Example record: http://www.europeana.eu/portal/en/record/2059202/ZUMR_885686080269_1_6.html?q=orchard&debug=json

Take the ""edmIsShownBy"" and pass it - urlencoded - on to the oEmbed endpoint at:
http://www.dismarc.org/player/oembed/?maxwidth=451&format=xml&url=_edmIsShownBy_

Which in the case of the example record will be the request:
<pre>http://www.dismarc.org/player/oembed/?maxwidth=451&format=xml&url=http://eusounds.ait.co.at/player/?c=Fg15geZVX2_Ts32JCDY3AHWmdZonn3HZyjkRvu0vIzDPtbkPoLEqFF_r5maICacczKlOjZIBUIUnDx067Ba-m5nyXahqGZWQ-SmIjmdB6-XZf2s0tBMsjMHFWoZnu7jGed8kcQJyCMvOsKnZV_AME7fd_D4_MFP9MAZVo-sFi-0qWefUTjb3e8hSsAGKugerRiE4HwC8OFvo7iGenilOjs46PpwnkiHTyI1qqFreboLVdplFHXHP6A==</pre>

Which returns the following response:
<pre>This XML file does not appear to have any style information associated with it. The document tree is shown below.
<oembed>
<version>1.0</version>
<type>rich</type>
<title>
BACH - Suite for Solo Cello No. 1 in G Major BWV1007, ""Gigue""
</title>
<html>
<iframe style=""border: none; margin:0; padding:0; width:400px; height:400px"" src=""http://eusounds.ait.co.at/player/?c=Fg15geZVX2_Ts32JCDY3AHWmdZonn3HZyjkRvu0vIzDPtbkPoLEqFF_r5maICacczKlOjZIBUIUnDx067Ba-m5nyXahqGZWQ-SmIjmdB6-XZf2s0tBMsjMHFWoZnu7jGed8kcQJyCMvOsKnZV_AME7fd_D4_MFP9MAZVo-sFi-0qWefUTjb3e8hSsAGKugerRiE4HwC8OFvo7iGenilOjs46PpwnkiHTyI1qqFreboLVdplFHXHP6A==&amp;w=400px""><iframe>
</html>
</oembed></pre>

From the response, take the ""html"" output and use that as HTML code to render the player.

This ticket is accepted when the example record shows this player on the item page:
http://eusounds.ait.co.at/player/?c=Fg15geZVX2_Ts32JCDY3AHWmdZonn3HZyjkRvu0vIzDPtbkPoLEqFF_r5maICacczKlOjZIBUIUnDx067Ba-m5nyXahqGZWQ-SmIjmdB6-XZf2s0tBMsjMHFWoZnu7jGed8kcQJyCMvOsKnZV_AME7fd_D4_MFP9MAZVo-sFi-0qWefUTjb3e8hSsAGKugerRiE4HwC8OFvo7iGenilOjs46PpwnkiHTyI1qqFreboLVdplFHXHP6A==&amp;w=400px"
"For this sprint:
* Back-end & front-end: Extra URL parameter: Filter on items only from one particular institution so that Sounds institutions can embed the player on their website. Eg embedding radio-player.europeana.eu/?institution=Irish Traditional Music Archive would only play tracks from the ITMA.
* SPIKE: When a user adds a genre tag, actually POST the annotation through the Annotations API. In iteration 3 we've done just the front-end and a mock Javascript call. So how do we get this to the Annotations API? To which endpoint should the Javascript POST to? Ideally not the Annotations API directly as we don't want to expose our API keys.

For later:
* Extra URL parameter: Filter only on radio items from playlists with or without annotations. This check should be part of the daily playlist generation.
* Retrieve and display current music genres/tags for the object.

View content via: https://docs.google.com/document/d/1Z0zxBs-uGslWkffk95c1kxyj8x9PNLCcENFRy64NX-M/edit#

View Jingles via: https://github.com/europeana/radio-player/tree/develop/audio"
"To design the autosuggestion functionality for Europeana Collections.

Prototype: http://mediadiscovery.europeana.eu

This users the jQuery UI Autosuggest library to power the list of autosuggestions. 

This library renders a <ul> styled list with the results.

What we need as part of this ticket is a design for our autosuggest, probably wise to align with [~andyjmaclean] as well on the choice of front-end implementation so we can keep that in mind.

To render in the output, which should go under the search box:
* Name of the entity
* Type of the entity (to represent a person, topic or place, could be an icon too!)
* In case it's a person: profession or occupation, date of birth & date of death

To play around with possible results, pass on search queries into the ""text"" parameter of this query: http://test-entity.europeana.eu/entity/suggest?wskey=apidemo&text=paris

As a background, we have done lots of preparatory work already on autosuggest in InVision and Assembla, please gather the relevant ones and use accordingly :-)"
"*Usr story:* 

As a creator I want to add a rights statement to content. 

*Problem:*
Not all rights statement are currently in the CMS. 

*Solution:* 
Update the rights statements in Alchemy like we did in the portal. 
Right statements are: https://docs.google.com/spreadsheets/d/1BhzIR65lHkWMyBYW3nyzxz_m4e8zfiv5Nr-bm549LJ4/edit#gid=0 here. 

*Acceptance criteria:* 

- I want the rights to be in the CMS dropdown
- I want to be able to select the rights
- I want the rights to display in the creditbox that goes with the image
- I want the rights to show up on the creditpage. 
"
"As spiked in EC-11382.

""The easiest thing to do would probably be to call the Alchemy::Picture::Sweeping.expire_cache_for(picture) method, after a picture is uploaded.
Maybe override the create method of the Alchemy::Admin::PicturesController to do this.
This SHOULD delete the version on the disk, some testing should be done to ensure that images don't get re-created when they get used the next time, although at this point they should only be coming from S3 already.""""

This ticket is accepted when there are no diskspace issues anymore on Exhibitions as a consequence of uploading images."
If we have defined the full interaction and agreed this can technically work as part of EC-11434, let's start to work out Carlos' design in Patternlab as a first step to this alternate landingpage.
"Pre-deploy tasks:
* Γ£ö If entity autocomplete is still not production-ready, ensure that it is [disabled in the release|https://github.com/europeana/europeana-portal-collections/commit/47ae471ea05d018c24b49386161cb3258d21ef2e]
* Γ£ö Change API URL env var to omit /v2
* Γ£ö Set annotations API key env var
* Γ£ö Update styleguide to v0.2.71
* Γ£ö #1819: Add SMTP env vars

Post-deploy tasks:
* Github release notes
* Update roadmap page
* Create static page with slug 'annotations' to explain user annotations section"
[[image:drbmgyQ_ar5QfXdmr6QqzO]]
[[image:bNrgvARkOr5OoLdmr6CpXy]]
"When doing a Year selection in the Date Facet in IE11 the graph itself does not show.
When hovering over the graph a hand shows and it is possible to do a selection of 1 year (Will be possible after EC-11399 is fixed)
The (number of) results are correct."
"
Do the following:
- Add a Popular music channel and populate it with [Internet Archive|http://www.europeana.eu/portal/en/collections/music?f%5BDATA_PROVIDER%5D%5B%5D=Internet+Archive&f%5BPROVIDER%5D%5B%5D=Europeana+Sounds&f%5BTYPE%5D%5B%5D=SOUND&per_page=24&q=provider_aggregation_edm_isShownBy%3A%2A&qf%5B%5D=what%3Amusic])

-  Update the Traditional and Folk Music to take in [select data providers|http://www.europeana.eu/portal/en/collections/music?f%5BDATA_PROVIDER%5D%5B%5D=LMTA+%28DIZI%29&f%5BDATA_PROVIDER%5D%5B%5D=Comhaltas+Traditional+Music+Archive&f%5BDATA_PROVIDER%5D%5B%5D=Irish+Traditional+Music+Archive&f%5BDATA_PROVIDER%5D%5B%5D=Tobar+an+Dualchais%2FKist+o+Riches&f%5BPROVIDER%5D%5B%5D=Europeana+Sounds&f%5BTYPE%5D%5B%5D=SOUND&per_page=24&q=provider_aggregation_edm_isShownBy%3A%2A&qf%5B%5D=what%3Amusic&view=grid] instead of filtering on media = true

- Create ready-configured embeddable players for each Europeana Sounds partner represented in the Radio player. To make it as easy as possible for them to embed them.




"
"Make the player a fluid design in and of itself so that an embedded doesn't need to modify their CSS to make it mobile friendly.
"
"*User story:* 

As a user I want to see Soundcloud embeds in the VEs displayed correctly. 

*Problem:* 

Currently the class ""ve-soundcloud"" affects the width and the height of the iframe and makes it look weird for playlists. 

*Solution:* 

Get the playlists to display in proper width and don't affect the height. 

*Acceptance criteria:* 

- I want to see the width be the same as the text. 
- I want the height to be freerange so it doesn't make it look like a playlist is only one sound. "
"*User story:* [[image:dVVQ0WSKir5OCMdmr6bg7m]]


- Europeana wants to migrate all old exhibitions to the new platform before the end of the year because we want to get rid of Omeka. 
- As a user I would like to see a page with all the credits for the content so i can go there and view the source.

*Problem:* 

At the moment: when ΓÇ£LinkΓÇ¥ field is empty in the Image blocks, the credits page will repeat the title. One with a hyperlink leading to the credits page, one as a text (see attachment). It is important for migrated exhibitions where not all the materials are linked ΓÇô Collections prefers to keep those images inside the exhibitions, even without links, rather than removing them totally. It is urgent because we plan to publish a couple of migrated exhibitions in December.

*Solution:*

What should be: when ΓÇ£LinkΓÇ¥ field is empty, on credits page the title should appear only once and just as text (without hyperlink).
*
Acceptance criteria:* 

- I want to see that if the ""link"" field in the Rich Image box is empty, the credits page will show the title just once and without the hyperlink. "
"*User story:* 

Collections wants to be able to add credits to images because we want to credit the institution. 

*Problem:* 

When the first image is an ""image"" and the second image in the exhibition is an ""intro"", the intro-credits shift up to the image-credits. Screenshots included. 

*Solution:* 

Make the credits of the intro image stick to the intro image when this s is the case. 

* Acceptance criteria;* 

- I want to see the credits of the intro image on the intro image. 


[[image:b3j8IcSKqr5Prsdmr6QqzO]]
[[image:b26OtmSKqr5O5eacwqjQYw]]
"
"*User story:* 

- Europeana wants to create smaller, one page exhibitions or exhibitions with less content because it's easier than creating a full exhibition
- As a user I want to see something that is easy to digest and will take me back for more
- Europeana wants to have something in the feature boxes which is easy to create and gives the user a reason to come back every day. 

*What do we want?*

Europena has recently started doing smaller curated exhibitions to fill the feature boxes in the Collections. These are still marked ""exhibitions"" or ""what's new"" but are in the Exhibition space and always have a breadcrumb that leads back to ""Exhibitions"". But; they are not always added to the voyer. 

This is a mess. 
 
Currently we only have a voyer for the exhibitions and ""galleries"" (if we choose to go with that name) are not a part of this. We do create them and they can be accessed from the different channel landing pages, but there is no way for a user to know that they are viewing a gallery and not an exhibition. This can be confusing. Also, there is a different set of rules for Galleries and Exhibitions.  

I want to start creating a plan how to tackle this and what needs to be done in order for this to work. As soon as this ticket appears in the sprint I want to start working on User Stories to update this ticket with. 

Inspiration:

- Look at daily digest at GCI https://www.google.com/culturalinstitute/beta/?hl=nl 

Possible taxonomy: 

- Galleries
- Timelines
- Playlists
- Readinglists
- Blog 
- Course 
- Tutorials"
"*User story:* 

- As a user I want to see the correct rights statement with a record so I know whether I can use it or not. 
- Europeana wants all products to align as much as possible because it gives a universal appearance and is clear to the users. 

*Problem:* 

Currently for some of the rights statements in Exhibitions, the icon is missing. Not cool. 

*Solution:* 

Hook up the rights statement with the correct icon. 

*Acceptance criteria:* 

-  I want to see icons for all the missing right statements which are: 

_In Copyright  EU Orphan works_ (http://rightsstatements.org/page/InC-OW-EU/1.0/?language=en)
_In Copyright Educational Use Permitted_  (http://rightsstatements.org/page/InC-EDU/1.0/?language=en)
_In Copyright_ (http://rightsstatements.org/vocab/InC/1.0/)
_No Copyright - Non Commercial Use Only_ (http://rightsstatements.org/page/NoC-NC/1.0/?language=en) 
_No Copyright - Other known Legal Restrictions_ (http://rightsstatements.org/vocab/NoC-OKLR/1.0/)
_Copyright Not Evaluated_ (http://rightsstatements.org/page/CNE/1.0/?language=en)

- I want to see these icons appear in the credit box next to the rights statement
- I want the icons to be the same icons as we use for the portal
"

"On narrow viewports the inline search form is hidden, and accessed via a button with the same appearance as the form submit button.

See here:

https://projects.invisionapp.com/share/CS146E9BR#/screens/204151647_Collections_Fashion_Homepage_It04_Bpsm"
"*User story:* 

- Europeana wants to open up the VEs platform to partners because they should be able to create their own exhibitions
- As a user I want to be able to log-in to Alchemy to create my own exhibitions. 

*Problem:* 

We can add / remove new users to Alchemy and assign roles, but the problem is that the confirmation email should be send to the user. Currently when adding a new user, no confirmation email gets send out. 
There must be something wrong. (See attachment for more info) 

*Solution:*

Fix this. 

*Acceptance criteria:*

- selecting the option ""Send email with credentials"" and clicking ""save"" afterwards should send out an email with credentials to the user that was just created. 
- the email should contain: 

_Welcome to our Europeana Virtual Exhibitions Platform
You can now start creating your own Virtual Exhibitions by using the following credentials: 

username: <insert username Admin created in the field ""login"">
Password: <insert password giving by the Admin, created in the field ""password"" / ""Password confirmation"">

Should you have any questions, please contact Maggy Szynkielewska via maggy.szynkielewska@europeana.eu. 

We hope you enjoy your experience!

Kind regards, 

The Europeana Team_

- I want to see a confirmation for the creator that says that an email has been sent to the user. 
The text could be: 

_""An email has been send to <insert email address>""_

*Testing this ticket;*

Set the ticket to Michelle.vanduijn when testable and I will test it myself. 





"
"I do a search, works fine, next I select New Zealand sources. Then I get an error message.

[[image:b-i9UYTHGr5QSEdmr6bg7m]]"
"The radio player needs to support genre tagging of audio recordings it is playing.

This should go via the radio station app to the Annotations API.

See parent ticket for more detail.
"
"_this ticket is a subticket of EC-11429 and is based on numerous conversations with the team_

The MVP for Europeana Radio should show a working radio and should live on a static page in (CMS settings) full width. 

*Acceptance criteria:* 

- I would like to see a working Europeana Radio displayed on a portal page. 
- I want to see the following things:

*A player block*
which should look roughly like this:

[[image:azUVi8TW0r5QHpacwqjQYw]]

- I want to see the title of the recording (dc:title). The title must be clickable and open up the item page in Europeana in a new tab.
- I want to see the artist (dc:creator)
- I want to see the licence (edm:rights)
- I want to see the image that goes with the record displayed (otherwise the image that is showed in the image) (edm:preview)
- I want to see a playbutton that turns into a pause icon when you hit it 
- I want to see these buttons working (play=play pause=pause)
- I want to see a skip forward button. Clicking it loads the next random track.
- I want to see a working duration-line. 

*A Playlist and Annotation block*
That looks roughly like this: 

[[image:cU7StMTW0r5Ooodmr6CpXy]]

For the playlist: 

- Unlike the above image I want to see 2 tabs with lists of channels in each, one with the genre channels  and one with the institutional channels
- I want to see these tabs working: one should have the list of institution channels and the other one should have genre channels (Classical music, Traditional and Folk music, Popular music). The genre channels should be the first and default tab.
- I want to see a ""play"" icon in front of the channel that is playing. 
- I want to see a music key icon for all the channels that are not playing. 

*The annotation block:* 

- I want to see the annotations block visible when a song is playing
- The annotation block should not show up when the ""jingle"" is playing. (more about the jingle next) 
- There needs to be a box where people can type in their genre. The user must receive autosuggestions of the available genres and must choose one of them. They cannot type in freely.
- This should showcase a predefined list of genres. The user must choose one of them, there can be no ""free tagging"".
- Users need to have a button or some other indication that shows them that they are adding their genres. 
- There should be displayed what users have already added as genres. It would be a nice to have to also block user X from tagging with a genre that has already been added by user Y
- The text should be clear that we are refining the music genre and we want users to help us out
- The list of genres should have consistent formatting (capitals and lowercase) 

*Jingles:* 

- I want to hear a ""jingle"" when you press play (the first time in a session)
- I want to hear a jingle when you switch to one station to another station (like between classical and folk)

View content via: https://docs.google.com/document/d/1Z0zxBs-uGslWkffk95c1kxyj8x9PNLCcENFRy64NX-M/edit#
View Jingles via: https://github.com/europeana/radio-player/tree/develop/audio
List of all genres: https://github.com/europeana/radio-player/blob/develop/music-genres/genres.json

For testing: http://europeana-radio-player-test.cfapps.io/

*Need to think about the following:* @remygardien 
- Do we want to be able to open a playlist, to show the list of recordings/numbers that we are waiting for to play?"
"
*user story:* 
 

- As a user I want a good navigation experience. 
- As a user I want to navigate through the exhibitions. 


*Problem:* 
 

The URL creation in Exhibitions is off. This is something that only recently broke because it used to add the correct URLs automatically. 

_Before:_ 

URL of the intro / start of the exhibitions before:  http://www.europeana.eu/portal/en/exhibitions/the-colossus-of-leonardo-da-vinci
URL of the first chapter (so the one after the exhibition intro: http://www.europeana.eu/portal/en/exhibitions/the-colossus-of-leonardo-da-vinci/the-protagonists
URL of the second chapter: http://www.europeana.eu/portal/en/exhibitions/the-colossus-of-leonardo-da-vinci/two-concepts-for-the-statue

_Current situation:_ 

URL of the intro / start of the exhibitions now:  http://exhibitions.cfapps.io/portal/en/exhibitions/sausages-and-cigars-for-christmas
URL of the first chapter (so the one after the exhibition intro: http://www.europeana.eu/portal/en/exhibitions/hatzenport-during-the-war
This should be http://exhibitions.cfapps.io/portal/en/exhibitions/sausages-and-cigars-for-christmas/hatzenport-during-the-war


*Solution:* 
 

Fix this. :(

*Acceptance criteria:* 

- I want the urls to display like in the first example
- I want the URLs to be generated automatically that way when we create the chapters in the cms. 


*Testing:* 
 
Assign to [~Michelle.vanduijn] or [~Maggy] for testing. 

_This ticket has high priority because the collections team wants to publish a new exhibitions by 12-12-2016_

"
"The British Library have many sound recordings they cannot, for technical and/or legal reasons, provide direct links to the media files for. But they have now have an oEmbed compatible player.

They want to update their dataset in Europeana so that there is a player link in edm:isshownby. What should they add there? The player URL? The oEmbed call URL?

Example item:
In Europeana, http://www.europeana.eu/portal/en/record/9200253/BibliographicResource_3000055618391.html
In BL, http://sounds.bl.uk/Environment/AR-Gregory-Kenyan-bird-recordings/022M-WA03044X0033-0005V0 which has proper oEmbed URLs in its header
Player URL as resolved in the browser is http://sounds.bl.uk/embed/Environment/Listen-to-Nature/022M-WA03044X0033-0005V0
"
"The alternate channel landing page requires a new type of facet that shows thumbnails to the left of the options / facet items.

See here:

https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633_Collections_Fashion_Homepage_It04_Bpxl"
"The purpose of the spike is to estimate the feasibility and effort needed to output Radio player stats. Desired format is JSON with CSV as a nice to have.

Metrics:
- Which data providers (institutions) are included in the radio
- Total number of tracks (webresource)
- Number of tracks per data provider
- Number of tracks per radio channel
- Number of plays
- Number of plays per radio channel
- Number of plays per data provider
- Number of plays per track
- *All number of plays stats to be sliceable per month and year*
- Number of tracks in the player that have been annotated/tagged and which ones

"
"To deploy the statistics dashboard v2.0 (refactored version) to an acceptance environment on Pivotal.

For [~renekok] and @jpekel (if possible) to do thorough regression testing and when all is OK to deploy this to production."
"* handle more complex models: new fields [description, news-type, dates]
* handle non-square images
* update next / prev controls (as per [this|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633_Collections_Fashion_Homepage_It04_Bpxl])
"
"*User story:* 

*_- As a User, I would like to see my searches completed so I can easily find what I am looking for_*


* When a user selects an entity from the autosuggest list, the portal should fire a search for the URI together with the label. A search for Leonardo da Vinci should fire the search request:
""http://data.europeana.eu/agent/base/146741"" OR ""Leonardo da Vinci""
(so URI encapsulated by quotes OR the prefLabel encapsulated by quotes)

* The language of the suggested entities should be that of the UI-language. If no match default to English. NOTE: This feature is dependent on an improvement of the Entity API to be able to handle language. See related ticket in the APIs scrum.
* 
* Use the scope parameter in the API call to the suggest method of the Entity API. Add in &scope=europeana to the suggest call to ensure that suggestions are represented in Europeana.
* 
* In the front-end in the search input box, when someone clicks the Entity, it should not be displayed as a regular keyword but as a special 'entity keyword'. Maybe we should wrap it into a box or something with a certain colour. For the example in bullet 1 we could show something like ""Leonardo da Vinci"" as a regular keyword but in a different colour, which then in the background is a search query as can be read above. This way we clearly differentiate entity searches from regular searches.
 
* We should ensure we have metrics in place so we can measure the success of the Entity API and also obtain metrics which we can use to further improve it to user needs. We should:

# Log the entity search in the ELK-stack. For this, I don't think we should do anything because the ELK-stack can just filter on ""data.europeana.eu"". [~timothy.d.hill982002] correct me if I'm wrong. - CHECKED: should be fine for now.
# Can we also log these entity searches in GA? Maybe add some property to the search URI or something? I'd like to measure differences between entity and non-entity search and compare with other metrics such as browsing time, # pages visited etc."
"In the EC-11483 spike we established we could support the BL (o)embeddable player. This ticket is to implement that support. There's no formal due date but as it's part of Europeana Sounds, which ends on January 31 2017, we should have finished and put into production the support before that date. Ultimately adding support for the BL embeddable player will make 1000s of more items directly playable in Europeana Collections and thus improve its rich media experience - that's the business motivation and value.

*Sample content to develop against*
British Library already has a number of items in Europeana that conform to the requirements defined in EC-11483 :
http://www.europeana.eu/portal/en/search?q=proxy_dcterms_isPartOf%3A%22Oral+history+curator%27s+choice%22&view=grid

Example item from that search result:
http://www.europeana.eu/portal/en/record/2059209/data_sounds_OH1CD0342832_0001.html?debug=json

Which should be all that is needed to implement.

*Acceptance criteria*
For the example item it should embed and load the BL audio player in the itemd display, just as for other embeddable players."
"@jpekel [~lbiedinger] - In this ticket I will collect my findings. Later we will get through this ticket and decide how to deal with it


1) Top 25 items when selecting show all:
For the full year it shows actually 25 Items
When selecting a month it shows only 24 Items

2) I can not browse Dashboard by Country
(Select from Map returns error: The page you were looking for doesn't exist.)

3) When the Data is still generating you get an message saying:
The page you were looking for doesn't exist.
We should give more appropiate and clear message

4) Sorting of the list of Institutions:
Initially you get a list sorted in the Backend. The Backend seems to take care of diacritics.
There is at the top of the ""All Data Provider Reports"" Page a button that allows you to sort Alphabetically or contra-Alphabetically.
When using this button different rules are applied for where the diacritics fit in the sort-order than when done by the Backend.

5) In the ""Norway Monthly page views of items"" there is a pie graph. The numbers and percentages of the pie parts don't add up to the total.
Found this in Test

6) Down at the page there is the map showing countries. The explanation (after clicking the question mark) says:
These countries generated the most views for this collection this year.
But I don't have any collection selected.
So what is actually shown here?
After some more staring at the page I think that it is about all the collection belonging to the current Data-Provider, Data-Aggregator or Country

7) The ""AVAILABLE FOR RE-USE"" Pie-Chart showing different Re-Use options.
It would be nice to be able to right-click them to open the search for the seleted Re-Use option.

8) In the column with the Pie-Charts there are the sections:
AGGREGATORS SHARING COLLECTIONS
and
CULTURAL INSTITUTIONS SHARING
Both point to:
http://europeana.eu/portal/browse/sources
What is the use of this ?

"
"In follow-up of EC-11156, add some logic to the annotations display.
Currently we only support the Wikidata annotations, where the URI is in the body/@graph element of the annotations metadata.

So currently the logic is:
* Take the URI from the body/@graph/sameAs field and display as clickable URI as ""Relations"" in the ""User Annotations"" block.

It should become:
* See if there is a URI in the ""body"" field in the annotation.
* If there is no URI, see if there is a URI in body/@graph/sameAs.
* If there is no URI there either, don't show the annotation.
* Otherwise, show the value URI as clickable URI as ""Relations"" in the ""User Annotations"" block."
"Let's talk this in person, I have a list which we can go through.

Update:

Here's the list of the provider logos that the EFashion has sent:
https://docs.google.com/spreadsheets/d/1q4E-W_DoK5NObiOobnmPdj3mvhaxSLz9DOLHBGLHgpg/edit?ts=58594dad#gid=379453636

With the deadline getting closer, the best location for the logos that were provided (full colour, small size and with background colour) is right under 'Find More' label on the right column of the item page. "
As spiked in EC-11498.
"

*Acceptance criteria:*
The UI design must confortm to https://invis.io/XA9QHCEPR


Casrlos has also added a few comment that might help [~andyjmaclean] with the styling regarding:
[Small Europeana Logo|https://projects.invisionapp.com/d/main#/console/1083571/211226074/comments/76215197]
[Tabs|https://projects.invisionapp.com/d/main#/console/1083571/211226074/comments/76216143]
[Listing|https://projects.invisionapp.com/d/main#/console/1083571/211226074/comments/76216912]
[Tag Component|https://projects.invisionapp.com/d/main#/console/1083571/211226074/comments/76247187]"
"Based on references/documents in EC-11407.

This ticket is for me, Carlos & Lutz to work together and create a visual item display of what a 14-18 item would look like in the current Europeana.eu item display. We should use one or two 'full' records as an example, and based on that assess what we need to change/improve in order to provide a rich user experience for 14-18 records. What would be good to do is to also reference the exact field names in the visual, so we know exactly which data is coming from where.

I will be coordinating/cross referencing fields, Lutz can provide input on item display logic & Carlos can mock it up.

As for the complete overview of fields/mapping as provided in EC-11407, we should also make an overview of which fields will be missing (if any) from the item display.
This ticket and the next can work as a suggestion for a new/improved way of mapping.

We should spend no more than half a day on this per person, maybe Carlos a bit more."
"As a contributor of UGC to Europeana's 1914-1918 thematic collection, I want to be able to do the following tasks on the Europeana Collections site, not on a different site:
* register a user account
* login to my account
* update my account details
* start a new contribution
* save a draft of my contribution
* finish my contribution and submit it
* review my current/past contributions

A spike was conducted last year to investigate possible strategies for the UGC process in the thematic collection of 14-18, for context & reference:
https://docs.google.com/document/d/1SRSJzhdQxf1i-rzVAKJImVz1LWOeZG1W2BmLUJ-hja4/edit#heading=h.za3uggkwxomm

It has been decided to go for ""Strategy 2: partial deprecation"", meaning that in the first iteration of a 1914-1918 thematic collection with UGC support we will *present* the above functionality to contributors on the Collections site, but continue to have the existing 1914-1918 application doing the work, i.e. processing and storing these form submissions.

(NB: It is acceptable to still use 14-18 for admin/management of for instance stories by an administrator.)

This ticket is to:
* Create an overview of things we should find out to implement this strategy as well as dependencies (MyEuropeana will be one).
* Create a technical design/overview of how we will implement this.
* Create an overview of tasks which need to happen to implement this."

"followup ticket from #1745

Requires EC-11443 to have happened

commits that introduced custom logic: 
https://github.com/europeana/europeana-virtual-exhibitions/commit/a5e7f064cd425684929cf699b7a6c0c348bcc75c
https://github.com/europeana/europeana-virtual-exhibitions/commit/2393dcf77b0ac6cf16615af40b104734819a3e46"
"*Issue*
On Europeana Collections images intended for use on the landing pages are often uploaded at great resolution (even when used as promo tiles) and minimal or no compression. This makes the page weight of the page very large and thus loading times correspondingly slow which has a negative effect on both UX (esp. on mobile devices) and SEO (load speed is a ranking signal). 

Practical experience shows that in many cases and for most humans compression and even colour reduction is hardly noticeable. See e.g. https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/image-optimization#optimizing_raster_images

An example is http://www.europeana.eu/portal/en/collections/art where for example the Da Vinci promo tile is a full 1419x1419 pixels/841kb (can be reduced to c. 400x400, compressed and even perhaps reduced to a 256 colour depth). The hero image weighs in at 575kb with likely no or very low compression of the JPG. A compression to 10-30% would reduce the hero iomage weight to about 30-50kb which is significant gain and with little discernable quality loss.

Compressing these two images would reduce the page weight with c. 1MB which is a lot (esp. over slower connections).

*Proposed solution*
Update the CMS editors manual with information in regards to image compression and processing pre-upload and ensure all CMS editors are made aware of the issue.
"
"Pre-deploy:
* Γ£ö Production deployment of the styleguide (v0.2.72)
* Γ£ö Set styleguide to v0.2.72
* Γ£ö EC-11495: run db migrations via jobber
* Γ£ö Assess on acceptance the impact of running migrations wrt removal of old facet_field and facet_value columns"
"Pre:
* Run db:migrate via jobber
* If entity autocomplete is still not production-ready, ensure that it is [disabled in the release|https://github.com/europeana/europeana-portal-collections/commit/47ae471ea05d018c24b49386161cb3258d21ef2e]


Should include: 
EC-11299 - ELK logging 
EC-11514 - Norwegian locale broken links
EC-11390 - Data provider names with double quotes 
EC-11428 - Dismarc player 
EC-11515 - Music genre annotations in item display"
"This is a follow-on ticket from EC-11299.

Right now the ELK-stack misses right-click-to-open-in-new-tab interactions from the SERP in at least one browser (Safari on Mac OS). Comprehensive testing needs to be done to ensure logging is functioning for all browsers.

The problem seems to have something to do with how URL-rewriting is carried out for redirects. Compare the URL generated by left-click and right click in Safari:

Left-click:

http://acceptance-npc.eanadev.org/portal/en/record/92097/BibliographicResource_1000126671376.html?q=hogarth

Right-click:

http://acceptance-npc.eanadev.org/portal/en/record/92097/BibliographicResource_1000126671376.html?l%5Bp%5D%5Bq%5D=hogarth&l%5Br%5D=2&l%5Bt%5D=1370&q=hogarth"
"Iteration 1: EC-11499

* Ensure the image is clickable too"
"The music genres tags generated in Radio are displayed in Collections. Example: http://www.europeana.eu/portal/en/record/2048401/item_67N3P3NPPHRPXD5ML2RBOBWMVDOZXEET.html

But the display needs to be refined for human readibility (and also so that Google can index the label when crawling the HTML of the page).

*Acceptance criteria:*
* It's clear that the annotation represents a music genre
* The English label is displayed (with the Wikidata URI in parenthesis) when the UI language is set to English, the French when it's set to French, etc. English as fallback when there's no UI prefLabel language match.
* So, for the example item, and UI = English, display *Music genre:* Choral music (http://www.wikidata.org/entity/Q1076513)

*Implementation ideas:*
Since we don't actually currently dereference (we should, ticket forthcoming) the Wikidata labels we could use qLabel https://opensource.googleblog.com/2014/04/qlabel-multilingual-content-without.html to display the label dynamically (and in a way that matches the users language).

OR as [~hugo.manguinhas] suggested:
We use the Wikidata URI to look up the entity (via SameAs references between Wikidata and Europeana Entities) and appropriate label in the Entity Collection and display its structured language labels."
"Where the thumbnail for a similar item is absent, i.e. no URL for one is passed to the template for the item display page, the template writes the following to the HTML for each similar item:

{code:java}style=""background-image: url()""{code}

This appears to result in browsers making a second request for the _item page itself_ which is of course not an image.

This delays page load time, wastes network resources, and impacts performance of the app instances."
"The EDM resources that are currently available at http://www.europeana.eu/schemas/edm/ which are deployed from https://github.com/europeana/portal-apache-web/tree/develop/htdocs/default/schemas/edm need to kept in-sync with CoreLib https://github.com/europeana/corelib/tree/master/corelib-edm-definitions/src/main/resources/eu which should be the master copy.

This ticket is to investigate how the two can be kept in-sync."
"*Note:* #1873 should be attempted before this ticket. Only if #1873 is not feasible and is abandoned should this ticket be undertaken instead. If #1873 proves feasible and is implemented, then this ticket may be considered invalid.

At present on the item display page for an object with a hierarchy, no HTML representation of the hierarchy is rendered.

The raw JSON response from the hierarchies API is included in the HTML, which the JS hierarchies viewer parses and uses to construct its display.

*No HTML links to the other items in the hierarchy are rendered. This prevents any navigation of hierarchies by JS-less clients, failing to gain any SEO benefit coming from interlinking related objects in hierarchies.*

Example record: http://www.europeana.eu/portal/en/record/9200300/BibliographicResource_3000051831231.html -- view the source, search for ""/9200300/BibliographicResource_3000051785210"" (a sibling) and you will see that the hierarchy is the raw JSON dump from the API.

*Acceptance criteria*

HTML representation of the hierarchy, not dependent on JS, displayed to JS-less clients.

Suggested structure: 
{code:java}<ol class=""hierarchy"">
  <li><a href=""/9200300/parent.html"" rel=""up index"">Parent</a>
    <ol>
      <li><a href=""/9200300/first-preceding-sibling.html"" rel=""first"">First preceding sibling</a></li>
      <li><a href=""/9200300/other-preceding-sibling.html"">Other preceding sibling</a></li>
      <li><a href=""/9200300/previous-preceding-sibling.html"" rel=""prev"">Previous preceding sibling</a></li>
      <li>Current item</li>
      <li><a href=""/9200300/next-following-sibling.html"" rel=""next"">Next following sibling</a></li>
      <li><a href=""/9200300/other-following-sibling.html"">Other following sibling</a></li>
      <li><a href=""/9200300/last-following-sibling.html"" rel=""last"">Last following sibling</a></li>
    </ol>
  </li>
</ol>
{code}

As a nice-to-have, the JS hierarchy viewer would parse this HTML list, eliminating the need for embedding raw JSON in the page."
Currently a login is needed for that. The about page is hardcoded by [~lbiedinger] to be public, but we need to be able to publish more. While working on this I also suggest to look at the url path. So it would becomes something statistics.europeana.eu/pages/xxx
See EC-11531 and EC-11363. Two different solutions in place for the same thing. Not ideal and difficult to maintain.
"As a user I feel Europeana's content is more trustworthy when it is clearly, visually clearly, coming from a museum, archive or library.

As a data partner I feel my contribution to Europeana is more rewarding if my brand is present in the display of high quality media we've provided.

*Collections CMS support developed in:*
EC-11104

*Designs:*
https://projects.invisionapp.com/share/CS146E9BR#/screens/214748233_Collections_Fashion_ItemPage 
The mock-up also has a comment with regards to the implementation (size etc.):
https://projects.invisionapp.com/d/main#/console/1083571/214748233/comments/77070494

*Test logos to work with during development:*
If we have no logo to test with, please upload a few from this spreadsheet:
https://docs.google.com/spreadsheets/d/1RaqIo1dmZg9CSKRyLSMoJIJaNP_Uwk0t7lemNB8iLUg/edit#gid=0

*Acceptance criteria:*
Data provider logos can be displayed in the item display as specified in the designs and using logos drawn from the Collections CMS."
"To ensure we include children of children in the musical genres of Wikidata.

Example of a genre which is now not included:
https://www.wikidata.org/wiki/Q8701407 (Waltz, a subgenre of Chamber music).

We should enhance the query, then regenerate the list of music genres and re-deploy Europeana Radio.
Query/script: https://github.com/europeana/radio-player/blob/develop/music-genres/populate-genres.php
(we might want to rewrite this to Ruby at some point but I guess Richard can run this script as well..)

[~hugo.manguinhas] to take care of the new query first."
"We need to specify the redirect patterns of:
* Fashion static pages (About, Press area, etc.) to Pro page(s)
* Events to in-Collections events
* Blogs to in-Collections blog
* Themes to Galleries

and so on, to their intended equivalent in Europeana Collections and Pro.

Note:
Fashion portal item pages to Collections item pages is a different ticket 
"
"To include:
* Some small db fixes and improvements arising out of EC-11548 and requiring db:migrate be run
* *Not* the BNF station itself from EC-11548"
"When viewing the Fashion Landing Page on Ipad in Portrait, the Fashion Logo is taking up almost the whole screen.

[[image:cUhPUe3yKr5QvEdmr6bg7m|Fashion Logo Mobile Viewport.png]]"
"In general: make it more like the design:
https://invis.io/CS146E9BR#/203791633_Collections_Fashion_Homepage_It04_Bpxl

* [Increase padding next to text|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77312524]
* [Show the slug below intro text same as in design|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77311295]
* [Browse entry points title smaller|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77313747]
* [Make facet list more like design (spacing, font size)|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77315876]
* [Thumbnails to be square, forced|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77315922]
* [Increase distance from top section and promo title and decrease distance between title and promo blocks|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77319041]
* [Increase whitespace in between promo boxes as design, text in promo box should not be bold. Don't have to be square.|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77319812]
* [Sneak peak needs the horizontal ruler|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77358633]
* [Reduce size of input box email address so the text fits|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77359013]
* [Hide the nav elements for what's happening if there's no more elements to navigate to.|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77359768]
* [Carousel texts needs more padding to the bottom and more padding to the left of the text to match the right.|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77361031]
* [Add extra bottom padding to what's happening when it's on top of the blue banner.|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77361987]
* [Ensure a ""show more"" link below the sneak peak to allow for a full search of the results in sneak peak|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77362186]
* [Ensure the image is clickable in the what's happening|https://projects.invisionapp.com/share/CS146E9BR#/screens/203791633/comments/77362206]

Iteration 1: EC-11499
"
"*Background:* 

The Europeana Fashion portal is closing in March and Europeana is migrating all of their content to a Thematic Collection. 
Now that we have tackled the ""Themes"" by Spiking the Galleries last sprint; this sprint we would like to investigate how where and how we can deal with the events (for reference check: http://www.europeanafashion.eu/portal/eventoverview.html) and (from a technical point of view) their Blog (see: http://www.europeanafashion.eu/portal/blogoverview.html). 
It was already decided by the Collections team that the Fashion blogs can be hosted on the Europeana End User Blog. (Category would be ""fashion"") 

*Problem:* 

Europeana Collections currently doesn't support Events and the blog is not fully integrated in the (technical space and design of) Collections. The End-user blog currently also has a separate CMS system (wordpress). What we would really like investigated for this spike is how to best technically implement and integrate these events and the Blog with Europeana Collections. 

Also; the current blogs and events need to be migrated to Collections and up until this point it seems to be that this will be a manual process. For this Spike we would like to investigate how to tackle these problems from a data, design and technical point of view and get an estimation of the time it will take to implement this. 

*Editoral data that is required:*


*Blog:* Title, author. date of publication and update, category (with the possibility to add multiple), tags (one or more), blog text, abiility to include one or more image per blog post,  abiility to include embeds (like youtube / video / soundcloud), the possibility to add links in the body text and other basic formatting like paragraphs/bold/italics and so on. Comments are a nice to have and if we implement them they should be Disqus based.

The blog display must include social media buttons (facebook, twitter, pinterest, etc. - same as in Collections elsewhere) for sharing. It's a nice to have to be able to include a picture and the name of the  blog post author. Another nice to have is an estimated time to read, using e.g. https://github.com/michael-lynch/reading-time

For reference and inspiration, see.eg. http://blog.europeana.eu/2017/01/access-easily-sounds-from-europeana-sounds-collections/ and http://www.europeanafashion.eu/portal/blogdetail.html?post=maria-callas-from-diva-to-icon) 

*Events:* Title/name of event, body text, images in body, date of publication, start time and end time of the event, location/map for the event. Events should be possible to classify into Categories, like Exhibition, Conference, Workshop, etc.

For reference and inspiration: http://pro.europeana.eu/event/digital-past-conference-2017 and http://www.europeanafashion.eu/portal/eventdetail.html?event=exhibition-across-art-and-fashion 

*Notes on the Design:*
See ticket [EC-10982|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/1259-end-user-blog-migration/details] for reference

The most important thing here is that the design will fit the Europeana Collections design without reinventing the wheel entirely as we already have good designs for blog and event in Pro/COPE. 

*Suggestions and nice-to-knows:*

- The Fashion blog currently runs on Wordpress as does the End User blog. There might be a plug-in to support the migration but the Wordpress version of our End-User blog is terrible outdated so we can't tell what will happen if we update this and install a plug in. 
- We would like to have as few CMS's running as possible, so it would be very nice if we could decide on one CMS to rule them all or at least take a step towards that by eliminating Wordpress.
- We could use COPE and PRO designs as a base for the visual designs for both Blogs and Events. 

*Acceptance criteria:* 

We want to know how much time it will cost to implement this and what would be the best way to go about this while being able to keep the launch date of Fashion which is first week of March.

At the end of this SPIKE we need to have the following:

- One or more suggested solutions for which CMS to use, with one recommendation from a technical point of view
- Estimation of implementation per solution
- Pro's and Con's per solution, incl. ease of migration of legacy blog posts and events
- Designs in Invision for Blog list, Blog post/page, Events list, Event page. 

So that we in Sprint 40 can begin implementation based on proper technical and UI designs and have a production ready solution in place by the ned of Sprint 41.
 






"
"This epic is based on the conversations in ticket [1798|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/1798-spike--editorially-created-image-galleries/details] and the designs provided in ticket [1426|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/1426-ui-visual-design-of-a-gallery-feature/details]

This Epic is split into two child stories, one for the CMS work and one for the front-end display. This work must be well coordinated so that back-end and front-end are aligned. The stories can be further split into sub-tasks should the developers wish to do so.

Note that the intention is not to production release the Galleries feature after this sprint. The intention is to make a working version available in test and the further refine this feature, if needed, in Sprints 40 and 41 before going live.





"
"*User story:* 

- As a user I want to see the proper credits displayed when I view an exhibition
- As an editor I need to insert the credits into the exhibition 

*Problem:* 

Currently in the CMS whenever you upload the 2 pictures that are needed for the slider feature, the credits appear backwards. 

[[image:cbWzPi3U8r5QlcacwqEsg8|left-right_bug.png]]

*Solution:* 

We would like to see them displayed properly in the sence that the left credit reflects the left credit and the right one reflects the right one. 

*Acceptance criteria:* 

- I would like to see the left image displaying the credits that belong to the left image
- - I would like to see the right image displaying the credits that belong to the right image"
"Currently when you upload a data provider logo in the CMS, there is a limitation that you can't upload any image smaller than 300px in width.

This is currently enforced, and this needs to be disabled to allow uploading of smaller logos. Something we permit for the Fashion project but a policy we'll likely revise in the course of the year, so for now this needs to go in order for our Fashion partner to start uploading logos.

Also make sure that partners can upload JPG images, and not just PNG.

[~Michelle.vanduijn] Please notify Marco when this has been removed, so he can resume uploading logos."
"STUB ticket, not Ready for injection in a Sprint log.

IDEA:
Make Galleries embeddable via JS-widget (worst case an IFRAME but not sure that would work) in Exhibitions, see mail from Douglas below
To be embeddable a Gallery must have only CC or PD licensed images? Then we could open up for all users to embed them.Which would make them available also off-Europeana and reach even more users. Should be coupled with the ability to get stats on their use. One way to do that could be to power the feature via Embed.ly as we do in 14-18 and which gives us off-site impressions in the Embed.ly stats console.

Mail from Douglas that also clarifies the internal need:

{code:java}If - and tell me if I'm being greedy - the gallery feature could also be deployed within the exhibitions platform, that would be great.
 
The current full-width image focused presentation works really well for fine art etc. but is not well suited to objects such as jewellery and ceramics. It would be good to have the option of presenting a (dynamically tiled based on image aspect, a la Europeana Collections?) grid selection of objects, within the page width, from which the user could choose to enlarge and, if desired, visit item pages. One current workaround is embedding a Pinterest board but that's less than optimal, for obvious reasons.
 
An outcome of the current platform's constraints can be that small exhibitions end up having a disproportionately large amount of navigation. For example, the WWI Sausages exhibition is less than 900 words long but has six chapter tiles and quite a lot of scrolling for a relatively small exhibition, IMO. Having the gallery feature, and other options to compactly present images, might alleviate this.
 
Working on the new Art Nouveau exhibition has surfaced these thoughts, in case you're wondering! I do understand the platform is relatively new and I definitely appreciate all of the hard work that's gone into its creation and development thus far.
{code}"
"Make one production update of Europeana Radio. Once the tickets:
EC-11564
EC-11585

have been succesfully acceptance tested.

Deployment tasks:
# Both the player (v0.2.1) and the station (v0.2.2) will need to be deployed
# See https://europeanadev.assembla.com/spaces/europeana-npc/tickets/1864/details?comment=1132426353"
"A proof of concept was created for EC-11509. This should be added to Github and made production-ready.

Do all the prep in Sprint 40 and the actual redirects in 41."
"The new gallery component mentioned in EC-11588 specifies that the galleries will be accessed from a submenu of the primary navigation menu.  The current implementation of this menu requires changes to templates, stylesheets and the model to accomplish that.

Proposal: use a recursive template to handle any combination of submenus and items."
"The goal of this epic is to move as many API calls as possible made at present during initial generation of an item page so that they are instead triggered by the front-end after page load.

The need for this is that the performance of the item page is very poor, typically taking 2.5s-4s just for the initial HTML content response from the server. The primary cause of this poor performance is the number of calls to APIs made by the portal application to gather all the data required to generate all the features for the item page up-front. As we add features to the item page dependent on APIs, the number of external HTTP requests increases, response time increases, usability decreases, which very likely frustrates and disengages members of our user base.

* Background spike: EC-10958
* Google doc with proposed changes: https://docs.google.com/document/d/1ySfQeIeVScjFkUxEkY4xGZfd26oJeVy7oxhpCDnV0Ks/edit?usp=sharing

It is essential that during testing of any resultant changes that we check that Google's crawler is able to render, and therefore index, any content moved to population by JS, by way of its Search Console ""Fetch as Google"" tool."
"For context, see parent epic, and links to spike and Google doc therein.

When on the item page, a call is made to the Hierarchies API so that item hierarchy can be displayed. This is at present made by the Rails application during initial page generation, but should not be. Instead, once the item page has been loaded, the front-end should be responsible for initiating a new request to the Hierarchies API (via the Rails application) and constructing the on-screen hierarchical representation from that response.

Acceptance criteria:
# No call is made to the Hierarchies API during initial generation of the item page
# When both proxies.dctermsIsPartOf and proxies.dctermsHasPart are absent, the front-end makes no attempt to retrieve hierarchy data
# When either proxies.dctermsIsPartOf or proxies.dctermsHasPart are present, the front-end requests hierarchy data via the Rails app and if present displays it on-screen
# Presentation of hierarchies to remain the same as at present
# Google Search Console ""Fetch as Google"" must render hierarchies for items having them

Follow-up:
* Should this ticket be implemented, mark EC-11558 invalid
* Should this ticket not be feasible, EC-11558 should be undertaken instead"
"For context, see parent epic, and links to spike and Google doc therein.

When on the item page, a call is made to the Search API so that similar items can be displayed. This is at present made by the Rails application during initial page generation, but should not be. Instead, once the item page has been loaded, the front-end should be responsible for initiating a new request to the Search API (via the Rails application) and constructing the on-screen similar items representation from that response.

Acceptance criteria:
# No call is made to the Search API during initial generation of the item page
# When a hierarchy is present, the front-end makes no attempt to retrieve similar items as it would not display them (see #1873)
# When no hierarchy is present, the front-end requests similar items via the Rails app and if displays them on-screen
# Presentation of similar items to remain the same as at present
# Google Search Console ""Fetch as Google"" must render similar items"
"*Userstory:* 

- As a user I want to view the portal in different languages. 
- Europeana wants to display the portal in different languages

*Problem:* 

We have updated the languages in localeApp but they aren't visible in the portal yet. 

*Solution:* 

Upon next deploy, update the languages too. 

*Acceptance criteria:* 

- I want to see all the updates in LocaleApp added in the portal/Collections (see exceptions below). 
- I want Estonian to be added to the language menu

*Notes:* 

All languages in project Global and project Portal with the *exception* of: 
- Czech
- Irish
- Slovak
- Slovenian
- Turkish
- Ukranian 
"
"*Issue:*
We have received from Nationalmuseum objects with IIIF WebResources that are images only, NOT IIIF Manifests which we have succesfully added display for before.

Example item where the IIIF-viewer is not working as intended (ie does not make the image zoomable):
http://www.europeana.eu/portal/en/record/2064116/Museu_ProvidedCHO_Nationalmuseum__Sweden_15897.html?q=juristen

In JSON: http://www.europeana.eu/portal/en/record/2064116/Museu_ProvidedCHO_Nationalmuseum__Sweden_15897.json

where ""dctermsConformsTo"":{""def"":[""http://iiif.io/api/image""]} and the image URI is http://nationalmuseumse.iiifhosting.com/iiif/e0311569c0cf7988de0130b6e8a1c70f2d58d9ed8d2ebed67e150d6f04545ca8

Feeding that to our viewer doesn't work because and /info.json needs to be appended (then it works http://styleguide.europeana.eu/patterns/molecules-components-iiif/molecules-components-iiif.html?manifestUrl=http://nationalmuseumse.iiifhosting.com/iiif/e0311569c0cf7988de0130b6e8a1c70f2d58d9ed8d2ebed67e150d6f04545ca8/info.json ) when a client makes an image information request, see http://iiif.io/api/image/2.0/#information-request

*Acceptance criteria:*
1. This user story is completed when the Nationalmuseum IIIF images are displayed fully zoomable in Europeana Collections. Any future new dataset using the IIIF Image API and Image URIs, as Nationalmuseum does, must also work (of course given that the data is properly formatted). 
2. Existing datasets like http://www.europeana.eu/portal/en/search?q=europeana_collectionName%3A(07931_L_DE_UniLibHeidelberg_druckschriften_IIIF)&view=grid where we render IIIF manifests must still render manifests.

*Suggested business logic:*

{code:java}Within a edm:WebResource:

1) If there is a svcs:has_service, for which the svcs:Service has a dcterms:conformsTo with the URL ""http://iiif.io/api/image"" THEN:

  1.1) If there is a dcterms:isReferencedBy with a URL
      THEN make a IIIF manifest call

  1.2) ELSE make a IIIF image information request call (http://iiif.io/api/image/2.1/#image-information-request) on the URL of the svcs:Service.

{code}"
"This is a bug observed on acceptance and therefore already in production, but only affecting the landing pages with facet link groups configured via the CMS.

*Reproduction criteria*
# Create a new collection
# Create a new landing page for the new collection, with layout *browse or default*
# Give the landing page a facet link group for a facet that on a search would only be shown for a different collection, e.g. a fashion-only facet like Designer on the landing page for a different collection
# Attempt to view the landing page and get an error

*Acceptance criteria*
# On the default landing page layout, do not even retrieve/assemble facet link groups for display
# On the browse landing page layout, recover gracefully when a configured facet link group does not belong on that collection, and do not attempt to display it 

*Nice to have*
# Prevent assignment of collection-specific facets to other collections' landing pages"
"
*Problem:* 
We want old exhibition links to redirect to new exhibition links with proper HTTP-codes and to as precise an equivalent page in the new exhibitions as in the old. 

*Solution:* 
As spiked in EC-11480 (NOTE: Not completed yet)

Google sheet with redirects: https://docs.google.com/spreadsheets/d/1YQ7EzT1Yv7tBVdWUVh9Zj8xxuj0OFtPFDUOnlqC0QyU/edit#gid=1737477995

*Acceptance criteria:* 
All the exhibitions links redirected to the corresponding new exhibitions according to the google doc from ticket [EC-11480|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/new_cardwall#ticket:1757]

*Note:*
Then do #1923 a good moment to remove the beta flag from exhibitions."
"This story has as a hard pre-requisite that all old exhibitions have been republished on Alchemy, redirects have been proven to work and be complete and any Omeka exhibitions backup or export that the Collections team/Maggy may want has been done. THEN we can close down.

*User stories:*

- Europeana has migrated all of the exhibitions to the new exhibitions platform
- Europeana wants to close down their Omeka account.
- Europeana users want to see the Virtual Exhibitions on the new platform

*Problem:*

We are still paying for the hosting of Omeka 

*Solution:*

Close down Omeka

Acceptance criteria:

- I want to see omeka closed down

"
"*Background:* 

Europeana Fashion wants to close their portal and in order to do this, all of the content from their portal needs to have an equivalent in their Thematic Collection. 
Part of this is also their Blog. (for reference: http://www.europeanafashion.eu/portal/blogoverview.html) These posts need to be migrated to our own end-user blog, catagorised as ""fashion"" and eventually land here: http://blog.europeana.eu/category/europeana-fashion/ . 

*Problem:* 

I would like to know what the best way of handling this would be. 
Both platforms run on Wordpress (log in's to follow and upon request, not included in this ticket) and the structure of our URLs is: ""http://blog.europeana.eu//2014/10/21/title of the post"" and theirs: ""http://www.europeanafashion.eu/blog/title of the post"". The dates for the Fashion posts are included in the titles in the overview page, but not in their URL. 

*What I would like to know:* 

- What are the options that we have?
- What do we need from the editors? 
- What do we need from the technical point of view?
- How much time will these options take?
- Pro's and con's

*Acceptance criteria:* 

- Based on the research I would like a final decision on how to go about this, including a timeframe and a clear description of work so this can be turned into tickets.  "
"Because we miss some that should be there if I follow their classications upwards (ie they are ulitmately children of musical forms or genres and should thus be included), eg: https://www.wikidata.org/wiki/Q484692 , https://www.wikidata.org/wiki/Q541947 , https://www.wikidata.org/wiki/Q685884 , and https://www.wikidata.org/wiki/Q178122 , 
"
"Developers: break down into subtasks

*Display and interaction:*
* The display must be brought fully inline with the designs in Invision
* Change the interaction so that when a user clicks a gallery in the foyer they arrive to the galllery page, the slideshown/modal must not open immediatley
* Add pagination to gallery foyer

*Display, nice to haves:*
These can be done now but if we can't in Sprint 40 it'd be likely they come in Sprint 41.

* Add Twitter card and Open Graph markup to the Gallery foyer. 
* Add Twitter card and Open Graph markup to the Gallery pages. For Twitter this should be a Summary card with Large Image, https://dev.twitter.com/cards/types/summary-large-image
* Add Twitter card and Open Graph markup to the individual images in the viewer/slideshow. For Twitter this should be a Summary card with Large Image, https://dev.twitter.com/cards/types/summary-large-image
* 
*CMS and Backend:*

* #1905 A CMS Admin must be able to edit a list of controlled topics that the gallery editor can match a gallery with. To begin with: Art, Music, Fashion, Photography, First World War, Literature, Food and Drink, Natural history, History, Architecture, History of Travel, History of Science, Maps and Cartography, Performing Arts, Military history, Migration, Archaeology. To the editor these should be listed alphabetically. The purpose of these is to align them with current, future and potential thematic collections. *NOTE:* So there are actually many more of these topics than there are avalaiable thematic collections. That is intentional.
* #1906 Add a check and error message to the editor for items that don't have an image link in edm:isshownby
* #1907 Add caching of HTML on gallery foyer and individual gallery pages, for performance
* #1908 Make it possible to filter the gallery foyer according to the gallery themes/topics listed above.
* #1909 The CMS automatically adds to each gallery: Date of publication. Intended to allow sorting of galleries in the UI by publication date.
* #1906 The CMS enforce number of images from 6 to 24
* #1911 Unpublished galleries must not be viewable unless logged in as an admin

*CMS/Backend nice to haves:*
To make into its own user story.

* The Collections CMS acts as a Client of the Annotations API and annotates each object that is part of the Gallery as being part of the gallery. The purpose is to make it possible to in the item display of Europeana Collections include links from items to the gallery(ies) they are included in - this helps build intra-item links for improved SEO and browsing UX.


"
"e.g: http://statistics.europeana.eu/accounts/europeana_user/projects/europeana/impl/aggregations/218/edit (EUscreenXL)
http://statistics.europeana.eu/accounts/europeana_user/projects/europeana/impl/aggregations/2195/edit (Greece) 

These dashboards do not appear. Unclear why. "
"*User story:* 

- As an editor I want to create Galleries in Europeana
- As a user I want to be able to add an alternative more user friendly title to the item names in the galleries  
- As a user I want to see great items in the Galleries 

*Problem:* 

Some of the content in europeana has a weird, long title or some of the content is not in English. (see http://www.europeana.eu/portal/en/record/92085/lnb_zl_36953.html?l%5Bp%5D%5Bf%5D%5BMEDIA%5D%5B%5D=true&l%5Bp%5D%5Bf%5D%5BTYPE%5D%5B%5D=IMAGE&l%5Br%5D=1&l%5Bt%5D=1205318 or even worse, stuff like: http://www.europeana.eu/portal/en/record/2048213/B_97_2011.html?q=proxy_dc_title%3A%22photograph%22) When we pull the information in from the URL, the title is also pulled in and is currently not changeable. 

*Solution:* 
Make this field changeable for the editors in the CMS

*Acceptance criteria:* 

- I want to see a title field that is filled in by the URL pull in
- I want this field to be editable for the editor in the CMS

"
"For video and audio we use videojs 4.12.  This is incompatible with the [wavesurfer library we want to use|https://europeanadev.assembla.com/spaces/europeana-npc/tickets/new_cardwall#ticket:1724] so we need to start using a version > 5.

This will require that we find compatible tech libraries to support the different audio formats (aurora, flac, silverlight) and that we re-customise the css, as our existing styling does not work with the latest video js library."
"Deployment tasks:
* EC-11587: run db:migrate
* update production styleguide
* update styleguide version in CF manifest env var (v0.2.74)
* test automated redeploy of internal apache/portal

Release notes:
* Continued refining the alternate, browse-focused, landing page
* First iteration of support for image galleries as an alternate way to explore Europeana content
* Display more types of user annotation (from the [Annotations API|http://labs.europeana.eu/api/annotations]) on item pages
* Added support for the Annotations API's upcoming standard profile, making annotation retrieval more efficient"
"As already mentioned in EC-11582. While 200px x 200px thumbnails are quite small 35x35 ones are even smaller. And we should avoid resizing images in CSS. So this ticket is to actually resize.

*Acceptance criteria:*
Facet thumbnails are resized to the actual size they're shown in."
"When you try to open an Object Page. For example:
http://test-npc.eanadev.org/portal/en/record/92099/BibliographicResource_2000081662432.html
It will return an Error.
When looking with Firebug, you will find that it is an HTTP 500 error.
Firebug is not able to provide the information where this error exactly comes from.
With help from [~hugo.manguinhas] and [~lbiedinger] it was determined that the problem most likely originated in the Collections.
The problem is with the Annotations API calls.
Doing the the Annotations API calls with the Console in Europeana Labs showed that the Annotations API itself is working fine.
Hence the conclusion that the problem lies at the Collections side.
Further the suspicion is that some redirects are wrong.

Since the exact cause/problem is not known (we don't want to risk that some faulty code going to Prod) and it is blocking the rendering of Object pages in Test, I suggest that we give this ticket some urgency.

The acceptance environment doesn't show this problem.
It was suggested by [~hugo.manguinhas] that we should not let this kind of problems stop the Object Page from rendering."
"When you try to open an Object Page. For example:
http://test-npc.eanadev.org/portal/en/record/92099/BibliographicResource_2000081662432.html
It will return an Error.
When looking with Firebug, you will find that it is an HTTP 500 error.
Firebug is not able to provide the information where this error exactly comes from.
With help from [~hugo.manguinhas] and [~lbiedinger] it was determined that the problem most likely originated in the Collections.
The problem is with the Annotations API calls.
Doing the the Annotations API calls with the Console in Europeana Labs showed that the Annotations API itself is working fine.
Hence the conclusion that the problem lies at the Collections side.
Further the suspicion is that some redirects are wrong.

Since the exact cause/problem is not known (we don't want to risk that some faulty code going to Prod) and it is blocking the rendering of Object pages in Test, I suggest that we give this ticket some urgency.

The acceptance environment doesn't show this problem.
It was suggested by [~hugo.manguinhas] that we should not let this kind of problems stop the Object Page from rendering."
"We've seen various issues with the annotations API, which have caused problems within the test portal. (and other portal instances that are tethered to the test portal)
We should still be able to render Record pages, despite errors from non core APIs.

* Acceptance:
- Come up with a way of notifying the user as to the fact that some additional information may not be shown on the page.
- Identify where non essential(to render the Record page) API calls are made, maybe it's only annotations for now?
"
"We need designs for displaying blog posts in Europeana Collections. Reuse of design/patternlab templates is desirable to reduce the time needed for a first implementation. 

Technical solution for info: The aim is that blog posts will be pulled in via RSS from Pro and displayed (in full) in Collections.

*Information/data and interactions that are musts in the design:*

* In general: use a blog template from the Styleguide/PatternLab for Pro and adapt for Collections
* We need in Europeana Collactions a page with all the end user blogs the *Blog List Page*. It should be similar/can be very similar to http://styleguide.europeana.eu/?p=templates-ListPage-blog in style and in content - if anything:simpler! It will need pagination and should of course list the blog posts from most recent to oldest.
* Each *individual blog post page* must have: Title, publication date, blog post text, one or more images or embedded media players, categories and tags, an author. So very much like http://styleguide.europeana.eu/?p=templates-Blog-Detail or http://styleguide.europeana.eu/?p=templates-labs-blog-detail 
* Calls to action for social sharing of individual blog posts must be present
* Nice to have: Reading time estimate
* Nice to have: Comments. We can live without in the first implementation, perhaps beyond as comments add little value.
* Nice to have: Authors shown with their image and contact info. We can live without this in the first implementation.
* Nice to have: On page calls to action in the Blog list page to filter the list by categories and tags

*Acceptance criteria:*
* Blog list and blog post pages in Invision, reviewed and finalised for implementation
* Templates in PatternLab/Styleguide"


"This is a subtask of EC-11606

A CMS Admin must be able to edit a list of controlled topics that the gallery editor can match a gallery with. To begin with: Art, Music, Fashion, Photography, First World War, Literature, Food and Drink, Natural history, History, Architecture, History of Travel, History of Science, Maps and Cartography, Performing Arts, Military history, Migration, Archaeology. To the editor these should be listed alphabetically. The purpose of these is to align them with current, future and potential thematic collections and the themes that are currently available in exhibitions. NOTE: So there are actually many more of these topics than there are avalaiable thematic collections. That is intentional.


Art, Music, Fashion, Photography, First World War, Literature, Food and Drink, Natural history, History, Architecture, History of Travel, History of Science, Maps and Cartography, Performing Arts, Military history, Migration, Archaeology

Label and Entity URI (NA means there's no such concept):
Art, http://data.europeana.eu/concept/base/190
Music, http://data.europeana.eu/concept/base/62
Fashion, NA
Photography, NA
First World War, http://data.europeana.eu/concept/base/83
Literature, NA
Food and Drink, http://data.europeana.eu/concept/base/124
Natural history, http://data.europeana.eu/concept/base/156
History, http://data.europeana.eu/concept/base/79
Architecture, http://data.europeana.eu/concept/base/94
History of Travel, NA
History of Science, NA
Maps and Cartography, http://data.europeana.eu/concept/base/43
Performing Arts, NA
Military history, NA
Migration, http://data.europeana.eu/concept/base/128
Archaeology, http://data.europeana.eu/concept/base/80"
"This is a subtask of EC-11606

Add a check and error message to the editor for items that don't have an image link in edm:isshownby
If the items don't contain this, don't allow the gallery to be saved."
"This is a subtask of EC-11606

Add caching of HTML on gallery foyer and individual gallery pages, for performance"
"This is a subtask of EC-11606

Make it possible to filter the gallery foyer according to the gallery themes/topics listed in #1905 ."
"This is a subtask of EC-11606

The CMS should automatically add to each gallery:
* Date of publication. Intended to allow sorting of galleries in the UI by publication date.
* User who published the gallery"
"This is a subtask of EC-11606

The CMS enforce number of images from 6 to 24

if the requirements are not met, the gallery shouldn't be savable "
"This is a subtask of EC-11606

Unpublished galleries must not be viewable unless logged in as an admin"
"Pre release:
* EC-11581: Set SCHEDULE_FACET_ENTRY_GROUPS_GENERATOR env var
* Make styleguide release (0.2.76)
* Update styleguide env var

Deployment:
* #1905: db:seed and db:migrate

Release notes:
* The focus of this release was a second iteration of the modelling and display of galleries of images
* Items having IIIF-compliant single images are now displayed using a IIIF viewer, in addition to the pre-existing support for multi-image presentations with manifests
* New UI language: Estonian
* Data provider logos, where provided, will be displayed on individual item pages
* Added support for embedding the British Library's sound player on relevant item pages
* Improved the response time for item pages where there is hierarchical data by skipping a superfluous API call
* "
"*Technical headline:* Create links between item pages (CHOs) and Galleries

*Background:*
The large majority of users arriving to Collections arrrive to an item page, not the Collections home page or a thematic collections landing page. The item page is also the type of page most viewed. So: how can we make the item page be a landing page in and of itself? One that provides and signals paths for the user to continue to explore Collections?

Two things we do already: Similar items and Canned searches. 

This story will add the basis for a third such path: Showing the user the gallery(ies) and item is included in and allowing the user to navigate to the gallery.

*Suggestion:*
The Collections CMS acts as a Client of the Annotations API and annotates each object that is part of the Gallery as being part of the gallery. The purpose is to make it possible to exploit this in the item display of Europeana Collections. It would allow us to dsiplay links from items to the gallery(ies) they are included in. 

This helps build intra-item links for improved SEO and providing pathways for navigation in Collections and thus improve UX for exploratory discovery style users and serendipituos discovery.

*Context*
The wider context is described in epic #1916

*Notes:*
* This particular story is about implementing the annotations only. Not how to display them in the UI. I'll add a story for that later.
* For how to format the annotations this is a task for [~hugo.manguinhas] and the APIs Scrum team.
"
"*PROBLEM*
As we know from user research we can do a lot better in making browse a part of the user journey, thus extending it, deepening it and tying together different components (items, thematic collections, blog posts, exhibition, item sets like galleries and playlists) together into a whole that the user can navigate between. 

We also know that we have an issue in SEO in that our items relate only to other items via the Similar items feature. Establishing more internal linkage will make it easier for the Google crawler to crawl all our items (compared to just going through our sitemap) and influence our relevancy ranking via improved internal linkage.

*IDEA FOR A SOLUTION*
* Make the Collections CMS for blog posts, galleries and exhibitions use the Collections object (or entity) as an atomic unit
* Make it possible to via the Annotations API annotate objects and entities in Collections with the blog posts or exhibitions in which they are featured
* Revisit the mass-tagging and search macro features ideas for channels/thematic collections, https://europeanadev.assembla.com/spaces/europeana-creative/tickets/45 and in greate detail https://docs.google.com/document/d/15nqqs7M9V25iku9NsiEfXl-vJpWh31LmyaYVA__cvho/edit

Doing this brings together information siloed in blog posts and exhibitions with the objects/entities in Collections, the Collections object/entities becomes an atom that is created once and published in many places. 

On a more abstract/conceptual level, this helps us connect objects with their context/interpretation, and context/interpretation with objects.

In Europeana Collections we would then use these links in the display to *signal to the end-user the availability of these relations and navigational paths*. Like in this now old lo-fi wireframe:
https://projects.invisionapp.com/d/main#/console/1083571/78693285/preview 

Scroll down and note the visualised link-relation The Milkmaid here has to the Art Collections, one particular Exhibition and one particular Blog post. Which the user can of course click to navigate to.

_Collections CMS as API read client_
When an editor includes a Collections item in a blog post, exhibition or gallery the CMS supports them in that by pulling the item in via the Europeana API incl. core metadata (title, creator, rights, data provider, links - attribution snippet).

_Collections CMS as API write client_
In the background, with no manual effort from the editor, the CMS annotates the items used in the curated objects with the URLs of those items/CHOs. That way each item ""knows"" where it has been reused or referenced in Europeana sites and this can be exploited in the UI of Collections as envisioned in the early designs (see wireframe above).

This could be seen as a specific type of semantic/relation tag, an ""intra-Europeana sites bi-directional link"".

*Notes*
The two examples above use Collections objects as the case. It might as well be an entity e.g. connecting our entity for Vermeer with the blog posts and exhibitions in which he is featured/included.

In terms of UI display we could consider using og/twitter and/or oEmbed as ways to dynamically call in the necesary information to create ""cards"" in the object and entity display pages of Collections to the collections, exhibitions and blog posts they are included in.

Once we get to doing the User created sets items featured in those should also ""know"" that they are, cp. Rijksstudio e.g. https://www.rijksmuseum.nl/en/collection/SK-C-5 where the 3 most recent Rijksstudio collections in which the Night Watch are included in are featured on the Night Watch page.

*Potential connections and navigational paths*
* Item (EDM CHO) level and all ""curated"" levels:
* Items to Thematic collections, which would require a ""big batch annotation""
* Items to the Europeana Radio playlist
* Items to Exhibitions, see EC-11277 and https://europeanadev.assembla.com/spaces/europeana-apis/tickets/245
* Items to Galleries, see EC-11635
* Items to Blog posts
* Items to Entities (here the link is already explicit in the item metadata via the contextual classes)
* Entities to Exhibitions (From Agent Mucha to Exhibition on Art Noveau in which he heavily features)
* Entities to Galleries (From Agent Mucha to Gallery of Much posters), see #1939
* Entities to Blog posts (From Agent Mucha to Blog post on our Art Nouveau Colouring Book)
* Entities to Entities (From Agent Mucha to Concepts Art Nouveau and Poster)


Of the above establishing relations (modelled and implemented as annotations) between items and blog posts/galleries/exhibitions would be the most prioritised IMO. 


*Inspirations*
* V&A on their CMS redesign, section ""The Idea"", http://www.vam.ac.uk/blog/digital-media/the-new-va-website-the-inside-story




"
"This is an intermittent issue affecting the entire Collections site observed by [~lbiedinger], [~renekok] and [~richard.doe] at various times.

When requirejs is unable to load external dependencies like the Optimizely JS, then it fails to load _any_ JS at all, crippling much of the UI functionality.

It is not browser dependent, but _may_ be connection dependent, e.g. a more common problem on slower/less reliable connections. It may therefore affect some users all the time.

What is needed is for requirejs to handle failure to load individual dependencies (especially non-essential ones) gracefully and continue to attempt to load others."
"*The problem we need to solve:*
As part of the Metis preview service, we are utilizing a specific collections instance of the portal that communicates with a specific separate backend (metis-preview-portal.cfapps.io)

Some of our collaborating organizations requested the ability to embed the preview of this portal in their own applications (NTUA-MINT). This will allow the users of those application to preview how data would look like in Collections before actually submitting it to Europeana for harvesting. Currently this is impossible as all iframes of the Collections application are blocked. 

As a Metis developer I would like to be able to specify that this instance of the portal can be embedded in an iframe.

*Solutions:*
Allow certain IPs to iframe Collections?
"
Just after/at the same time as EC-11602 is completed
"When opening the Collections (Main, Art, Fashion or Music, whatever page). on Test or Prod.
When the chosen language is French the Cookie banner shows wrong language text.

[[image:arS34675Sr5P7dacwqEsg8|Cookie Banner French.png]]"
"The smartmenu arrows do not show on the navigation menu.

This applies to all pages in the portal ( [~renekok]  - including exhibitions? )"
"Improvements below, each header can be seen as a candidate for a child user story of this epic.

*Facet groups:*
* Make it possible for the editor to add entity/concept based facets (based on either http://labs.europeana.eu/api/entities or regular custom facets for ag_skos_prefLabel , cc_skos_prefLabel , pl_skos_prefLabel)
* Make it possible for the editor to instead of sorting facets per frequency set the to shuffle, random per 24h
* Make it possible to show hits per facet

*Roles:*
* Separate between Admin (can edit all pages and also manage users) and Editor (can edit Landing page, Galleries, Browse entry points, Data providers but nothing else including not being able to manage users). DONE, see related stories.

*Promotions:*
* Make it possible to pool and share promotions across themes (cp. Browse entry points)
* Add Blog, Dataset, and Story as promotion types. Allow pluralisation: Datasets, Galleries, Stories, etc.

*What's happening*
* Make it possible to pin/fix one piece of news/card to make it sticky"
"Based on the designs in Invision, in EC-11654 :
Blog list design: https://projects.invisionapp.com/d/main#/console/1083571/217654280/preview
Blog post design: https://projects.invisionapp.com/d/main#/console/1083571/217667599/preview

NOTE:
Defer implementation of reading time until further notice."
"should include #1923

Tasks:
merge into mater & tag from release branch ""release/v1.0.0""
Set Styleguide to v0.2.78 
After deploy sweep the page cache via Alchemy CMS.

* Note: this release needs to happen in conjunction with the exhibitions redirects being in place (EC-11602) "
"While testing EC-11588

When creating a new Gallery in the CMS you can't add Topics.
Only when you have created the Gallery without the Topics, you can edit the newly created Gallery and add Topics

To Reproduce:
Create new gallery
Try to add Topics whil you haven't saved the new Gallery yet
 - You can't save the Gallery
The CMS will display an error message:
Gallery failed to be created
- Categorisations categorisable can't be blank

Now remove the Topics
Save the Gallery
The Gallery gets saved without the Topics

Now edit the just created Gallery
Add 3 Topics
Save the Gallery
Gallery gets saved"
"We need to be able to display Events in Europeana Collections. 

For Fashion as the first case (see http://www.europeanafashion.eu/portal/eventoverview.html ). Their events are typically exhibitions.
Europeana 1914-1918 is the second case. The event type is typically a Collection Day or an edita/transcribathon.

As for blog posts Events will actually be authored in Pro and displayed in Collections. See https://docs.google.com/document/d/1-5uNaRJZC0VZ0f7vtfX-W4flWSDmr6PXQaOUgwx4Wtg/edit#

*Acceptance criteria:*
* Proposed design for Events listing in Invision
* Proposed design for Events page in Invision

The Events must comprise: title, author, date of publication, date of event starting, date of event ending, categories, tags, body text with markup, links and image links, full address, contact info for the event organiser. In short: All the attributes of the Event content type in Pro."
"*User story:* 

As a user I want to share the Galleries to social media. 

*Problem:* 
Currently we can't share a Gallery on social media in a way where we control/indicate to other those social meda sites what to display based on the link shared.

*Solution:* 
Add Twitter card and Open Graph markups to the Gallery pages (foyer, gallery page, individual gallery item/image). 

*Acceptance Criteria:* 

- I want to see TwitterCard and Open Graph mark up added to the galleries. 
- For Twitter this should be a Summary card with Large Image, https://dev.twitter.com/cards/types/summary-large-image
- For Twitter: title of the gallery, large image (first image of the gallery) and description. 
- For Facebook: title of the gallery, large image (first image of the gallery) and description. 
- For images inside the gallery; stick to the portal pattern ie the same markup as for an individal item.
- For Pinterest use the same solution as for pinning item pages, https://developers.pinterest.com/docs/widgets/save/
- Descriptions: For the foyer the description to be marked up is the 280 character description an editor can add to the foyer.  For items that don't have a description add, just like in item display markup, a default text ""Find out more on Europeana"".
- Copy for the description of the gallery and the share: ""Culture curated for you! Discover Europeana Galleries!

*Notes:* 
https://developers.facebook.com/docs/sharing/best-practices#tags
https://developers.facebook.com/tools/debug
https://developers.pinterest.com/docs/widgets/save/"
"*User story:*

- As I user I expect to see events in the ""What's happening""-feed on the thematic collections.
- Europeana Fashion wants to close down their portal and use our thematic collections to continue their work and therefore want's to migrate everything from their own portal to Europeana services. 

*Problem:* 

The events are currently not part of the feed.


*Solution:*

Based on our decision to use Pro for Fashion events and the Bolt JSON API to query for and display them in Collections we need to find a way to allow editors to add an Event feed from Pro to What's happening.

*Acceptance criteria:*

- I want a technical solution for how they can be added to the What's Happening feed.
- I want to see the What's happening is sourced from an aggregated feed of feeds that includes these Events, in chronological order descending.


*Note:*
- There are currently no events in for Fashion in the Bolt CMS. Should development need any for testing purposes, they need to be added to the CMS.

The events can be found here: http://www.europeanafashion.eu/portal/eventoverview.html"
"*User story:* 

As a user I would like to see in one glance which topic is related to which Gallery because I am a bit lazy ;) 

*Problem:* 

Currently you can filter on a topic, but the topic is not shown on the Gallery block itself. (See https://projects.invisionapp.com/share/CSA91BWRZ#/screens or added screenshot) Compare the design: !blob! to the gallery on acceptance: !blob.001!

*Solution:* 

Add the topic label as displayed in the design to the galleries

*Acceptance criteria:* 

- I want to see the topic appear on the label. 
- If a gallery has more than one topic (with a max of two) I want to see this displayed in the label too. 
- I want the labeling to match the design that can be found here: https://projects.invisionapp.com/share/CSA91BWRZ#/screens


"
"The display of the galleries need to be fully brought in line with the designs in Invision:
https://projects.invisionapp.com/d/main#/console/1083571/213622476/preview
https://projects.invisionapp.com/d/main#/console/1083571/213958005/preview

(and  their clickable/interactive elements)

*Gap:*

- Gallery viewer: Add display of all the metadata that is in the design. From EC-11587: The following metadata is pulled in via the Search API record call: *Title*, *Creator*, *_Creation date_*, *Data provider*, *Rights value/icons*, *Link to item in Collections* and the image in* edm:isshownby*. Note that these are exactly the same as the credits on a Collections hero image and Exhibition items.

- Gallery viewer: Logo is displayed but in colour. It needs to be dynamically made a white-ish colour in the CSS to be visible on the background. (ANDY: update - the logo should be in colour but with a white background and some padding)  Γ£ô (done but added after the last acceptance testing) 

- Gallery Foyer: make sure that there can be text added under the ""Gallery"" header in the voyer. (localeapp) Copy suggestion: Explore Europeana Galleries: Culture curated for you! (this text would be regular weight, not bold)  
!blob.006.001!
"
"Based on the already suggested object linking one for Exhibitions here:
https://europeanadev.assembla.com/spaces/europeana-apis/tickets/245
"
All that remains is for [~andyjmaclean] to reinstate the total number of similar items in parentheses after the carousel which should be a small task.
"*Business motivation:*
As many other sites we rely heavily on organic search traffic. Google has a 90% plus market share in Europe so when we say organic search that basically means Google.

The last year we have seen the number of indexed Europeana item pages drop radically from its peak at 25 million pages to now stabilising around 6 million. This has resulted in a noticeable drop in organic search traffic. 

This SUPEREPIC represents our work to reverse this trend.

*Stats:*
The numbers vary a bit, but currently about 2.7% or the records in our sitemap are indexed. We should try to improve this.

Stats May 10th: 
* Sitemap: 55.626.249 submitted, 1.472.607 indexed, 159.885 warnings (158.174 because blocked by robots.txt)

Stats May 11th:
* Total indexed pages: 5,936,143 
* Sitemap: 55.626.249 submitted, 1.521.553 indexed, 159.895 warnings (158.182 because blocked by robots.txt)

Stats June 11th:
* Sitemap: 55 536 307 submitted, 2 522 301 indexed, 160 276 warnings (158 468 because blocked by robots.txt)


*Improvement ideas and tickets:*

* Fix formal errors in the sitemap, e.g. broken links ([API ticket 605|https://europeanadev.assembla.com/spaces/europeana-apis/tickets/605]) and blocked links (#2150)
* Make sure we don't index links from other urls like portal.europeana.eu and www.europeanastatic.eu (#2148). 
* Ensure we have timestamps for last updated in the sitemap ([API ticket 631|https://europeanadev.assembla.com/spaces/europeana-apis/tickets/631])
* Test a smaller sitemap but with the best of our content ([API ticket 475|https://europeanadev.assembla.com/spaces/europeana-apis/tickets/475] and [ticket 624|https://europeanadev.assembla.com/spaces/europeana-apis/tickets/624])
* Add Schema.org markup to our item pages. Later also pages like galleries and exhibitions.
* Check whether having language specific targetting is actually working for us. The items aren't truly multilingual even if the UI is localise"
"Currently hardcoded to Europeana Fashion and using an image..

*Acceptance criteria:* 
* This name must instead be taken from the Title field on Landing page and thus be in editorial control. 
* It must not be an image but text and CSS.
"
"*Background:* 

If the translation is missing from Localeapp, the application should trigger the English version of the translation automatically. 
For some reason, that is not occurring right now and some of the translations come back as ""false"". 

!blob.002.001!

*Solution:* 

After liaising with [~richard.doe] we agreed on doing a hotfix. 

**Acceptance criteria*: 

- I would not like to see ""false"" appear on any of the pages. 
"
"*User story:* 

- Europeana partners should be able to use the Europeana products and features. 
- As a Europeana partner I would like to know how to use the Europeana products and features. 

*Problem:* 

The manual for the CMS is not updated with the logo features and the Galleries. 

*Solution:* 

Add these to the manual 

*Acceptance criteria:* 

- I would like to see a section about the logo upload in the CMS manual for the portal 
- I would like to see a section / chapter about the Galleries in the CMS manual for the portal. 
- This should include the following specifications: 

*_Logo's:_* 
Why are my logo's grey? 
What dimensions should they be? 

*_Galleries:_* 
How many images min and max? 
How to upload
Example of the URL path. "
"This requires EC-11650 to be in place. Also see that ticket for more context.

Acceptance: Editors should only be able to edit/publish content which they themselves have created."
"*Scope of this ticket:* 

For some reason the colour purple in the foyer is off with the original design. 
This ticket is created to just change that colour purple back to the intended purple, or maybe it was always this way and the contrast with the background just highlighted it now or making the image smaller brought it to the surface. Anyway; we need to change this because people are going blind.  

!blob.003.001!


*Acceptance criteria:* 

- I would like to see the colour purple in the foyer (http://www.europeana.eu/portal/en/exhibitions/foyer) changed from  #9922aa to #7F3978 

*TESTING THIS TICKET:* 

[~andyjmaclean] ; can you assign to [~cr.marcelino] after this has happened to test this ticket :) "
"*Issue:*

Looking at the record here: http://www.europeana.eu/portal/en/record/2022705/lod_oai_bvpb_mcu_es_574658_ent1.json the edm rights value and Can I use it value isn't shown under ""Can I use it?"" - given it's CC-BY license it should be shown as Free re-use CC-BY. Compare with e.g. http://www.europeana.eu/portal/en/record/9200317/BibliographicResource_3000094096535.html


*Possible causes:* 
This specific data set uses https:// for the CC license. The portal seems to display http:// just fine (like: http://www.europeana.eu/portal/en/record/2048416/item_ZYI7L4NS3O55JQDWPIUUUWTR6YEWZHI6.html?q=edm_datasetName%3A2048416%2A or http://www.europeana.eu/portal/en/record/9200317/BibliographicResource_3000094096535.html) 



*Acceptance criteria:* 

- Would like to see the rights displayed under every ""Can I use it"". 

"
"*Background:* 

In previous ticket EC-11650 we added the role of editor to the CMS and specified the rights for the role in this document https://docs.google.com/spreadsheets/d/1_aoPGPF4tTeQTrUogGMvIMa5S5fbmJwFkSLzFp4yOCU/edit?usp=sharing
This ticket in meant to add the rights specified in that document to the role of Editor and the Admin roles 

*Acceptance criteria: 

For the admins:* 

- I want to see the full rights for all areas
- I want to see that admins can grant permissions to the editors: Browse Entries, Landing Pages, Galleries
- I want to see that admins are able to add the collection to (a) specific editor(s) or an editor to a specific collection.  

*For the editors:* 

Besides the ability to view all areas (which was covered in ticket EC-11650) I would like to see: 

- Collections tab: only viewable 
- Browse entry points:  can edit/create/publish but NOT delete
- Banner: only viewing 
- Dataproviders: View and edit rights but can't delete or create. 
- Landing page: with permission can edit. Nice to have would be to grey out the slug definition to Editors.
- Landing page: Can't delete. Can edit the landing pages they have been given right to by an Admin.
- Galleries: Can ""edit"", ""create"", ""publish"" and not delete. 
- Error pages: not viewable 
- Topics galleries: only view
- Users: Editors can't edit or create new users"
"*Background:* 

Exhibitions seems to have a lot of weird issues after the last deploy of the styleguide. Perhaps something went wrong with the deploy of the latest version? 

*Problem:* 

_Small bugs up until now_

- Colour purple is off in the portal: 
!blob.007.001!

- The rich images and the text
The text and the image seem to be off. [~cr.marcelino] knows about this as well but for an example: http://www.europeana.eu/portal/en/exhibitions/art-nouveau-a-universal-style/origins-of-art-nouveau#ve-anchor-section_8622-js The image and the text should not behave like this. For some reason it seems to think that the text is longer than it is? 


- Credits for slider images look too big
Compare normal credits: 
!blob.009.001!
To slider credits: 
!blob.010.001!

- Padding is off:
!blob.008.001!

*Acceptance criteria:*

- I want the correct version of the styleguide deployed for exhibitions. 

*Should this not be the problem:* 

- I want the bugs to be fixed
- [~cr.marcelino] can you help giving detailed acceptance input for this ticket? 

-  Exact Colour purple should be: 
- The animation of the text in the rich images should be like: 
- Exact Credits size should be: 
- Padding should be: 


"
"Problem: 

American searches in 14-18 don't work. See e.g. http://www.europeana1914-1918.eu/en/dpla/search?page=1&q=argonne&utf8=%E2%9C%93
Or check: http://www.europeana1914-1918.eu/en/dpla/explore/content/Letter?page=1 and click on the American resources. 

*Acceptance criteria:* 

- I would like to see the action of clicking on the American Recourses not come back as an error. 

_For testing:_ 

Go to: http://www.europeana1914-1918.eu/en/digitalnz/explore/content/Letter?page=1
Click on the American Recources tab. 
Content should appear. 
"
"It seems the viewer cannot show icons sometimes. For instance at
http://www.europeana.eu/portal/en/record/9200355/BibliographicResource_3000119062998.html
See attached screesnhot (Firefox-51.0.1-brokenIcons)
Maybe a timeout that is faster for some browsers? Sounds strange, but could explain that I've got the problem in Firefox and not in Safari (screenshot Safari-10602.1.50.0.10-workingIcons) . The problem in firefox (and the absence of problem in Safari)  remains after several reloads of the same page.

!Firefox-51.0.1-brokenIcons.png!
!Safari-10602.1.50.0.10-workingIcons.png!

"
"

*Acceptance criteria:*
* Hi-fi designs in Invision of individual Agent and Concept pages
* Lo-fi designs for searching and browsing (""index page"") for entities
* Hi-fi designs for entites as cards in search results (based on the existing designs from Dean, don't reinvent the wheel) "
"Rights starting with https not showing in the (Rights) Facets
This ticket is a result from testing EC-11696

How to reproduce:
Do a search in the Collections Portal for:
provider_aggregation_edm_rights:https*

These results shows records for which the edm_rights start with ""https""
When I now look at the Facet ""Can I use it"", especially the specific rights statements, I see nothing available for selecting.
Meaning that when I would do a more general search, where these records would be included, I could never include them through the use of the rights statement: Free Re-use."
"*User story:* 

- As a curated content creator, I would like to add images to the Gallery to engage the user. 
- As a curated content creator, I would like to make a gallery that involves different content from different European countries to engage the user. 

*Problem:* 

Currently the maximum amount of images in the Galleries is 24. We would like to see that this gets bunked up to 48 because Collections is foreseeing that they will run campaigns that need more images. 

*Solution:* 

Please update the Galleries so they can handle up to 48 images. 

*Acceptance criteria:* 
- I want to be able to add 48 images max to the galleries.
"
"We have the New Relic service bound to our applications for runtime performance and error analysis.

However, it also by default injects JavaScript into the HTML of pages sent to users in order to offer browser monitoring, like:
{code:java}<script type=""text/javascript"">window.NREUM||(NREUM={});NREUM.info={""beacon"":""bam.nr-data.net"",""errorBeacon"":""bam.nr-data.net"",""licenseKey"":""f1af33c37e"",""applicationID"":""30366469"",""transactionName"":""dQoLQRcJVFpSER5SHUYJCkcASVtZWwxERRY="",""queueTime"":0,""applicationTime"":69,""agent"":""""}</script>
{code}
We do not use this browser monitoring in New Relic, and so should disable this in our New Relic config file.

See: https://discuss.newrelic.com/t/strange-javascript-in-my-output/19476/3"
"In every HTML page generated by the portal, two meta tags are included in the HTML head element, like:
{code:java}<meta name=""csrf-param"" content=""authenticity_token"">
<meta name=""csrf-token"" content=""7ebg2M11icmWte/Ys8H0KE8APdIh2dbtGGfkUTk1sLQRkMxEDMFfttcYysM7hNVl/MqCQRUEOrLtxXQaC7SRnw=="">
{code}

The token changes on each request.

These are used to prevent CSRF attacks, which are required for AJAX requests and forms submitted over HTTP methods other than GET and are therefore necessary on pages where one of those functions are present.

However, their presence means that no two requests for a page will ever result in the same HTML, and will always have a different Etag response header, presenting an obstacle to client-side caching by that mechanism.

We should omit these meta tags when it is known that the page will never need them. For instance, on all of the explore pages."
"*User story:* 

As a user I want to see the different updates from different sources under ""what's happening"" all the time so I can stay in the loop. 

*Problem:* 

Currently the feed seems to grab the first image in the post as a ""featured image"" in the feed. This means that for updates that don't have an image in the post, there is no image. 

*Suggested solution:* 

Make sure that the feed features the ""featured image"" of the post. (The enduser blog and fashion blog both use wordpress and mark an image as a ""featured image"" there.) 

*Acceptance criteria:* 

- I want the feed to grab the featured image of a blogpost
"
"*_This ticket is a clone from EC-11676 : for planning purposes [~Michelle.vanduijn] has extracted all the things that were deployed to acceptance to this ticket, leaving the remains to shift to sprint 42_
*
The display of the galleries need to be fully brought in line with the designs in Invision:
https://projects.invisionapp.com/d/main#/console/1083571/213622476/preview
https://projects.invisionapp.com/d/main#/console/1083571/213958005/preview

(and  their clickable/interactive elements)

Gap:
- Change ""GALLERIES"" to ""Galleries"" (capitalise only the initial) Γ£ô
- Hovering over the ""i"" icon should give you an overlay over the corresponding thumbnail with the abridged description of the gallery (check interaction on[ invision|https://projects.invisionapp.com/d/main#/console/1083571/213622476/comments/76877507] - (i) on top of comment 4) Γ£ô
- _""Topic"" should be present in the  filterbox. Style accordingly to design._ Γ£ô
- Add the ability to add basic HTML markup to the Gallery description (note: This could be CMS backend work rather than front-end or combo of both ) Γ£ô
- Add the topic labels to the Gallery cards display (they currently don't show up) Γ£ô
- Change the call to action for sharing on the the foyer page to ""Share the galleries"" Γ£ô
- Change the call to action for the individual gallery page to 'Share this gallery' Γ£ô
- Reduce the size of the social icons Γ£ô
- Default sort order in the galleries is to be by date, with most recently published gallery first Γ£ô
- Capitals and lowercase in the description field of a gallery and remove bold on the gallery page description.  Γ£ô"
"*User story:*

As a user I want to see what a gallery is about without clicking on it. 

*Problem:* 

Currently, the text in the hooverbox for galleries, appears at the top of the box 
!blob.004.001!

*Solution:* 

We would like it to appear in the center like in the design

!blob.005.001!

*Acceptance criteria:* 

- I would like the text to appear in the centre like in the design here: https://projects.invisionapp.com/d/main#/console/1083571/213622476/preview"
"Pre release:
* Run db migrations ( EC-11692, EC-11697 )
* Update Styleguide ref v0.2.79
* *Do not* set EUROPEANA_PRO_URL env var to Pro beta site on production, so that the blog pages do not display anything yet. Ensure this is set in a later release when due to go live.
* Blogs and galleries should not be linked to from anywhere



Post release
* #1874 Run benchmarks on variations of the item page when live in production
* Ensure the Landing Pages have proper collection associations. Should there be issues it may be necessary to either link them via the CMS or via a sql query, something like:
{code:java}update pages
set collection_id = [ID]
 where type = 'Page::Landing' AND id = [ID]
</code></p"
"Currently GA data is not logged for test or acceptance - the production GA code is hard-coded in a js file.

This needs to change so that the code comes from an environment setting (this is what already happens in exhibitions)

Keys:

Test GA key: UA-12776629-5
Acceptance GA key: UA-12776629-4
Prod GA key: UA-12776629-1"
"*User story:* 

As a CMS user I would like everything to be as clear as possible so I can work effective and make minimal mistakes. 

*Problem:* 

Currently the CMS doesn't tell you that the gallery description can hold up to 280 characters. It does this only when you have exceeded the amount of characters before you save, which I think is a bit annoying if you could've known that to begin with. We do communicate this to the users but it would be a _nice to have_ if the cms told you this before you make a mistake. 

*Solution:* 
Similar to what is under 'title' now; I would like to see that there is a 280 character max for the description. 

*Copy:*
_""Optional. Describe your gallery - maximum 280 characters.""_

*Acceptance criteria:* 
- I would like to see ""Optional. Describe your gallery - maximum 280 characters."" in the CMS UI underneath the description field. 

!blob.011.001!"
"In order for the Annotations API key data store change to be deployed to its production environment, it will likely need to be taken offline momentarily.

This will result in the stock Cloud Foundry error page which returns plain text like: ""404 Not Found: Requested route ('notfound.cfapps.io') does not exist.""

This can be simulated by setting in the app env EUROPEANA_ANNOTATIONS_API_URL to a non-existent CF app URL, e.g. http://notfound.cfapps.io/

If the Annotations API endpoint starts returning this, both the portal and radio will fail where they make requests to it. The error handling they already have in place is still not capable of handling this type of response.

They therefore need to be adapted to handle this scenario, before the [Annotations API change|https://app.assembla.com/spaces/europeana-apis/tickets/524] makes it to production.

This will need to happen in the Ruby API client, and a hotfix deployed to both the portal and radio station."
"This object (and others like it) shows the ""media metadata"" section under the thumbnail.

http://test-npc.eanadev.org/portal/en/record/92037/_http___www_bl_uk_onlinegallery_onlineex_apac_photocoll_s_zoomify59325_html.html

This should not happen.

Also: the alignment of the ""media metadata"" link looks out."
"*Background:* 
Europeana has a lot of static pages in the portal, but currently we can only add images to them by adding browse entry points, or doing so in the HTML (which also requires the image to be stored somewhere or link from somewhere that is not Europeana). Since we want to improve the CMS and make the life of the editors easier, it is worth it to at least investigate how much time it will take to add the possibility to upload an image to a static page in an easier way. 

*Assignment:* 
At the end of this sprint, I would like to see a proposal on how to go about adding images to the Europeana Portal Static Pages, which will allow the editors to do so in an easier way then it is now. 

*Acceptance criteria:* 
- I want to know if it can be done. 
- If so I would like to know what the best solution(s) will be. 
- I would like to know what the pro's and cons are (for each of the solutions if applicable).  
- I would like to have a time estimation for the solutions. "
"Deployment to production of #1874 will introduce similar items obtained AJAX but only when explicitly requested by URL parameter, so that it can be benchmarked in a production environment against the current approach to obtaining similar items during initial page request.

See #1874 for implementation ticket.

See EC-11596 for benchmarks to perform.

As an outcome of this ticket we need figures for comparative performance of the two approaches on the production environment, and a decision as to whether we should switch to the new AJAX approach."
"*Regular Deployment Bug - Non-hotfix*

When the user is looking at  http://www.europeana.eu/portal/nl/record/02301/urn_imss_instrument_401058.html?q=hourglass with UI language set to Dutch the Dutch language labels should be shown for Type and Medium. But they don't.

This is a bug, the business logic to show the user the  labels that match the users UI language has been developed and used to work.

NOTE:
This language context awareness does still work for some fields. See e.g. http://www.europeana.eu/portal/nl/record/90402/SK_A_2344.html?q=the+milkmaid vs http://www.europeana.eu/portal/en/record/90402/SK_A_2344.html?q=the+milkmaid where the title and descriptions, as they should, switch between English and Dutch titles and descriptions for the Milkmaid.

!Screen Shot 2017-06-08 at 11.21.50.png!"
"*problem:* 

Size of the image in the gallery is still not correct. 

*Solution:* 

Implement just a minor tweak regarding the size of the icons on the viewer.

Here's the code snippet to make it looking better:

.lg-toolbar .lg-icon {
   ...
   transform: scale(0.8);
}

*Acceptance criteria:* 

- I want the sizing to look like the designs in invision. 
- I want [~cr.marcelino] to test this ticket

"
"[~richard.doe] I have created this stub ticket for you as a result of our [sprint 42 retro|https://docs.google.com/drawings/d/1KODC1UpaiQzTVaIMQFOEEG0wi32WEHvVe804vqO81SY/edit]. 

I think it will be good to fill this ticket with what you exactly want to investigate. 
For now I am putting this into the sprint backlog since fashion has priority coming sprints. "
"_This ticket is a duplicate of EC-11588 and has all the GA related stuff in it. 
Part of this is already done but we can't test it properly until EC-11728 is done._ **

*Business motivation:*
The Galleries will rely on an aesthetically pleasing display that encourages the user to explore and also share the galleries and their images. The aim is that galleries will be interesting to many of our users and thus help increase the total number of item views and file downloads and also increase inbound links and referral traffic. They should also positively contribute to engagement (measureable via metrics like Avg time on site, Pages per visit, and Returning visitors). 

*Acceptance criteria:*

* It must be possible to in Google Analytics track views of items in the viewer/slideshow. This may require custom events to be added (note: I don't think Photoswipe images have URLs for GA to catch without custom events!?). 
* It must be possible to in Google Analytics track downloads of image files from the viewer/slideshow via its Download actions. In GA this Download event must be distinct from downloads from the Collections item page.
* It must be possible to in Google Analytics track social sharing of images from viewer/slideshow via its Social sharing action"
"*After* we're done importing the Europeana Fashion portal blog posts and events to Pro we need to move forward and do the same for the blog posts of our own (Wordpress based) end-user blog, http://blog.europeana.eu

Once we've successfully done this we will have consolidated fully on Pro for blogging.

*Acceptance criteria:*
* The blogs must be imported to Pro with the culture-lover tag applied to all posts. TwoKings.
* * The blog authors must be added as authors in Pro (incl. CRM). Daha/TwoKIngs.
* The blogs must not be shown in Pro, in the blog listing, author pages or search results. TwoKings.
* The blogs will be pulled in and displayed in Collections via the JSON-API and with exactly the same layout as the Fashion blog posts. Collections Dev Team.

*Notes:*
* The export of these blog posts are downloadable from [Google Drive|https://drive.google.com/drive/folders/0ByO3OdkxckXeUUZ6WTJHUVZzR0k]
* These blog posts come from a different instance of Wordpress than the Fashion blog posts of ticket 
* Thus they also have a different URL syntax and may also have slightly different internal RSS/XML format/structure
* We should start with an import to Pro Beta, test and iterate there, and then import and publish in Pro production..

*References:*
* The [Pro as dark aggregator for blogs and events document|https://docs.google.com/document/d/1-5uNaRJZC0VZ0f7vtfX-W4flWSDmr6PXQaOUgwx4Wtg/edit#heading=h.rkgw8anro856]
* "
"*After* we're done importing the Europeana Fashion portal blog posts a to Pro we need to move forward and do the same for their events


Notes:
* The export of this content is attached.

References:
* The [Pro as dark aggregator for blogs and events document|https://docs.google.com/document/d/1-5uNaRJZC0VZ0f7vtfX-W4flWSDmr6PXQaOUgwx4Wtg/edit#heading=h.rkgw8anro856]"
"This release jumps 1.9. It should contain the public release of:
* The new landing page template
* The Galleries
* Fashion data provider logos
* Fashion blogs read from Pro
 
And time permitting:
* Fashion events from Pro


h3. RELEASE TASKS 

*PRE RELEASE*

* Γ£ö Set CF env var via manifest in Jenkins config for: GOOGLE_ANALYTICS_KEY: [KEY] ( EC-11728)
* Γ£ö ensure CF env var  EUROPEANA_PRO_URL: ""http://pro.europeana.eu""
* Γ£ö Ensure CF env var ENABLE_BLOG_POSTS_THEME_FILTER is NOT set at all in production (EC-11727)
* Γ£ö Use styleguide v0.2.81
* Γ£ö Ensure some galleries are published
* Γ£ö Set github ref to: refs/tags/v2.0.0

*POST RELEASE*

* Γ£ö Release notes"
"To populate the Exhibitions menu (EC-11675) and to feed into What's happening and possible other future widgets. 


*Acceptance criteria:*
* The feed order should by default be in reverse chronological order with latest published gallery first
* The feed should be possible to filter by gallery Topic
* The feed should contain at the minimum Title, Description, Author/Publisher, Publication date, Link and the first image. (This should be enough to populate the What's happening?-widget, right!? 'cause that's the intention.)

*Notes:*
The feed may or may not be in Atom or RSS format - up to the developers. The bonus of it being either of them would be that it could then also be exposed to users for subscription (do people subscribe to RSS these days?)."
"The fix should be as simple as setting the the gemref to the newer version and running bundle install.
"
"As an advanced user (being someone who wants to debug, who wants to view information in a machine-readable way etc.) I would like to:

* View items in RDF/XML, JSON, JSON-LD, JSON+HTML (=our debug mode)
* View the API query that is used to construct the search page. Including the hidden thematic filters.

Design was done and accepted in EC-10805."
"Description of the problem: 

- Currently one of the facet titles looks off in comparison to the others. 

!blob.012.001!


I don't know if this is a bug or that this just good overlooked. I seem to remember that there was a ticket for the Facets that was similar to this one. In that ticket, the facets on browse got formatted correctly. But I have no idea if this one was left out or that this is a bug. 

*Solution:* 

Remove the type if we can and insert it behind ""show more...""

Acceptance criteria: 
- Enter the label behind ""show more..."" (if possible) 
!blob.014.001!


- If not: remove the label or make it look like the designs. 
!blob.013.001!




[
"
"STUB TICKET

https://projects.invisionapp.com/d/main#/console/1083571/220327303/preview
https://projects.invisionapp.com/d/main#/console/1083571/220083277/preview"
"Description: 

All LocaleApp related copy is pulled into the acceptance environment for the launch. of Fashion. 
Needs to be verified if everything is there and if it's displayed correctly. 

Acceptance criteria: 

- Copy needs to be exactly like [~adrianmurphy] wants it to be. "
"when creating or updating a Gallery
when lot's of the image urls are not valid, like for example:
{code:java}
http://www.europeana.eu/portal/record/2063629/AUS_280_012.html

http://www.europeana.eu/portal/record/2022362/_Royal_Museums_Greenwich__http___collections_rmg_co_uk_collections_objects_561344.html

http://www.europeana.eu/portal/en/record/92085/lnb_zl_30993.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055603908.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055510102.html

http://www.europeana.eu/portal/en/record/9200291/BibliographicResource_3000073493475.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055662501.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055662439.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055662440.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055686058.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055650228.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055627309.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055612996.html

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055607165.html

http://www.europeana.eu/portal/en/record/9200324/BibliographicResource_3000051876432.html

http://www.europeana.eu/portal/en/record/9200103/BibliographicResource_1000055512936.html

http://www.europeana.eu/portal/en/record/2022360/Imperial_War_Museums_http___www_iwm_org_uk_collections_item_object_205087039.html
{code}

then submitting the data will cause a CookieOverflow error which will result in a 500 page for the editor rather than a usable error page, or validation text in the CMS.

This doesn't happen when the validation returns earlier because for example, there are too many/few images on the gallery.

It is most likely an Issue with the validation data that is sent back in order to show validation errors."
"*Background:* 

As part of the design, social icons should be added to the bottom of each blogpost. 

!blob.016.001!

Currently they are missing and we would like to add them. 

*Acceptance criteria:* 

- I would like to see all blogpost pages end with the social icons for Facebook, Twitter, Pinterest Google+ (in that order) 
- I would like to see the following behaviour for social sharing: 

*Use https://developers.facebook.com/docs/reference/opengraph/object-type/article/*
og:title = title, og:description = excerpt field or first 200 charcters of body field title, og:image = ""featured image"". og:url = article URL and add article:section = thematic collection (category) to define the collection. 
- If there is no image, we can use a generic thumbnail with our logo. Collections however told me that they don't publish blogs without a featured image. 
- If there is no description: use the 200 characters of the post. 

*__- I want to see TwitterCard added too.__*
 For Twitter this should be a Summary card with Large Image, https://dev.twitter.com/cards/types/summary-large-image
 For Twitter: title of the article, large image featured image or if there is nothing our logo) and description.

*_- For Pinterest:_* 
 For Pinterest use the same solution as for pinning item pages, https://developers.pinterest.com/docs/widgets/save/
(image, description) 

- Make it work in GA.






"
"*Background:* 

As part of the design, social icons should be added to the bottom of each event. 

!blob.016.001!

Currently they are missing and we would like to add them. 

*Problem:*

I couldn't find an open graph object type = event. A possible solution would be to use something similair to this one (https://developers.facebook.com/docs/reference/opengraph/object-type/business.business/) if building something from scratch is not doable. Although I think that the info comes from something that is static, not changed everytime.... 

*Acceptance criteria:* 

- I would like to see all in-event pages end with the social icons for Facebook, Twitter, Pinterest Google+ (in that order) 
- I would like to see the following behaviour for social sharing: 
   - Include the URL, include the title of the event, Include the image, include the location, include the time
   - If there is no image, we can use a generic thumbnail with our logo. 

*__- I want to see TwitterCard added too.__*
- Image and link to event. 

*_- For Pinterest:_* 
 For Pinterest use the same solution as for pinning item pages, https://developers.pinterest.com/docs/widgets/save/
(image, description) 

- Google Analytics in place. 







"
See EC-11744
"*Problem:*

Currently the title in the galleries uses a capital letter for every word. 

!blob.015.001!


*Solution:*

Don't do this

*Acceptance criteria:* 
- Configure in such a way that the Gallery titles display whatever the author fills in in the CMS. 

"
"STUB TICKET

See ticket EC-11620 for more reference

* Calls to action for social sharing of individual blog posts must be present
* Nice to have: Reading time estimate
* Nice to have: Comments. We can live without in the first implementation, perhaps beyond as comments add little value.
* Nice to have: Authors shown with their image and contact info. We can live without this in the first implementation.
* Nice to have: On page calls to action in the Blog list page to filter the list by categories and tags"
"In the gallery under ""creator"", make the display logic use the same logic as ""creator"" does for the portal (look for edm:agent labels before dc:creator). So that we don't display raw URIs to users, which looks ugly.

!blob.018.001!


vs. 

!blob.019.001!


*Acceptance criteria:* 

- I want to see the same under ""creator"" in the galleries, as in the portal. 
I think that the portal works with something like ""for creator; look at edm:agent. If there is no edm:agent, then look for dc:creator"". But I can be wrong :) 


"
"STUB

Might be interesting because we can ask people to create something in acceptance and that way have all the copy there before we launch instead of filling things in afterwards. "
"STUB UMBRELLA TICKET

*Possible features/stories:*
* Give the editor the choice which images to pull in and display in cases where there's 1 CHO with multiple HasViews - as there will be a lot for e.g. WWI e.g. http://www.europeana.eu/portal/en/explore/galleries/portraits-of-german-army-officers-by-johann-valett
* On creation make a check that the shownbys return a proper JPG or PNG MIME-type. To avoid broken images.
* Make them embeddable offsite incl. a special internal embed in-Exhibition function (the latter is Douglas idea as an alternative to them frequently embedding Pinterest galleries). With automatic checking of copyright that enables/disables the embed option. oEmbed compliant.
* Make them searchable in Collections (will be needed once we have them in the hundreds, which will be soon...). A first simple implementation could be to do it in the browser/same way as for the sources page!?
* IIIF viewer in the gallery viewer and allow editors to pull in IIIF WebResources, see ticket EC-11773
* Allow editors to tag them with Entities, see ticket #1939 To improve intrasite navigation and SEO.
* Data provider tags, autocreated, to improve attribution and SEO
* Item to Gallery relations and navigation, see ticket EC-11635
* User created galleries (My Europeana). User can create and publish galleries. MAJOR FEATURE.
* Comparison slider for two images in the galleries. Cp. the equivalent exhibitions feature that allows comparisons of two images..
* Galleries REST-API so that 3rd parties can programmatically (search for and) retrieve them.
* Pin one gallery per thematic collection to the top of the list, to accommodate communication / marketing / topical themes priorities at a given time
* Add support for other media than images (e.g. music to demonstrate what a musical instrument sounds like)
* A way to preview the gallery - every gallery curator so far has asked ""can I see a preview?""
* Include select technical metadata in the viewer (file type and pixel dimensions), to help a user decide whether an image is of sufficient technical quality for their intended use and thus dowload-worthy
* Add an end-screen in the viewer that shows 3-6 related galleries to the one that the user has just finished - to never dead-end a users navigational path without encouraging them to explore further. Cp. for example with YouTube vides which when you end come to their end you get suggestions for other videos.
* Timed publication of galleries. Would allow us to create ""anniversary"" galleries well beforehand and according to a editorial calendar"
"It looks like this Record: 
2021648/1297_C9002
contains wrongly escaped single quotes that show as:
&EC-9773

More examples for the same Collection:
2021648/2000_BGLD2038
2021648/2000_BGLD2030
2021648/2000_BGLD2032
2021648/2000_BGLD1991
2021648/2000_BGLD1994
2021648/2000_BGLD2049
2021648/2000_BGLD2053"
"*Description:* 

Currently it is not possible to filer / search exhibitions in the exhibition foyer http://www.europeana.eu/portal/en/exhibitions/foyer . 
With an ever growing number of exhibitions, it is time to implement the search function or filtering option to the foyer to make life easier for our end users. 
The initial design showed two methods for this: 

!blob.017.001!

For this SPIKE I would like to investigate how we can make this happen. 

*Goal:*
At the end of this sprint, I would like to see a proposal on how to go about searching and filtering exhibitions in the exhibitions foyer. 

*Acceptance criteria:*
- I want to know if it can be done.
- If so I would like to know what the best solution(s) will be.
- I would like to know what the pro's and cons are (for each of the solutions if applicable).
- I would like to have a time estimation for the solutions.
"
"Task: 
We want the upload form for UGC on 1914-1918 to be more effective and contain applicable fields for the portal not for the 1914-1918 portal. 
Keep in mind that not only end-users are users here, but also cataloguers and administrators. 

Goal:
At the end of this sprint, I would like to see a first draft of the upload form. 

Relevant documentation: 

https://asset1.basecamp.com/1768384/projects/639371/attachments/51403143/19919570c8f211680e0d1c9ce48258440010/original/210613_story_submission.pdf
https://asset1.basecamp.com/1768384/projects/639371/attachments/51402949/fd9f2e422110f074fe653697cf46b3430010/original/020513_changes_to_story_submission.pdf
https://asset1.basecamp.com/1768384/projects/639371/attachments/51402925/fd9f2e0940a154d3d5c980e8505098a20010/original/290413_cataloguer_submission.pdf

"
"With thumbnail but small - without thumbnail at all
IMAGE - TEXT - AUDIO - VIDEO - 3D - and variants of: IIIF, with playable/viewable/listenable media, without  such media
etc.

and provide examples of each"
"Currently the HTML is not working on all pages. 

*Acceptance criteria:* 

- Make the HTML formatting work on all pages. 

This estimation for this ticket is so microscopic small. "
"*Problem:*

On both the events and the Gallery filtering option, filtering via the ""filter by"" on Galleries and the ""view"" on Events doesn't trigger an automatic page reload. 
For an end-user this means that the illusion is created that there ""are no galleries related to that topic"" or ""there are no past events"", when in fact they are there, they're just not on that page. 

*An illustration of the problem:*

_For Events:_

!blob.020.001!

There are no ""future events"" included in the page above. 
But there are indeed ""future events"" if you look among all the events. 

When you switch to ""future events"" in the ""view"" box however... 

!blob.021.001!

It will show you... nothing. 
This tells me that it does filter. But it filters within the information on the page only!

_Something quite similar happens to Galleries:_ 

!blob.022.001!

Notice how on the final page for the Galleries, there are (f.e.) no Fashion galleries, only art. 
However, I do know that there are fashion related Galleries in the foyer. 
Triggering that search however, will give you: 

!blob.023.001!

And will also make it look as if you are back at page 1. 
This tells me that the page search is triggered for in the page, and for the user it might look as if the page is reset back to one. Not showing anything, which is not true. 

_*Replication of the problem for Galleries:*_ 

-  Go to the gallery foyer
- Pick a page that has content with only one topic like http://www.europeana.eu/portal/en/explore/galleries?page=3
- Filter on a topic that is not represented on the page (f.e. fashion)
- Notice the problems above. 


*_*Replication of the problem for Events: *_* 
- When you are on a page with past events, quite far in the past, like: http://test-npc.eanadev.org/portal/en/events?page=3&per_page=96&sort=past
- Switch to future events, the page number gets no reset: will give you the screenshot above. 
- Notice that the URL with parameters looks like this: http://test-npc.eanadev.org/portal/en/events?page=3&per_page=96&sort=future

*Acceptance criteria:* 

- I would like to see the following behaviour: 
 - triggering the filter would filter in all content, not just the content on the page. 



 


"
"It was misunderstood that blog posts would always have an image - this is not the case however:

We should design and implement the handling of the case where images are not provided / available!blog-no-image.png!
"
"*Problem:* 

Currently the blog label is missing from the blogs on the what's happening feed. 
!blob.024.001!

After talking to [~lbiedinger] we established that there was no ""quick way"" to solve this because adding the ""blog"" label to the Blog would also make it appear on the ""events"" feed. You could argue that since the events are not displayed in the what's happening, this shouldn't be a problem, but we would like to do things neatly around here!

*Solution:* 

Can we add the ""blog"" label to display on the blogs in the ""what's happening feed"" without affecting it any other form of content in there? 

*Acceptance criteria:* 

- The blog 'label' should say ""Blog"" not ""news""
- I would like to see the blog tag appear on the blog content in the ""what's happening feed"" consistent with the design here: 

!blob.025.001!

"
"How do we handle updated and new content from Fashion? *After* we've made the switch to Collections, that is.

- What will their object identifiers look like post-switch?  For new items? For existing ones?

We need to clarify this and work it out together with the Fashion people.
"
"*User story: 
*
- As a user I would like to see a preview of the exhibitions in the exhibitions dropdown in the top-navigation 
- Europeana wants to see as much as the same behaviour cross features as possible. 
- Europeana Collections top-navigation should display the same behaviour no matter where you are in the Collections realm. 

*What is the problem?*

The exhibitions dropdown in the portal only shows the first 6 exhibitions: 

!blob.026.001!

while the dropdown in exhibitions displays almost all of them (or seems to try so): 

!blob.027.001!

*Proposed solution:* 

I would like the dropdown in exhibitions to be mirrored to the portal one, so the exhibitions dropdown in exhibitions needs to display the first six. 

*Acceptance criteria*

- I want to see the same behaviour for the Exhibitions dropdown as the portal dropdown for exhibitions. 
"
"Conservative versioning if feature changes are minor.

Pre-deploy tasks:
* EC-11715: remove/comment out wget of New Relic config file in Jenkins job, as it's in the repo now with browser monitoring disabled
* set CF manifest: ENABLE_CSRF_WITHOUT_SSL: 1
* styleguide: v0.2.85

Post Deploy:
* release notes"

"In the first iteration of the 1914-1918 thematic Collection, we will deprecate public-facing use of the existing 1914-1918 site at http://www.europeana1914-1918.eu/, in favour of giving end users access to its content and functionality through the Europeana Collections site.

This ticket is to consider what would be involved in handling redirects from the existing 1914-1918 site to the Collections site, including:
* story pages
* item pages
* static pages
* contribution mechanism and user dashboard
* search pages, including facets, pagination and federated searches

Treatment of redirection of story and item pages would be impacted by the decisions made for a refined data mapping of 1914-1918 metadata to EDM (see EC-11576).

A redirection strategy would need to account for multilingual content on 1418, including languages not present (yet) on the Collections site, like Bosnian."
"Remove CSRF token from GET requests - see [~richard.doe]'s comments here:

https://europeanadev.assembla.com/spaces/europeana-npc/tickets/1997/details?comment=1192636403
https://europeanadev.assembla.com/spaces/europeana-npc/tickets/1997/details?comment=1192670343
https://europeanadev.assembla.com/spaces/europeana-npc/tickets/1997/details?comment=1192685123"
"Following on from the initial proposed new mapping for Europeana 1914-1918 metadata to EDM (see EC-11576), it was agreed that to fully understand the extent to which a mapping of 1418 story to CHO and 1418 item to web resource may have a negative impact on the quality of the 1418 item-level metadata, we should first analyse the metadata in 1418's MySQL database to ascertain:

# how often items even have metadata
# how often those items have metadata distinct from that of the parent story
# when this is the case, how many items are in the story
# where metadata fields are never, or barely ever, used"
"After some testing it was very clear that some of the features developed for the galleries were completely ignored, even a useful feature that some complained of not having available like filtering, was right in front of them.

With this in mind, it seems very pertinent to reintroduce tooltips as a way to present to users new features and improvements, which in this case, would be applied to the filtering dropdown and also the ( i ) icon explaining what each one does and how it helps the user for a even better experience.
!Screen Shot 2017-04-18 at 13.24.50.png!

I would suggest introduce another tooltip in the homepage on the top nav mentioning this new way of exploring europeana (via the main nav menu), as it's a bit hidden in a dropdown.
!Screen Shot 2017-04-18 at 13.28.14.png!

The text is placeholder, should be thought out accordingly.
*_please don't mind the typo inside the tooltip examples_"
"As a way to ensure consistency to our foyer pages and also reduce the size of the thumbnails, making the page more easy to browse we should reduce the _width of the container_ that holds the thumbnail on the galleries foyer, by using exhibitions width as a example.

!Screen Shot 2017-04-18 at 16.24.56.png!


* As a nice to have, it would also be very useful to add an *extra margin between rows* of gallery thumbnails making more evident that they are separate units, and have more _breathing room_ on the question mark icon."
"A few changes / clearifications need to happen on the Federated Search and the Entities design. 
We want to wrap this up as soon as possible so I would like to see that we lose as little momentum as possible here. 

Let's use this ticket to ping each other when something comes up. 
"
"*Background:* 

We are turning 1914-1918 into a thematic collection and the deadline for this is around mid-end June. 
In order to estimate and prioritise work, we need to not only cover all the technical work, but also the design work and front end implementation of this work together. 

*Your challenge:* 

I would like to see possible solutions for the user registration, login and contribution dashboard. 

*Game rules:* 

- All suggestions need to be implementable within 1 month of development time
- Solutions need to be kept as simple as possible given the fact that we only have one front-end developer available and this superperson does have other stuff on his plate too. 
- Bear in mind that we keep the functionality that current 14-18 has in tact. 
- _All functions remain in the standalone 1914-18 site_. 

Important references: 

http://www.europeana1914-1918.eu/en"
"The end-user blog posts on blog.europeana.eu will be imported into Pro and displayed on the Collections site by retrieving them using JSON API.

Once the import is complete (see EC-11751), then redirects need to be put in place from the old URLs to the new ones. The set of redirects will be supplied as an outcome of the final import of blog posts into production Pro.

Probably by adding a virtualhost for blog.europeana.eu to the main Apache."
"*Userstory:* 

As a user I want to share images on my Pinterest board so I the world can see how happy I am with Europeana. 

*Problem:* 

Currently, when a record has a IIIF viewer, pressing the Pinterest Icon on the portal will produce a 'image broken' icon. If you use the Pinterest plugin, it will allow you to pin directly from the image, _but_ since the image is made up from tiles, it allows you to share that tile, not the entire image. 

_Example of sharing a 'tile' via the plugin:_ 

!blob.028.001!

_Example of what happens when you share via the social sharing button:_ 

!blob.029.001!

Test record: http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055686058.html

*Your mission:* 

Can we make it so that sharing the entire image is possible? 

*Acceptance criteria:* 

-  I would like to share the entire image on my pinterest board. 


Links that you can use for testing this: 

http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055686058.html
http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055627309.html

"
"*User story: 
*
As a user I would like to sign up to the Europeana Newsletter so I can stay informed about everything Europeana. 

*BUG:* 

Currently when you try to sign up for the newsletter from the footer in Europeana Fashion the following error will occur: 

!blob.031.001!


!blob.030.001!

All other footers seem to work great but Fashion is the only one causing a problem. 

*Your mission:* 

Make the footer subscription in the Europeana thematic collection for Fashion work.
Could it perhaps have something to do with the fact that Fashion is the only one that uses the browse landingpage? Could this even mess up the footer? Idk... 

*Acceptance criteria:* 

- I would like to be able to sign up to the Europeana Newsletter when I am on the footer in http://www.europeana.eu/portal/en/collections/fashion
"
"*Discussion task, Ash, Michelle, David, Dasha*
We need to find out what the relations between the UGC and MyEuropeana are and how we can work out the best 'fit'. 

Here is a list of questions/topics that need to be addressed:
# How does creator metadata correlate with MyEuropeana users? meaning once a UGC is created and the user wishes to update the item, how can we know if that user was, in fact, the creator of that item (note that we cannot rely on the name of the creator).  
# If a user changes its e.g. name, will it be reflected on the creator fields? this is a scenario that should not happen that often but it is still possible."
"*Background:* 
To get some of the editorial work out of the exhibitions work-flow: the exhibitions currently have an automated system to generate the credits on the creditspage. 
We are not sure if they were ever pulled in since now only one of the exhibitions is known to use a slider. However; the new Fashion exhibition that is ready to launch for the 4th of May (when Europeana will launch the fashion collection officially too) uses 8 of them and this means we have 16 images that are currently not featured on the creditspage. 

*BUG:*

When the image slider is used, the credits are not automatically generated on the creditspage: see http://www.europeana.eu/portal/en/exhibitions/credits

*Your mission:*
Make those credits show up. The reason why this ticket has high priority is because we are launching fashion on the 4th of May and this exhibition is at the center of the launch. 

*Acceptance criteria: 
*
- When I add a slider that uses two images, both images should be automatically added to the creditspage. 

"
"*_Europeana 1914-1918 gets Framed!_* 

*Background:* 

Migration strategy proposals: https://docs.google.com/document/d/1SRSJzhdQxf1i-rzVAKJImVz1LWOeZG1W2BmLUJ-hja4 
Assembla SPIKE ticket: https://app.assembla.com/spaces/europeana-npc/tickets/1804 
Google doc: https://docs.google.com/document/d/14jlkgWHtpGV46yWyMje7B4XVJJNfkEomdyMu7EBEZxM/edit#

We are turning Europeana 1914-1918 into a Thematic Collection. In order to integrate the UGC features into Europeana Collections we came up with the solution of iFraming the features to prevents (heavy) development on the 1914-1918 application and Collections. 

*User EPIC:* 
As a user I want to be able to upload my UGC to Europeana Collections. 

*Implementation:* 

* Remove layout elements, e.g. header, footer and navigation, from 1914-1918 templates, leaving just the core content.
* Create a page on the Collections site embedding the 1914-1918 UGC functions in an iframe, e.g.: 
 /portal/en/collections/firstworldwar/contribute

This iframe will need to handle the following functionality from 14-18:

1.  europeana1914-1918.eu/en/users/register (non-logged in users registration)
2. europeana1914-1918.eu/en/users/sign-in (non-logged in users sign in)
3. europeana1914-1918.eu/en/users/password/new (non-logged in users password reset)
4. europeana1914-1918.eu/en/contributor  (non-signed in users links to register/login and help pages OR overview of logged in user's stories)
5. europeana1914-1918.eu/en/users/account (overview of logged in user's account details)
6. europeana1914-1918.eu/en/contacts/[NUMERIC USER ID]/edit?redirect=%2Fen%2Fusers%2Faccount (edit account details page for logged in user)
7. europeana1914-1918.eu/en/contributions/new (signed in user's new contribution form)
8. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/edit (signed in user's edit contribution form)
9. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/delete (signed in user's delete contribution confirmation form)
10. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/new (signed in user's new item form - also signed in user' view of existing items)
11. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/flickr (signed in user's flickr item creation - requires user to be logged into flickr too?)
12. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/[NUMERIC ATTACHMENT ID]/edit
13. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/[NUMERIC ATTACHMENT ID]/delete (signed in user's attachment deletion confirmation form)

Additionally the 14-18 app allows logged in users to edit their login credentials, however this functionality is broken. when requested it will result in ""The resource you requested was not found.""
# europeana1914-1918.eu/en/users/edit?redirect=%2Fen%2Fusers%2Faccount


This implies design work and technical (front-end) work. 

FRONT-END NOTE: Decide on a way that the URL(s) in the iFrame would work. 


Related tickets: "
"*Background:* 

See ticket EC-11840 for more background. 
https://docs.google.com/document/d/14jlkgWHtpGV46yWyMje7B4XVJJNfkEomdyMu7EBEZxM/edit#

*Userstory:* 

As a user I would like to login to Europeana and upload my UGC so it stays preserved forever

*Problem:* 

We have decided that we would go with the solution of iFraming the UGC features into Thematic Collections. How would this look for each frame, where would the login be etc? 
Do we perhaps need a special version of the landingpage when it comes to the 'calls to action'? (register / login) 

*Your mission:* 

Create designs for the iFrames. We can change the fonts / buttons on Europeana 1914-1918 itself if this is of great help. 

*Acceptance criteria:* 

Designs present for the iFrame available at *""/portal/en/collections/firstworldwar/contribute""* covers the pages:
1. europeana1914-1918.eu/en/users/register (non-logged in users registration)
2. europeana1914-1918.eu/en/users/sign-in (non-logged in users sign in)
3. europeana1914-1918.eu/en/users/password/new (non-logged in users password reset)
4. a) europeana1914-1918.eu/en/contributor (non-signed in users links to register/login and help pages) <---This is the default entry point for the iframe
OR
4. b) europeana1914-1918.eu/en/contributor (overview of logged in user's stories)
5. europeana1914-1918.eu/en/users/account (overview of logged in user's account details)
6. europeana1914-1918.eu/en/contacts/[NUMERIC USER ID]/edit?redirect=%2Fen%2Fusers%2Faccount (edit account details page for logged in user)
7. europeana1914-1918.eu/en/contributions/new (signed in user's new contribution form)
8. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/edit (signed in user's edit contribution form)
9. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/delete (signed in user's delete contribution confirmation form)
10. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/new (signed in user's new item form - also signed in user' view of existing items)
11. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/flickr (signed in user's flickr item creation - requires user to be logged into flickr too?)
12. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/[NUMERIC ATTACHMENT ID]/edit
13. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/[NUMERIC ATTACHMENT ID]/delete (signed in user's attachment deletion confirmation form)

 - Localization keys should be available for the log-in bar and [~andyjmaclean] to provide locale app links.
 - Account page should be accessible when the user is logged in via a button in the menu bar."
"*Background:* 

See ticket EC-11840 and EC-11841 for more background on the EPIC and the Design for this. 
We want to turn Europeana 1914-1918 into a Thematic Collection, decided to go for the iFrame option in ticket EC-11526. 

*User story:*
As a user I would like to login to Europeana and upload my UGC so it can be preserved forever. 
As a user I would like to be able to alter my UGC when I make a mistake or delete it entirely. 
Europeana wants to keep the basic functionality (login / register / upload / change / save)  from the old Europeana 1914-1918 in the new Thematic Collection

*Your mission:* 
Make sure all the designs presented in ticket EC-11841 get implemented in the iFrames and make it look like the integration is complete. 

*Acceptance criteria:* 
- I want to see that the designs covered in ticket EC-11841 are ""live"" in the portal. 
- I want to see that the iFrame available at *""/portal/en/collections/firstworldwar/contribute""* covers the pages: 
1. europeana1914-1918.eu/en/users/register (non-logged in users registration) [yes]
2. europeana1914-1918.eu/en/users/sign-in (non-logged in users sign in) [yes]
3. europeana1914-1918.eu/en/users/password/new (non-logged in users password reset) [yes]
4. a) europeana1914-1918.eu/en/contributor (non-signed in users links to register/login and help pages) *<---This is the default entry point for the iframe* [yes]
OR
4. b) europeana1914-1918.eu/en/contributor (overview of logged in user's stories) [yes]
5. europeana1914-1918.eu/en/users/account (overview of logged in user's account details) *[No, creating new story]*
6. europeana1914-1918.eu/en/contacts/[NUMERIC USER ID]/edit?redirect=%2Fen%2Fusers%2Faccount (edit account details page for logged in user) *[No, creating new story]*
7. europeana1914-1918.eu/en/contributions/new (signed in user's new contribution form) [yes]
8. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/edit (signed in user's edit contribution form) [yes]
9. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/delete (signed in user's delete contribution confirmation form) [yes]
10. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/new (signed in user's new item form - also signed in user' view of existing items) [yes]
11. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/flickr (signed in user's flickr item creation - requires user to be logged into flickr too?) [out of scope]
12. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/[NUMERIC ATTACHMENT ID]/edit  [yes]
13. europeana1914-1918.eu/en/contributions/[NUMERIC CONTRIBUTION ID]/attachments/[NUMERIC ATTACHMENT ID]/delete (signed in user's attachment deletion confirmation form) [yes]"
"to include handling of both old and new annotations code re: EC-11831
"
"*Background:* 

Europeana 1914-1918 is to keep most of its functionalities when we move it into a Thematic Collection. 
Part of this is the ""Federated Search"" option that can be viewed (e.g.) here: http://www.europeana1914-1918.eu/en/collection/explore/content/Diary?qf%5Bindex%5D%5B%5D=a
Last sprint we SPIKEd the work on a technical level and design level, this sprint we will focus on the implementation of this. 

See ticket EC-11795 and EC-11413 for more background or see https://docs.google.com/document/d/1ztzXVMftJ_oeUDRPJ6LEfDsA3CIfK0g1W8JK4J18gIU/edit#heading=h.v1j9jcb1kbxm (technical documentation) and https://invis.io/SPBEAH487#/229906102_Collections_Federated_Tabbed_Module for the design overview. 

*User EPIC:* 

As a user I would like to browse other sources than Europeana for WW1 related content while remaining in the Europeana Collections space

*Technical overview:* 

* A Ruby gem providing a normalised interface to query the various federated search providers, with a Rails engine for ready integration into Rails apps, implementing only features relevant beyond the Europeana Collections use case
* Additional features relevant only to the Europeana Collections use case, e.g. per-collection queries, implemented in the applicationΓÇÖs own codebase

*Design and front-end overview:* 
https://invis.io/SPBEAH487#/229906102_Collections_Federated_Tabbed_Module
https://invis.io/4BBF6NKGM#/230416938_Collections_FederatedSearch_Mobile_Bp_Small_2



"
"*Background:* 

See ticket EC-11844 for the full background on this. The purpose of this ticket is to work on a Ruby gem providing a normalised interface to query the various federated search providers, with a Rails engine for ready integration into Rails apps, implementing only features relevant beyond the Europeana Collections use case. 

*User story:* 
As a user I would like a normalised interface to query the various federated search providers so I they will get displayed properly in on the results pages. 

*List of requirements:* 

- Responses should conform to JSON API
- Should be capable of querying multiple APIs in parallel
- Should gracefully handle errors from APIs, both application-level (e.g. record not found, invalid query) and infrastructure-level (e.g. internal server error, bad gateway)
- Would need to handle credentials for those APIs that require them
- Should implement support for Europeana's Search/Record API, for use by others
- Could be inspired by the pattern of the Ruby oEmbed library re registering providers
- Should be readily extensible by others, like our extension of the Ruby oEmbed library for providers it does not support out of the box
- Should have a Rails engine to provide the controller, routes, and JSON views to Rails applications
- In a first (pre-1.0.0) version, to support our use case it would only need to implement a DSL to run simple search queries and return:
    -Total record count
    -Configurable number of records to return, but no pagination
    -Title and thumbnail URL of records returned
    -Links to full search results and individual records on providerΓÇÖs website

*_PLEASE NOTE:_* In future, it is anticipated that it may be extended to support pagination and faceting of searches, and individual record retrieval
NB: careful consideration would need to be given as to whether we have the resources to commit to maintaining a much more feature rich and hence complex open-source library to an acceptable standard

*Acceptance criteria:* 
-  a simplified and normalised Ruby interface to multiple third-party APIs to facilitate record searching, and later retrieval, without the need for a developer or their application to (necessarily) have intimate knowledge of the workings of each API.
- Ruby Gem should have it's own github
- Should be added to rubygems.org"
"*Background:* 

Please see ticket EC-11844 and EC-11846 for more background. 
The scope of this ticket is to create The Collections application for the Federated Search. The application would need to bundle the Ruby gem and mount the Rails engine to get access to the federated search functionality. It would furthermore need to implement any Collections-specific features.

*User Story:* 


*Requirements:* 

- New db model representing a federated search with columns for:
    -Collection ID (foreign key)
    -Federated search provider (from those provided by the Ruby gem)
    -Search query (for collection-specific searches in the context of the provider)
- Rails Admin CMS configured to allow configuration of federated searches nested on the collection add/edit forms
- Front end to request from the Rails app result counts and thumbnails for each enabled federated search provider via AJAX after initial page load and populate the display in the middle of the search results
- Front end to be entirely responsible for construction of the tabbed view for federated search results, as these are AJAX and hence JS dependent

*Acceptance criteria:* 

- I want to see an application that bundles the Ruby gem and mount the Rails engine to get access to the federated search functionality.
- I want see an application that implements any Collections-specific features.
- As an admin, I can choose to enable or disable the federated search on a per-collection basis
- As an admin, I can choose which federated search providers to include (because some may have no value for a specific collection)
- As an admin I should be able to specify the specific base-query via the CMS on a per-provider basis, by collection.

"
"*Background:* 

The ever so cool Federated Search Ruby Gem mentioned in ticket EC-11846 needs a cool logo. 

*Your mission:* 

Come up with the cool logo that helps this Ruby Gem to be taken seriously. 

*Acceptance criteria:* 

- I want to see a cool logo that makes me think: ""I am impressed. This ruby gem is not a gem that you can mess with"". "
"*Background*

See ticket EC-11846 for more context. This Ruby Gem needs a cool logo (ticket EC-11848) but also a name. 

*Your mission:* 

Give the Gem a name that is catchy and memorable and not Europeana-bound. 

*Suggestions:*

**Faser**: _Federated API Searcher_
faser not taken on rubygems.org

**Massage**: _Multi-API Search Sage_
normalising the data from all those APIs is like massaging itΓÇª
massage not taken on rubygems.org

**Foederati**: _Federated API Searcher_
Foederati were Roman allied nations or tribes
foederati not taken on rubygems.org"
"*Background:* 

For more background, check EPIC EC-11844. 
In order to implement the federated search to the search-result pages in the 1914-1918 Collection, we need to have a design of what it's going to look like. Previous sprint the design got approved to be this: https://invis.io/SPBEAH487#/229906102_Collections_Federated_Tabbed_Module . The scope of this ticket is to implement and bring the design to life on the portal. 

*User story:* 
As a user I want to see non-Europeana sources included in the search results so I can browse those as part of my knowledge quest of WW1 information. 

*Your mission:* 
Implement the design that is here: https://invis.io/SPBEAH487#/229906102_Collections_Federated_Tabbed_Module and bring it to life on the portal!

*Design Specs:* 
STUB [~cr.marcelino] can you write these after refinement? 

_On Desktop:_ 



_On Mobile:_ 

https://invis.io/4BBF6NKGM#/230416938_Collections_FederatedSearch_Mobile_Bp_Small_2
- each tab will be just a image showing the 1st result of the query of that source
- the label is similar to the 'View all' on desktop, taking you to the search result page of the source (as when you click the image)
- in this case when there's no image in the 1st result we use the logo of the source
- again expanding will be the opt-in for the module

*Acceptance criteria:* 
- I want to see the *exact* design brought to life on the portal. 
- I'd like a localization key on the call-to-action bar so that this can be translatable
- I would like a google analytics event so we can track usage of this button. "
"*Background:* 

Currently we have chosen to not include the facets in the 14-18 Thematic collections because of the complexity of it. 
However: turning 14-18 into a Thematic Collection, also implies that the users of the previous 14-18 portal are now moved over to the Thematic Collection. 
These users can't destinguish anymore between UGC and the Institutional Content, but, should they? Ah: UX problems arrise!

*Your mission for this SPIKE:* 
Investigate how we can go about Facets in the 1914-1918 Thematic Collection. How can we tackle the problem from a UX point of view. 

*Acceptance Criteria:* 
- I want to know if we should do this and what the best UX options are
- Create an overview of things we should find out to implement this. 
- Create a technical design/overview of how we will implement this.
- Create an overview of tasks which need to happen to implement this."
"Feature ideas - great and small:
* Better multi-editor options/authorisation model
* Import of items via API with manual review post-import
* Embeddable in full off-site
* Better language handling in the foyer
* Foyer pagination
* Search for exhibitions (in the foyer and overall)
* Sort exhibitions by topic (cp. galleries) in the foyer (sort by date of publication would be default)
* Automatic addition of tiles to the foyer (based on newly published exhibitions and its title and hero image)
* Hi-res zoomable images upload and publication, see ticket EC-11307
* Native audio and video player (Video.js)
* Native book reader 
* Single-page layout option w. incremental scroll instead of pagination
* Footnotes/References
* Item to Exhibition relations and navigation, see ticket ΓÇª
* Schema.org markup
* Use the same template but to publish what is naming wise and a conceptually different: courses, opinion pieces, long form papers, etc. "
Ticket from EC-11837
"User account functionality is to be retained in the 1914-1918 application but presented in an iframe on the Collections site.

One of the features this covers is the resetting of passwords for user accounts by sending a password reset link in an email.

This mini-spike is to consider how this would work alongside the iframed application.

---
As a follow up to this ticket a new ticket was created #2147"
"Deployment to production of #1873 will introduce hierarchies obtained by AJAX but only when explicitly requested by URL parameter, so that it can be benchmarked in a production environment against the current approach to obtaining hierarchies during initial page request.

See #1873 for implementation ticket.

See EC-11744 for benchmarks performed for same treatment of similar items API call.

As an outcome of this ticket we need figures for comparative performance of the two approaches on the production environment, and a decision as to whether we should switch to the new AJAX approach."
"According to Europeana Fashion email: 

""we have the following issue concerning blog.europeanafashion.eu:

There is a list of files published through that blog, contained in http://blog.europeanafashion.eu/download/. The links to these files need to be operational since they have been distributed to the public and are out of our reach to change. Switching blog.europeanafashion.eu to europeana's portal has broken these links, therefore we have switched it back to the old server.

We have hosted theses files in
http://files.europeanafashion.eu/download/
Could you please configure your servers hosting blog.europeanafashion.eu
(cf.eanadev.org) to redirect (http 302)
http://blog.europeanafashion.eu/download/dir/file.pdf
to
http://files.europeanafashion.eu/download/dir/file.pdf (the whole url) so that these links become operational?""

When this is done they can switch blog.europeanafashion.eu to point again to our servers."
"*Brief background:*
The Statistics Dashboard is not working well and we do not have the resources to improve it without compromising the redevelopment of 14-18 and then Newspapers.

Rather than to let the Statistics Dashboard languish it has thus been decided to deprecate it and to instead use Google Analytics and our accounts on Datawrapper and Google Data Studio to ""manually"" create usage reports (for Europeana overall, NOT per data provider) and publish them on a quarterly and annual basis on Europeana Professional.

*TODO:*
Before May 10we should shut it down and redirect all its URLs to a page that says:

""The automated dashboards have been temporarily shut down as Europeana is currently working on changes to the data structure. For statistics on Europeana usage, please visit our statistics area on [Europeana Pro|http://pro.europeana.eu/europeana-statistics/].""

Once that message has been up for a few weeks we simply redirect with no message at all.

Note: The URL is a placeholder. It may turn out to be http://pro.europeana.eu/europeana-statistics/ but could also be smth different. I will confirm ASAP."
"*David - I'm not sure where analytics technical responsibilities lie so I will catch up with you on this*

Europeana 1914-1918 is currently configured as a site of its own in Google Analytics. In order to maintain continuity post-migration, we need to ensure we can continue to capture statistics when it exists as a thematic collection. 

At some point, the europeana1914-1918.eu domain will stop collecting data but we should still have the ability to tie the data it already it collected into the new thematic collection data.

*Acceptance*
 - We can continue to monitor the share buttons
 - We can still monitor usage of facets
 - We're able to monitor the use of the landing page/entities/items of that collection"
"*Regular Deployment Bug - Non-hotfix*

*User story:* 

As a user I want to be able to look at the record in Europeana environment, with a working isShownBy URL resolving.

*_However:_* 
When clicking a thumbnail on record page level, the lightbox displays the message ΓÇÿThis image could not be loadedΓÇÖ. Example: http://www.europeana.eu/portal/en/record/2021629/memorix_ffc2a6c8_f457_f58c_38bb_4044ae2e4957.html

!image.png!

Clicking this text leads you to a proxy page which displays ΓÇÿInternal Server ErrorΓÇÖ . https://proxy.europeana.eu/2021629/memorix_ffc2a6c8_f457_f58c_38bb_4044ae2e4957?view=https%3A%2F%2Fimages.memorix.nl%2Fszu%2Fthumb%2F640x480%2F5df47c71-2862-3050-e533-0b34bd21e256.jpg However, the URL in the isShownBy resolves: https://images.memorix.nl/szu/thumb/640x480/5df47c71-2862-3050-e533-0b34bd21e256.jpg (48kB)

so it is unclear why the image is unaccessible.

*Acceptance criteria:* 

- Since I am not sure why this is happening, I want the problem to be flushed out and solved 


"
"*Background:* 

re-use and API requested an _estimation_ on the estimation of time it will take for the Search Widget to: 
- follow the Europeana Design Templates
- and supports simple text search with no filters and facets

_*This ticket is timeboxed for 3 hours max. If it takes more time to do so, this ticket should be disregarded.*_ 

*Acceptance criteria:* 

- I want to know the estimate of the time it will take to realise the things mentioned above. 
- I want this estimation to take no longer than 3 hours. "
"Implemented within Collections is a JSON endpoint for retrieval of other items similar to a given record, e.g. http://www.europeana.eu/portal/en/record/92093/BibliographicResource_1000086156490/similar.json

This results in two API queries: one to the Record API to retrieve the metadata for that record; another to the Search API to search for similar items after a suitable query has been constructed from the record metadata. This is necessary given the absence of any similar items method on the API itself, but makes the AJAX implementation of similar items slow to complete.

*Proposed solution:*
Given that during initial page generation for an item page the record metadata has already been retrieved, it should be possible to instead generate the similar items query at that time, and supply to the front-end a URL for a JSON search with those query parameters already in place, negating the need to re-run the query to the Record API.

*Acceptance criteria:*
Similar items AJAX should calls go to /portal/en/search.json, not /portal/en/record/123/abc/similar.json in order to decrease the delay."
"The purpose of this investigation is to get an overview of exactly which media sources are holding us back from SSLing Collections. Then we at least will have a sense of the size of the problem and which partners we need to contact to ask for SSL versions/upgrades or otherwise handle.

Known sources of non-SSLed media:
- Some of our providers of embeddable players, e.g. CREM-CNRS
- Some of our IIIF providers

Known not to be a problem:
* Our own oEmbed service implementation, i.e. https://github.com/europeana/europeana-oembed-provider/tree/develop/lib/europeana/oembed/sources
* Media on item pages served through our proxy

*Acceptance criteria:*
A clear and complete list of the partner media sources holding us back from SSLing Collections (see EC-11406 for history).

*Why do we want to SSL Collections?*
For our users privacy and for SEO."
"In EC-11820 we've defined a new mapping. One based on a hybrid model where only stories with rich items are to be mapped and published as a hierarchical objects with the majority mapped-published as one CHO with multiple WebResources.

This story is to implement an OAI-PMH output from 14-18 based on that strategy and the updated mapping. This will likely require a couple of micro iterations where the developer works closely with R&D and a Data Officer to test-modify-test-modify before settling on a first new output format to go into operation.

*Acceptance criteria:*
 - The 14-18 OAI-PMH endpoint outputs data in accordance with the updated mapping suggestions in EC-11820 and that output to have been tested in the UIM and test published in the ingestion preview portal.
 - Sense check whether the data coming into the collections renders sensibly compared to what is currently live on collections


*Sample records:*
* http://www.europeana1914-1918.eu/en/contributions/5037: story with the most items (983), having no distinct title or description; rendered on portal as 984 records: http://www.europeana.eu/portal/en/record/2020601/contributions_5037.html + http://www.europeana.eu/portal/en/search?q=proxy_dc_relation%3A""http%3A%2F%2Fwww.europeana1914-1918.eu%2Fen%2Fcontributions%2F5037"" -- *web resources*
* Contribution ID 155, 80 attachments, 1 having its own title, no other distinct metadata -- *?*
* Contribution ID 17048, 168 attachments, about half having own title and description (and maybe other metadata) -- *CHOs*
* Contribution ID 21131, 14 attachments, all having distinct title, and rich metadata -- *CHOs*
* Contribution ID 738, 26 attachments, all having same title as contribution but contribution has some extra spaces at end of title, none having description -- *web resources*
* Contribution ID 20880, 9 attachments, 3 having distinct title and description, 6 not -- *?*
* Contribution ID 3664, 209 attachments with rich metadata, including many sets of page_number and page_total -- *CHOs*
* Contribution ID 4073, 11 attachments with little distinct metadata, but page numbers -- *WRs*"
"In order to allow users to reset their password for the 1914-1918 Login, we need to handle the reset logic through the Portal and the iframe.

For more context see the original Spike ticket EC-11854

Front end work:
The frontend needs to be able to parse an anchor tag paramater of the reset token and pass it to the iframe.

Back end work:
The 1914-1918 application needs to be updated to send out password reset links that go to the portal url with the token in the anchortag instead of a link to the 1914-1918 APP."
"Item pages are not being indexed by search engines because they contain 'search' in their URL.

We have 160 000 items blocked from being indexed by them having ""search"" in their item URL. Example: http://www.europeana.eu/portal/record/2064113/search_result_php_item_id_101.html

This is inadvertently caused by our trying to block search result pages from being indexed.

We can fix this problem by adding the following line to our robots.txt file:

{code:java}Allow: /portal/record/*
{code}

You can test that this works in the [Google Search Console robots.txt tester page|https://www.google.com/webmasters/tools/robots-testing-tool?hl=en&siteUrl=http://www.europeana.eu/]

*Acceptance criteria:*
Record pages with the word search in their URLs are no longer blocked to search engine crawlers."
"*This ticket will be looked at by Cecile through re-indexing of the full dataset in July. It remains here as a reference point.*

When clicking the Publisher link, I'm getting an invalid query response. Not sure whether this comes under collections or APIs.

Replication steps:
1. Go to below link
2. Scroll to Provenance meta data.
3. Click on the Publisher: hyperlink. (see below screenshow)
4. Error is thrown

http://www.europeana.eu/portal/en/record/91643/SMVK_OM_objekt_116320.html?q=who%3A%28Hokusai%29

!Screen Shot 2017-05-10 at 17.03.15.png!"
"*Userstory:* 

As a user of the old Europeana Fashion portal, I still want to have access to the content on the new Europeana Fashion Thematic Collection to check out the latest blogs. 

*Problem:* 

Currently blog.europeanafashion.eu redirects to the _landingpage_ of the thematic collection. It will be better to point this to the Europeana Fashion blog in order not to confuse the user too much. Note: the redirection app is at present not distinguishing between incoming _hostname_ so it redirects homepage for both www.europeanafashion.eu and blog.europeanafashion.eu to the Fashion Collection page. 

*Proposed solution:* 
redirect blog.europeanapfashion.eu to http://www.europeana.eu/portal/en/blogs?theme=fashion. This probably implies that the redirection app would need to start inspecting the hostname. 

*Acceptance criteria:* 

- If I visit blog.europeanapfashion.eu , it will redirect to http://www.europeana.eu/portal/en/blogs?theme=fashion
"

"!Screenshot_20170512-124419.png!
!Screenshot_20170512-124413.png!

For the test environment only, the browse media icons seem to have disappeared from the mobile view on Chrome. This can be seen on Ash's mobile (above) and Richard's mobile. This is still working on production.

Please could we fix this before it hits production."
"The browse oriented landing page risks becoming completely dominated by facets and sneak peeks with no thumbnails. See fashion.europeana.eu right now for example.

Suggested fix:
For all browse landing page facets and sneak peeks automatically add has_thumbnails:true as a search parameter. This will in most cases remove the issue.
"
"Example:
I want a filter that reduces results to only maps and images of certain sizes (medium and larger). 

Which is the equivalent of this http://mediadiscovery.europeana.eu/?action=search&query=what%3Amaps&provider=&data_provider=&mime_type=&image_size%5B%5D=medium&image_size%5B%5D=large&image_size%5B%5D=extra_large&image_colour=&image_aspectratio=&full_text=&sound_hq=&sound_duration=&video_hd=&video_duration=&colour= which in API-terms is http://europeana.eu/api/v2/search.json?query=what%3Amaps&rows=25&start=1&qf=IMAGE_SIZE%3Amedium&qf=IMAGE_SIZE%3Alarge&qf=IMAGE_SIZE%3Aextra_large&profile=facets&wskey=api2demo

So I try to set the query filter to:
qf=what:maps AND (IMAGE_SIZE:medium OR IMAGE_SIZE:large OR IMAGE_SIZE:extra_large) which results in an invalid search

I try  qf=(IMAGE_SIZE:medium OR IMAGE_SIZE:large OR IMAGE_SIZE:extra_large) AND what:maps and also get invalid query

In short, I find myself unable to set a query filter that combines keywords with CRF-based facets. The Media Discovery tool indicates it should be possible in terms of API.

So, am I doing something wrong? Or is there an issue and some limitation in the current setup that we can remove?
"
"Reporter: [~adrianmurphy] and @marjolein

There are currently live issues on the gallery in which errors are being thrown: http://www.europeana.eu/portal/en/explore/galleries/sartorial-masculinity
There are also issues of the item page not rendering correctly: http://www.europeana.eu/portal/en/explore/galleries/clothes-for-the-ballroom

Original message from Adrian:
""adrianmurphy 
[1:54 PM] 
Hi all. @marjolein brought to my attention that this gallery is coming up with an error

[1:54] 
http://www.europeana.eu/portal/en/explore/galleries/sartorial-masculinity
Europeana
Error - Europeana Collections
We&EC-9773;re sorry! The portal has encountered an error. A report has been automatically sent to the Europeana team to notify us. You can try to reload the page or do another search.

[1:54] 
I looked into it. The gallery should have 13 images but 4 are now causing an error

[1:54] 
So it only has 9, and automatically de-publishes?

[1:54] 
I assume that's what is happening here

[1:55] 
I think the images are no longer showing because of the Fashion re-harvest

[1:55] 
(again: assumption but it seems likely)

[1:55] 
It also has a knock-on effect to other galleries"""
"Requester: [~richard.doe] 

As a product owner, I'd like us to reduce our risk of being compromised by securing the ruby services as reported by Gemnasium.

Richard has created a document here detailing the risks: https://docs.google.com/document/d/1hVD_qlgKcWfvd-Ff3aU1Kae680zqGW5Mo1_5uWkwSvE/edit?ts=591ac60b

Acceptance criteria:
# update mail and nokogiri gems in europeana-portal-collections and europeana-virtual-exhibitions *as a hotfix*
# deploy hotfixed Collections and Exhibitions to acceptance and production
# merge hotfixes back into develop brances of Collections and Exhibitions repos
# update mail and nokogiri gems in radio-station on its develop branch (but no immediate need to deploy as they are dependencies of dependencies and the vulnerabilities will not impact it given its feature set)
# "
"!Screen Shot 2017-05-17 at 11.18.27.png!

When clicking the public domain license link on the thematic collection, it loops back to the same page. Could we fix this link to go to the appropriate license link. [~Maggy] please can you provide the link?

*Acceptance Criteria*
 - In the license links in the dropdown, there should only be the options as specified by Maggy (https://europeanadev.assembla.com/spaces/europeana-npc/tickets/2184/details?comment=1213723653)
There links are:
'Public Domain Mark' => 'public' => 'http://creativecommons.org/publicdomain/mark/1.0/'
'CC0' => 'CC0' => 'http://creativecommons.org/publicdomain/zero/1.0/'
'CC BY' => 'CC_BY' => 'http://creativecommons.org/licenses/by/4.0/'
'CC BY-SA' => 'CC_BY_SA' => 'http://creativecommons.org/licenses/by-sa/4.0/'
'CC BY-ND' => 'CC_BY_ND' => 'http://creativecommons.org/licenses/by-nd/4.0/'
'CC BY-NC' => 'CC_BY_NC' => 'http://creativecommons.org/licenses/by-nc/4.0/'
'CC BY-NC-SA' => 'CC_BY_NC_SA' => 'http://creativecommons.org/licenses/by-nc-sa/4.0/'
'CC BY-NC-ND' => 'CC_BY_NC_ND' => 'http://creativecommons.org/licenses/by-nc-nd/4.0/'
'In Copyright - EU Orphan Work' => 'INC-OW-EU' => 'http://rightsstatements.org/vocab/InC-OW-EU/1.0/ΓÇï'
'In Copyright - Educational Use Permitted' => 'INC_EDU' => 'http://rightsstatements.org/vocab/InC-EDU/1.0/ΓÇï'
'In Copyright' => 'INC' => 'http://rightsstatements.org/vocab/InC/1.0/'
'No Copyright - Non-Commercial Use Only' => 'NOC_NC' => 'http://rightsstatements.org/vocab/NoC-NC/1.0/'
'No Copyright - Other Known Legal Restrictions' => 'NOC_OKLR' => 'http://rightsstatements.org/vocab/NoC-OKLR/1.0/'
'Copyright Not Evaluated' => 'CNE' => 'http://rightsstatements.org/vocab/CNE/1.0/'ΓÇï

 - The HREF of the license should point to the appropriate license link based on what is selected from the list above.

!Screen Shot 2017-05-24 at 09.33.29.png!"
"Paraphrased from [~richard.doe] : We are making multiple db queries on each page request just to populate the primary navigation links. We should cache these queries, and the legwork has been done in this pull request: https://github.com/europeana/europeana-portal-collections/pull/865

The benefit: We don't make multiple DB requests on each page load, decreasing load on our resources (and I would imagine decreasing page load)"
"*Example:*
http://www.europeana.eu/portal/en/record/2048208/OBJ31804.html?debug=json
which has
{code:java}""dcCreator"": {
        ""def"": [
          ""Raf Simons (Designer)"",
          ""Jil Sander (Designer)""
        ]
      }
{code}

*Notes:*
* Could it be because one of these have been matched to an EDM Agent but not the other? And that only the matched one is thus shown?
* Was reported by Europeana Fashion so when fixed report back to them that it is."
"Sometimes when content is re-ingested into the Europeana platform, items are removed. Sometimes these items are also in galleries and this can cause the gallery to fail completely without warning.

Please could we identify a solution that:

* Notifies editorial by slack that an image is missing
* Remove the image from the gallery if it is deleted
* Removes and notifies if the image reference is changed

[~hugo.manguinhas] has a suggestion for notification record identifier changes as he is solving the same issue so please speak to him about this issue."
"*Problem*
The current batch downloads (custom JSON format) contain old and now outdated TEL media and HTML links and are also not IIIF compliant. This makes them unreliable and more difficult to view than they could and should be.

*Suggested solution:*
Take advantage of the IIIF protocol and transform the JSON files to be IIIF compliant and when doing so update the metadata and media and HTML links to being stable Europeana ones. 

The feasibility of this has already been proof of concepted by Nuno.  

Proof of concept example:
http://universalviewer.io/uv.html?manifest=http://test-solr-mongo.eanadev.org/europeana-research-newspapers-dump/sample-2017-04-26/1878-01-01.manifest.jsonld#?c=0&m=0&s=0&cv=0&xywh=-3137%2C-193%2C8428%2C3851

Benefits of doing this early in our Newspapers Collections development cycle include:
* This is a quick win for Europeana and our researcher users and enables us to deliver something valuable early in what is otherwise going to be an extended development cycle
* It provides us a target format for IIIF compliant JSON that we then have to develop APIs support for to be able to dynamically output based on user queries. This will be very useful for the developers implementing that API.

*Acceptance criteria:*
* Create a Europeana Newspapers IIIF Collections which in turn contains one Collections per Newspaper title and then the issues as IIIF Manifests within. We'd have to coin Europeana URIs for the Collections and Manifests. 
* Update the metadata in the manifests with the metadata we have available esp. the provider name and the rights value. For the richest possible given the available metadata
* Include in each manifest a link to the OCR:ed text for that issue. Ideally in a format that works with tools like e.g. [Voyant|https://voyant-tools.org/] and is also suitable for indexing for search in Lucene based search engines "
"Testing sheet: https://docs.google.com/spreadsheets/d/18JvHSGW0kMxHeXqYDqCz79e8M8Xar-zL8_ZADtFCtO8/edit?usp=sharing

In the first iteration of the 1914-1918 thematic Collection, we will deprecate public-facing use of the existing 1914-1918 site at http://www.europeana1914-1918.eu/, in favour of giving end users access to its content and functionality through the Europeana Collections site. We will therefore need to redirect users to the collection sitting within the portal for those who have bookmarked or saved links.

We should implement the redirects according to documentation created by Lutz here: https://docs.google.com/document/d/1ASTpe-nhUV2cpkJz0y53SPAcbpj9R3Ijs5C9-hNVjzM/edit#

If you're curious about what 'bookmarks' users have saved to 14-18, please see this analytics breakdown of direct access: https://analytics.google.com/analytics/web/#report/trafficsources-all-traffic/a22297409w43928082p43980802/%3F_u.dateOption%3Dlast30days%26explorer-table.plotKeys%3D%5B%5D%26explorer-table.secSegmentId%3Danalytics.searchDestinationPage%26explorer-table.rowCount%3D100%26_r.drilldown%3Danalytics.sourceMedium%3A(direct)%20%2F%20(none)/

Acceptance criteria:
 - I should be able to open an item page in collections through an old URL (http://www.europeana1914-1918.eu/en/contributions/776)
 - I should be able to open a story page in collections through an old URL (http://www.europeana1914-1918.eu/en/contributions/20631)
 - I should be redirected to an appropriate static page from old static URLs including:
 - - http://www.europeana1914-1918.eu/en/about/takedown - http://www.europeana.eu/portal/en/rights/contributions.html
 - - http://www.europeana1914-1918.eu/en/about/terms - http://www.europeana.eu/portal/en/rights/contributions.html
 - - http://www.europeana1914-1918.eu/en/about/privacy - http://www.europeana.eu/portal/en/rights/privacy.html
 - - http://www.europeana1914-1918.eu/en/about - /portal/en/collections/world-war-I
 - - http://www.europeana1914-1918.eu/en/contact - http://www.europeana.eu/portal/en/contact.html
 - - http://www.europeana1914-1918.eu/en/statistics - http://pro.europeana.eu/europeana-statistics/

- Standard searches should be redirected such as: http://www.europeana1914-1918.eu/en/collection/search?q=medallion&qf%5Bindex%5D%5B%5D=a&utf8=%E2%9C%93
- Federated searches should redirect to a standard 14-18 non-federated search query in collections, and the user can choose to federate at the bottom of the page (http://www.europeana1914-1918.eu/en/trove/search?page=1&q=medallion&qf%5Bzone%5D=picture&utf8=%E2%9C%93).
 - Faceted search should not be considered in the redirects, just the text search query itself.
 - Pagination should not be considered, just the text search query itself.

*The following is up for discussion, theoretically we could achieve a minimum outcome by redirecting them to the sign-in page*
 - I should be able to access the contribute mechanism (http://www.europeana1914-1918.eu/en/contributor)
 - I should be able to log in through: http://www.europeana1914-1918.eu/en/users/sign-in
 - I should be able to register here: http://www.europeana1914-1918.eu/en/users/register
 - I should be able to reset my password accessing this URL: http://www.europeana1914-1918.eu/en/users/password/new
 - I should be able to access my account page by accessing this URL: http://www.europeana1914-1918.eu/en/users/account

 - I should see the site in the language of the URL I am trying to access it through (http://www.europeana1914-1918.eu/nl/users/account > Dutch version of collections)
 - Should the language of access be currently unavailable in the collections, it should redirect to the English version of the site.
"
"!Screen Shot 2017-05-22 at 16.53.07.png!

In Safari on a mac, the menu text and arrows are not correctly rendering. Following a discussion with [~cr.marcelino] just now, it is potentially solvable by updating the library that generates the menu.

https://www.smartmenus.org/download/

This issue affects 15% of our overall users."
"*User story:*
As a user I want to be able to quickly choose a theme to filter my search results

*Problem:*
In July we will have 7 themes: Music, Art, Fashion, Photography, 14-18, Natural history, Maps & Geography and Sports. But the height of the theme filter on the search results page is not high enough to show them all - see attached image!ThemesFilter_increaseheight.jpeg!

We may wish to compensate for that somehow?"
"*Partner value: Large -  the ability for partners to expose their most valuable content and hand pick what they think is great for our end users.*

Let's implement the functionality to make these links work like BEPs.
!Screen Shot 2017-06-07 at 11.50.27.png!

Conversely from the end-user perspective: As a user, I want to be able to access curated content from SMEs, so that I get the best possible experience.

Let's make the browse landing page curable so we can really deliver the best value content to the end user.

In the style of the browse landing page, we should be able to:
- Create a title for a custom group of Browse Entry Points
- Add a Browse Entry Point to that landing page to be displayed

!Screen Shot 2017-06-08 at 11.27.27 1.png!"
"*Userstory:* 

As a user I would like to see relevant information about 14-18 displayed in the Collections. 

*Possible Problem:* 

Currently the iFrame is displaying everything in 1914-1918, but the info in the copy for 1914-1918 is not up to date. So the copy needs to be updated. (see ticket ... in editorial sprint) 
The usual workflow was for all the text to be localised in Translate Wiki but since we have terminated their services; we now need to make sure that the right copy is displayed in the iFrame via a source other than that and make sure that the updated version of the copy ends up in 1914-1918. (And therefore is displayed in the iFrame.)

*Acceptance criteria:* 

- I want a connection between the copy on 1914-1918 and a source. 
- I want to know the source because the Collections team needs to update the copy. 
- I want the updated copy to display in the iFrame 

*Things that might be helpful to know:* 
- I think we still used LocaleApp as sort of a CMS system for the creating the source xml for translate wiki. Ergo: all the text should be present in Locale.
- I also recall that at one point there was a connection between LocaleApp and the 1914-1918 website. I don't know if there is any documentation about this, but it seems to me that it might be the case that if there is, the connection is easy to restore; meaning that LocaleApp is probably the best candidate for 'the source' of the localisation. 
- In terms of the Portal working with LocaleApp already, I would prefer the source to be LocaleApp. 
"
"In the styleguide, we have both a title and introduction text. http://styleguide.europeana.eu/?p=templates-Search-static-page-no-nav

!Screen Shot 2017-05-24 at 14.34.52.png!

At present, there is no way to actually create this introduction text on a static page, so let's add a field into the CMS that facilitates this.
http://acceptance-npc.eanadev.org/portal/en/collections/maps/catalanatlas.html
!Screen Shot 2017-05-24 at 14.35.32.png!

*Acceptance criteria: *
 - An additional field between 'title' and 'body' that allows input of HTML.
 - An output of the above text underneath the title within the blue strip.
 - The text should be wrapped in paragraph tags by default."
"Users by now should be aware of galleries and the functionality, so let's drop the tooltips regarding this.

!Screen Shot 2017-05-24 at 15.37.42.png!
!Screen Shot 2017-05-24 at 15.39.44.png!

*Acceptance criteria: *
 - There should be no more tooltips on the galleries page
 - There should be no more tooltips to galleries from the portals page"
"We are going to have free access to a tool called Browserstack (browserstack.com). This allows us to create Silenium webdriver automated tests that give us the opportunity to test across different platforms.

As a minimum, I'd like to know:
 - How easy is it to run key pages and features on the devices from the list below and obtain screenshots?
 - Can we obtain javascript console errors?

Why this could be good for us?
 - We can blanket check design on *all* of our supported browsers and platforms, mobile and desktop.
 - With the launch of the new item display page and technologies involved, front-end testing is going to be vital to make sure we provide the best user experience.
 - With screenshots from each device, we'd be able to at-a-glance check whether appearance is affected.
 - More time is then available for testing of other in-depth features.

Browser compatibility site requirements: 
 - Google Chrome 49+
 - Firefox 45+
 - Safari on mac 9<
 - Internet Explorer 11 + Edge <
 - Samsung's stock Internet Browser (our most popular Android device and webkit/chrome based)
 - Safari on iPad and iPhone"
"This mechanism that (used to) expand the collapsed attribution in the bottom right of hero images (mobile view) no longer works.

*Technical Notes*

* the mechanism is based on pure CSS and works by using the :focus pseudo selector
* the element to be focussed is a <div> and a div can only have focus if it has a tabindex
* the tabindex on the attribution element was removed last [October|https://github.com/europeana/Europeana-Patternlab/commit/9a3397d90e0aca81e75e60f9f6185ea1856d14c9#diff-2395cb89079b409067f72acabd02e745] as part of the accessibility work, so it probably hasn't worked since then"
"At the moment, we've got this format below, which doesn't make it clear that the title associates with the content below.
http://www.europeana.eu/portal/en/collections/fashion

!Screen Shot 2017-05-29 at 11.37.40.png!

Could we do something to make this clearer? Perhaps integrate the category into the title such as *Explore _wool_ on Europeana Fashion*.

*Acceptance:*
 - The text works for any category title and doesn't look misplaced.
 - The category name is distinguished so the user knows there are other categories available.
 - We need to account for multilinguality and the ability to make the word work with any sentence"
"This ticket documents deployment tasks for the launch of the World War I collection, ETA 19 June.

*Pre-deploy:*
# Γ£ôadd a new hostname for the 1418 app on EY, e.g. 1418.eanadev.org (see EC-11870); embed.europeana1914-1918.eu
# Γ£ôdeploy Collections v2.2.0 (see #2227)
# cΓ£ôreate and publish a WWI collection and landing page on production portal (needs to have the key: world-war-I), setting federated search provider queries on the collection 
# Γ£ôdeploy Apache update
# Γ£ôrepoint www.europeana1914-1918.eu to production apache
# Γ£ôrepoint europeana1914-1918.eu to redirection NGINX
# 

*Deploy:*
# Γ£ôensure config/flickr.yml on EY app master doesn't have production keys, *before deploying*
# Γ£ôdeploy 1914-1918 v3.6.2"
"I want to start being able to validate the need for new features without building them (for example, adding a button for a feature that doesn't exist yet, in order to validate whether people use that button)
https://optimize.google.com/
Please could we follow the implementation steps below to do this:
---
*Add Optimize to your website*

*Step 1: Update your Google Analytics Tracking code
*
Do the following on every page where you want to use Optimize:
Move your Analytics snippet as high as possible in the <HEAD> of the page.
Copy this line of code (the Optimize plugin):
ga('require', 'GTM-K7MPPLG');
Paste into your existing Analytics snippet as shown below:
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-12776629-1', 'auto');
  ga('require', 'GTM-K7MPPLG');
  ga('send', 'pageview');
</script>

*Step 2: Minimize page flickering*
This snippet ensures that users only see your variant content, minimizing page flicker. Learn more
Copy the code below
<style>.async-hide { opacity: 0 !important} </style>
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
})(window,document.documentElement,'async-hide','dataLayer',4000,
{'GTM-K7MPPLG':true});</script>

Paste it just before your updated Analytics tracking code anywhere you want to use Optimize.

If you do not have Analytics on your site, or for other ways to deploy Optimize, including serving it with Google Tag Manager, refer to the Optimize help center.
---

Acceptance criteria:
 - The tag should sit on all pages of the collections site.
 - Ash is able to execute a test on the collections site."
"Could we please configure queries for each of the federated search providers in preparation for rolling out federated search across all thematic collections.

*Acceptance criteria:*
 - When viewing a thematic collection (Art, Fashion, Music, Photography, World War I), the results should be relevant to the theme.

*Query filters*

*DPLA*

These are applied in test, copied in here for simple copy and paste to acceptance and production.

{code:java}Art
(subject:(art OR ""fine arts"" OR paintings OR murals OR prints OR sculptures OR drawings OR reliefs OR ""decorative arts"" OR ""arts and crafts"" OR ""interior decoration"" OR art history"" OR ""decoration and ornament"" OR ""art dealers"" OR ""porcelain""))

Music
(subject:(music OR ""sheet music"" OR composer OR ""musical instruments"" OR ballet OR opera OR musical OR ""symphony orchestra"" OR librettos))

World War I
""world war, 1914-1918""

Photography
(subject=(photographs OR daguerreotypes OR daguerreotype OR ""photographic prints"" OR ""photograph albums"" OR ""stereoscopic views"" OR photography OR photographers OR ""Black-and-white+negatives"" OR cyanotypes OR postcards))

Fashion
(subject=(fashion OR ""clothing and dress"" OR ""fashion design drawings"" OR cosmetics OR perfumes OR hairstyles OR accessories OR jewelry OR costume OR costumes OR shoes OR dresses))
{code}

*DigitalNZ*
Can't get limiting to a subject field to work. TODO: Check with DigitalNZ if it's possible

{code:java}
Art
(""art history"" OR paintings OR sculptures OR ""fine arts"" OR ""decorative arts"" OR ""visual arts"" OR drawings)

Music
(music OR ""sheet music"" OR composer OR ""musical instruments"" OR ballet OR opera OR musical OR ""symphony orchestra"" OR librettos)

Fashion
(fashion OR ""clothing and dress"" OR ""fashion design drawings"" OR cosmetics OR perfumes OR hairstyles OR accessories OR jewelry OR costume OR costumes OR shoes OR dresses)

Photography
(photographs OR daguerreotypes OR daguerreotype OR ""photographic prints"" OR ""photograph albums"" OR ""stereoscopic views"" OR photography OR photographers OR ""Black-and-white+negatives"" OR cyanotypes OR postcards)

World War I
(""1st world war"" OR ""world war one"" OR ""World War, 1914"" OR ""world war i"" OR ""world war 1"" OR ""first world war"")
{code}

*Trove*
Same queries as for DigitalNZ. TODO: Check if it's possible to limit results to online items only. That's possible in the Trove portal  but I don't know how to utilise it in the API-call!?

{code:java}
Art
(""art history"" OR paintings OR sculptures OR ""fine arts"" OR ""decorative arts"" OR ""visual arts"" OR drawings)

Music
(music OR ""sheet music"" OR composer OR ""musical instruments"" OR ballet OR opera OR musical OR ""symphony orchestra"" OR librettos)

Fashion
(fashion OR ""clothing and dress"" OR ""fashion design drawings"" OR cosmetics OR perfumes OR hairstyles OR accessories OR jewelry OR costume OR costumes OR shoes OR dresses)

Photography
(photographs OR daguerreotypes OR daguerreotype OR ""photographic prints"" OR ""photograph albums"" OR ""stereoscopic views"" OR photography OR photographers OR ""Black-and-white+negatives"" OR cyanotypes OR postcards)

World War I
(""1st world war"" OR ""world war one"" OR ""World War, 1914"" OR ""world war i"" OR ""world war 1"" OR ""first world war"")
{code}"
"Hi [~richard.doe]  - Please could you keep track of how much time is spent on any work relating to selection of the hosting provider in this ticket?

Feel free to break it down into subtasks if necessary.
"
"*Please could we hotfix this*
The licenses link for Public Domain Marked (http://creativecommons.org/publicdomain/mark/1.0/) items has disappeared. This is generated after the edm:rights rdf resource of the aggregation. This can be viewed on items matching this license, such as here: 
http://www.europeana.eu/portal/en/record/92099/BibliographicResource_2000081662432.html?q=

!Screen Shot 2017-05-31 at 10.04.44.png!

I can not see this problem for any other license."
"There are currently failing tests which seem to stem from a fialure in some javascript that is coming from facebook:
{code:java}
Capybara::Poltergeist::JavascriptError:
        One or more errors were raised in the Javascript code on the page. If you don't care about these errors, you can ignore them by setting js_errors: false in your Poltergeist configuration (see documentation for details).
      
        Facebook Pixel Error: ReferenceError: Can't find variable: Set
        Facebook Pixel Error: ReferenceError: Can't find variable: Set
            at http://connect.facebook.net/en_US/fbevents.js:24 in fc

{code}
This is not effecting any actual functionality but in order to have passing tests a fix for this should be implemented.

"
"This is inconsequential (it doesn't break functionality) but an error appears in the log when arriving on the object page from a search in a collection:

!js-error.png!"
"h1. Pre release branching:
* Γ£ô push new version of foederati gem to rubygems and make collections app use it
h1. Pre release tasks: 
* Γ£ô deploy production styleguide
* Γ£ô Run DB migrations
* Γ£ô Run db seed
* Γ£ô Configure env variables:
{code:java}  EUROPEANA_1914_1918_URL:
  FEDERATED_SEARCH_API_KEYS_DIGITALNZ: 
  FEDERATED_SEARCH_API_KEYS_DPLA: 
  FEDERATED_SEARCH_API_KEYS_TROVE:
  EUROPEANA_STYLEGUIDE_ASSET_HOST: https://europeana-styleguide-production.s3.amazonaws.com/v0.2.90
{code} "
"To ensure smooth access (and have a marketable URL), we should make the following URLs redirect to the 1914-1918 thematic collection.

URLs:
These are effectively synonyms/other representations of world war i:
 - world-war-i.europeana.eu
 - world-war-I.europeana.eu

Acceptance criteria:
 - A permanent non-indexable URL."
"While testing the Federated Search on  the Mac Safari (On browserstack), I noticed 2 things about the Search Edit Box.
1.) The delete cross is on a separate line
2.) Without having entered anything, suggestions start to appear (on Safari clicking the arrow keys does the trick) Escape key doesn't make the suggestions disappear.

I don't know if the configuration of the search suggestions is changed, but the suggestions now cover a large part of the results, making them inaccessible.
Investigating a bit further, I notice that in Chrome and Firefox the search suggestions disappear when using the escape key.

!Search Edit Field Safari Browserstack.png!"
"Basecamp discussion: https://basecamp.com/1768384/projects/5774755/messages/69569021#comment_535300111

In the current implementation of collections search, every time you make a search, it generates a blue-tag keyword.
!Screen Shot 2017-06-08 at 09.12.10.png!

When you refine the search, you end up with multiple keywords.
!Screen Shot 2017-06-08 at 09.13.23.png!

The problem comes when you want to remove a search query, you're forced to reload the page each and every time. It's also impossible to highlight the search terms in this box and just delete them, the only way is to clear them one at a time.

Please could we investigate:
 - Whether we can make our search interactions more consistent with other services people are using.
 - A good interaction for modifying and clearing search queries.
 - Preventing making unnecessary refreshes because of the constrains of our interactions. 
 - Consider how the suggestion API may play into this in the future, but create something launchable with existing technology."
"This ticket is a follow up to: EC-11821

Because approval no longer equates to publication it has been decided to stop sending emails to users informing them of approval.

Acceptance Criteria:
The 1418 APP no longer sends emails to users when their submission is approved."
"The last tab item is styled differently from the other tabs (it has no right-hand border and has an extended bottom border on its after pseudo element).

The first of these rules makes no sense if the last tab is also the first tab (i.e. there is only one tab) - see screenshot!one-tab.png!
"
"!Screen Shot 2017-06-12 at 16.55.46.png!

Please could we move the expand and collapse symbols to the right,  it looks like margin-right in the outer container is preventing this at the moment.
 - The collapse plus/minus should be equal to the text spacing from the left.
 - The icon should be vertically aligned to the middle on both mobile and desktop"
"Please can we implement ga.js event tracking on the federated search so that we know when a user is going elsewhere to view items.

Acceptance criteria:
* This event should trigger when a user clicks on an item hyperlink to an external provider
* This event should also trigger when a user clicks ""view more at""
* Category: 'Federated Search'
* Label: *name of federated provider*
* Action: 'View external item'
or
* Action: 'View external results page'"
"There are test files for javascript components scattered throughout the styleguide, for example the [eu ellipsis|http://styleguide.europeana.eu/patterns/molecules-text-test-eu-ellipsis/molecules-text-test-eu-ellipsis.html] component was created solely for JS to be coded against.  It happens to have been placed under ""molecules"" though it could have been put under ""atoms"" or ""organisms"".

In order to keep the styleguide orderly mustache files that are never imported but used only to develop and demo should be moved into a new top-level folder called ""js_demo"".  This folder will be compiled / copied from ""source"" to ""public"" with the styleguide generate command, and will result in a new menu appearing in the styleguide alongside ""atoms"", ""molecules"" etc.

Doing this will allow front end developers to quickly see which mustache files are only used for js development and quickly find examples of js-based components."
"When a browse entry is published without a title, this causes an error on the relevant explore page. (explore/topics, explore/people, explore/periods)
to reproduce, have at least one published browse entry with a title and one published browse entry without a title in the same category, like for example ""topics"", then visit the topics explore page.

This error was observed previously by [~ash.marriott] in the acceptance space.

To fix we need to either make the title mandatory, or ensure nil values are converted to strings so they can be compared for sorting"
"*Background*

In css the rule ""text-overflow: ellipsis"" can only be applied to single lines of text.  For multi-line text (such as in the search-result grid-item summaries) alternative approaches are required. 

Originally the search-result grid-item summaries used javascript to help style them by applying ellipsis as necessary.  This javascript was considered to be resource-intensive when 96 results were present (the text flickered slightly as the script inititialised) and complex to maintain.  It was replaced with the (current) CSS approach last year - a technique with a good performance but which is visually less appealing (the ellipsis appear in a margin rather than in line with the text)

The javascript ellipsis was revamped and improved as part of the work on EC-11850.  It no longer relies on any specific markup and it manipulates text node values rather than full nodes, and is more efficient as a result.  It can be seen [here|http://styleguide.europeana.eu/patterns/templates-Search-Search-results-list/templates-Search-Search-results-list.html?view=grid] under the ""non-Eurpopeana sources"" results.


*Proposal*

We return to using a javascript-based approach to multi-line ellipsis on the search results page using the same [javascript|https://github.com/europeana/Europeana-Patternlab/blob/develop/source/js/modules/eu/util/eu-ellipsis.js] used in the federated search results."
"The deployment of application updates for 1914-1918 B1 in June 2017 was split into two deployments. This ticket is created after the first, for a record of actions that were taken.

# use styleguide v2.8.9
# create initializers on the EY app master config/initializers/iframe_parent_domains.rb *AND* config/initializers/e7a_1418_iframe.rb, *before deploying*
# run db:migrate when deploying v3.6.0 *which on EY puts up a maintenance page*
# upload and apply [Chef recipes|https://github.com/europeana/ey-cloud-recipes/blob/Europeana1914-1918/cookbooks/delayed_job/recipes/default.rb#L27] with DJ also running ""mapping"" queue
# ssh into the util instance, check that the DJ workers are running the new ""mapping"" queue with `ps aux | grep Delayed::Worker`, and if not run `sudo monit reload; sudo monit restart all` then recheck
# *after deploy*, on an app or util instance, run the rake task: `bundle exec rake mappings:edm_rdfxml` (this will take a while)"
"Acceptance criteria:
 - Every page should have a title following the same structure.
 - All page titles should end with "" - Europeana Collections""
 - - Why? Because if you look at the tabs up the top of your browser now, you only see the front part of the title. It's not exactly useful to have 5 tabs that say ""Europeana -...""
 - Collection pages should be *Collection name* - Europeana Collections
*or*
 - $Collection pages should be *Editor defined collection name* - Europeana Collections
 - Search results pages should be *Search query* - Search Results - Europeana Collections
 - Search results pages *without a search query* should be *Search Results* - Europeana Collections
 - Exhibitions foyer should be *Exhibitions* - Europeana Collections
 - An exhibition should be *Exhibition name* - Exhibitions - Europeana Collections
 - Galleries landing page should be *Galleries* - Europeana Collections
 - $An individual gallery landing page should be *Gallery name* - Galleries - Europeana collections
 - $If a gallery page title has not been specified it should be *Galleries* - Europeana Collections
- homepage should be ""Europeana Collections""
- ""Europeana Collections"" and ""Search results"" where they appear above are taken from Localeapp where they can be translated


Original request (from [~richard.doe]): I want to create a ticket to make consistent the <title> elements on pages across the Collections site. By which I mean most pages have titles like ""Page title - Europeana Collections"", but some do not, like search results (""query - Europeana - Search results"") and record pages (""record title - Europeana"") and collection landing pages (""Europeana Art""). Perhaps some should stay as they are (like collection landing pages), but I think we should (re)consider all. There are also some other issues with titles, like "" - Europeana - Search results"" when searching with an empty query, and ""Search results"" and ""Europeana Collections"" never being translated."
"*Why?* - When a gallery is created, it links to a cultural heritage object. With 1914-1918, one object can have many views (lots of images). We need to allow the curator of that gallery to choose a specific image from that CHO and for it to render correctly in the gallery.

*Acceptance:*
 - An individual image from a CHO with multiple HasViews can be added to the CMS.
 - This image should render as per the current scenario, with the metadata and links shown correctly on the lightbox.

At the moment, we can only add a list of items:
!Screen Shot 2017-06-19 at 16.02.37.png!"
"*Why:* It's a pain to have to save every single collection's landing page (and any other cached static pages) when you update a banner just to make sure that the changes filter through.

*Acceptance criteria*
When any of the following changes are made, let's invalidate the cache on the landing pages:
* The default banner is changed
* A banner title is updated
* A banner description in modified
* A banner is unpublished
"
"For some reason, the 1914-1918 facet is displaying as a checkbox of its own, rather than a radio button. 

Could we:
 - Reformat this list, so that all of the current thematic collections display
 - Change the 1914-1918 option to be a radio button instead of a checkbox


!Screen Shot 2017-06-20 at 11.17.53.png!"
"When Ad is logging into 14-18, he's experiencing an odd experience with the sign-in where he's seeing the full experience incorrectly within the iframe. He shouldn't technically ever see this as I thought it was enforced that we push it in to minimal view.

He is using Firefox 54.0 (32-Bit) Windows 7 and it looks like the below:
!screenshot_firefox_14-18_after_login02.JPG!
"
"Pre-deployment:
* Γ£ö Set GOOGLE_OPTIMIZE_CONTAINER_ID env var *if Google Optimize to be deployed*
* Γ£ö Make production deployment of styleguide v0.2.95
* Γ£ö Set styleguide env var (in production and internal portal manifests)
* Γ£ö Deploy media proxy update

Post-deployment:
* Γ£ö Release notes on Github"
"We'll be publishing 3 new thematic collections on July 3-4:
Maps and Geography
Natural History
Sport

They should have sub-domains just like the other themes. I suggest:

maps.europeana.eu - portal/collections/maps
natural-history.europeana.eu - portal/collections/natural-history
sport.europeana.eu - portal/collections/sport
"
"Sometimes when content is re-ingested into the Europeana platform, items are removed. Sometimes these items are also in galleries and this can cause the gallery to fail completely without warning.

*Proposed strategy:*
 - Create a new ""galleries"" channel in Slack
 - Store edm:isShownBy on GalleryImage
 - Run a scheduled job at 08:00 and 15:00 (UTC+1) to retrieve from the API the record for each gallery image; use the Search API with rich profile to get data for all images in a gallery at once
 - If the record no longer exists on the API, alert Slack ""Record for image x in gallery y [link] has been deleted"", include a URL to the gallery if possible
 - If edm:isShownBy has changed, alert Slack ""edm:isShownBy for image x in gallery y [link] has changed""
 - The job also attempts to retrieve the image over HTTP
 - If image retrieval fails, alert Slack ""Image x in gallery y can not be retrieved""
 - No automatic removal of images or other alteration of galleries occurs
 - Editors required to manually check and update/unpublish galleries


*Acceptance criteria:*
 - If edm:isShownBy has changed, an alert in #galleries should be visible ""edm:isShownBy for image x in gallery y [link] has changed""
 - If the record no longer exists on the API, an alert in #galleries should be visible ""Record for image x in gallery y [link] has been deleted""
 - If image retrieval fails, an alert in #galleries should be visible ""Image x in gallery y can not be retrieved""
 - The alert should appear in slack within 30 minutes of the job running, or the job should be timed so that the alerts appear at approximately 08:30 and 15:30 UTC+1."
"In the interests of protecting the browsing of our users, preventing third parties from injecting maliciously while a user is browsing Europeana, and improving our Google search index, let's serve as much as possible over SSL.

We can't blanket-SSL the whole site, because we have datasets that serve rich content over an unsecured connection, so let's SSL content through the approach suggested by Richard in the comment and ticket below.

[[url:https://europeanadev.assembla.com/spaces/europeana-npc/tickets/2145/details?comment=1226159003|[~DavidHaskiya] or, we could blacklist these by dataset ID, using non-SSL for their record pages and SSL for everything else, which would be very simple to achieve in Apache alone.
]]

Acceptance criteria:
 - When viewing an item of a dataset that does contain an unsecured embedded object (rich, image or otherwise), it should be a non-SSl page served via HTTP
 - When viewing any other page with external content, it should be served over SSL via HTTPS.
 - No security warnings should be shown in browser for any assets we're using, such as images, scripts, styles and other assets."
"*Acceptance:*
 - Only render the 10 first X dcterms:hasPart entries
 - After the AJAX call has detected that this is a hierarchical object, remove any dcterms:hasPart entries from the display that are to do with the hierarchy (if it's even possible to detect that)

https://europeanadev.assembla.com/spaces/europeana-npc/tickets/new_cardwall#ticket:2217

[[url:https://europeanadev.assembla.com/spaces/europeana-npc/tickets/new_cardwall#ticket:2217|[~ash.marriott] there is not much more to say about this than the above, but we should create a follow-up task to implement an adaptation on the Collections side so that the API change (removing Neo4J dependency from calls to the record endpoint) deployment can be unblocked. Given that we do have this inter-team/product blocker, I would be inclined to include this in the next sprint.
]]"
"*Hotfix please*

Doing a search:
http://test-npc.eanadev.org/portal/bg/collections/fashion?per_page=12&q=padding&view=grid

When in the Facets, for the ""CAN I USE IT"" I click on (in Bulgarian of course):
Show specific rights statements

The Facet should be further split up over specific Rights Statements.
But nothing happens.

!Screen Shot 2017-06-29 at 10.53.50.png!

With about half of the languages (or more) this doesn't work.
Bulgarian, Catalan, Danish, Greek, Finnish, Hungarian etc. don't work"
"During the course of this summer, we're aiming to achieve an MVP utilising the entity collection, in the design created by Carlos and Panos.

*The eventual goal*
Please consider that what we're looking to eventually achieve is the below, with Browse Entry Points at the top (in blue), and featured topics underneath.
https://projects.invisionapp.com/d/main#/console/1083571/227489462/preview


*The MVP Goal:*
I want to be able to find content relating directly to a specific person.
"
"!az.png!
If I am looking for a person that begins with a certain letter, I should be able to click on the letter in the *alphabet picker* and be taken to records that begin with that letter.

Acceptance criteria
- Clicking a letter should take me to the page where that letter begins.
- No indication should be made on the alphabet that I have selected a letter, it's merely a link to that place in the pagination.
"
"!2017-07-03_13-22-32.png!

*Functional Acceptance criteria*
 - Should be redirected from the current people URL as the current explore page. (http://www.europeana.eu/portal/en/explore/people.html)
 - The URL should be http://www.europeana.eu/portal/explore/topics/people.
 - Showing the number of related records is not in scope.
 - The user should be able to view more.
 - There should be pagination.
!2017-07-03_13-43-47.png!
*Design acceptance*
 - Front-end should be implemented as per the framer designs.
 - The circular image should be the representative image of that topic/entity. (e.g. topic is leonardo da vinci, the image should be of him)
 - The background image behind the text card should be a Tier 4 image that best represents the entity. (up for discussion how this could be implemented)"
"At the moment on exhibitions, we don't have the new thematic collections. Please could we add these in.

Collections:
!Screen Shot 2017-07-04 at 14.44.26.png!

Exhibitions:
!Screen Shot 2017-07-04 at 14.44.38.png!"
"Scenario:
* I've got an interest in an artist such as Leonardo Da Vinci, I want to know more about him, and the work he has created.
* *What do we lack to do this at the moment?* - A user friendly way of being certain that what you're looking at is created or related to that correct person. What if there's more than one Leonardo? What if the keyword matches are incorrect? _This design aims to solve this issue by presenting the relevant items in the correct context, and reassures the user they're browsing under the correct user_.

Scenarios/potentials for use:
 - From an item page, where you have a creator as 'Leonardo Da Vinci', the user could click that link to see who this page has been created by.
 - From a search page, where you're searching all items by a specific entity, you could have a content card representing that person with a link back to the item page.
 - From the entities autosuggest, you could have some sort of direct link back to 'Leonardo Da Vinci' when a user types in a search that seems relevant.

Please note:
 - All Entity API client development needs to work against the test Entity API URL *via Apache* for the time being, i.e. http://test-npc.eanadev.org/api

The invision design of this is here:
https://projects.invisionapp.com/d/main#/console/1083571/223432521/preview"
"When I'm looking at an entity item page about a person, I'd like to know when that person was born and when they died.
!Screen Shot 2017-07-04 at 17.13.55.png!
https://projects.invisionapp.com/d/main#/console/1083571/232614339/preview

Acceptance:
 - If the information is available, show both fields.
 - If the information is not available for one of those fields, hide one field only.
 - Do not attempt to resolve or otherwise dereference URIs, but only use localised labels, falling back to English if available
 - Implement according to design attached.
 - If no data for a field is available, then do not show the field title."
"As a user visiting the page and viewing the items, I want some background into the person who's items I am interested in. If I'm looking at Leonardo, I'd like to know a little bit about him and why he built some much random stuff that didn't fly and painted stuff too.

https://projects.invisionapp.com/d/main#/console/1083571/232614339/preview
Acceptance:
 - If a description is available, I should be able to see it.
 - If no description is available, it should be blank.
 - This should localise into the language of the portal session.
 - The full text should be displayed.

!Screen Shot 2017-07-04 at 17.16.28.png!"
"!2017-07-04_17-21-17.png!

In the screenshot above, we have a thumbnail and a caption underneath. In reality, we don't have the ability to show this caption and hyperlink to the original, and in some cases this could be the most relevant.

- Can we expose this?
- Is this translatable?
- Do we get a result similar to what's shown in the image?"
"When I'm looking at the page of an entity, I want to see what they did! I want to see what they were responsible for creating. This should be visible to me as a grid of images so I can pick those images of interest.

!Screen Shot 2017-07-04 at 17.24.54.png!

Acceptance:
 - I should see a list of images that were created by the entity I am viewing.
 - I should see up to 12 images.
 - Enforce that a thumbnail exists for each item."
"Acceptance

 - At the bottom of the items created by the entity, I should be able to click a link to view more images via a standard search query.
 - This search query should search for items that specifically have the origin entity as the creator.
 - The link should be localised.
!Screen Shot 2017-07-04 at 17.26.06.png!"
"As a user with an interest in a particular historical person, I should be able to choose to share this information to the social media network of my choice.

The information should be of value, not random. We should ensure we have quality metadata that provides a good preview for the social media networks.

Acceptance:
 - We should have ""Images from *entity name* on Europeana Collections* as the title of the post.
 - We should make the description available as the social media description.
 - The social media image should be the image depiction of the entity.

!Screen Shot 2017-07-04 at 17.38.29.png!"
"The Collections app needs to be made into a client of the Entity API before any retrieval and rendering of data from the API can be performed.

The Ruby API client library does already support the Entity API (see https://github.com/europeana/europeana-api-client-ruby/blob/develop/lib/europeana/api/entity.rb), but it's not advertised on the gem/repo's README due to the API not even being public alpha yet. Use of it would follow the same pattern as the DSL for the other API methods, documented in the README, e.g.
{code:java}Europeana::API.entity.fetch(type: 'agent', namespace: 'base', identifier: '98053', wskey: 'YOUR_API_KEY'){code}

The Rails app can already be configured with an API key for the Entity API in the environment variable EUROPEANA_ENTITIES_API_KEY, and an entities controller for search suggestions already exists.

*Acceptance criteria:*
* Rails app to be configurable for different Entity API base URLs in env var EUROPEANA_ENTITIES_API_URL, as with Annotations (https://github.com/europeana/europeana-portal-collections/blob/develop/app/controllers/concerns/europeana/annotations_api_consumer.rb#L84-L89)
* Rails app responds to a route following the convention of the entity URIs: /portal/:locale/entities/:type/:namespace/:identifier, where for the entity URI http://data.europeana.eu/agent/base/98053 in English the route would be /portal/en/entities/agent/base/98053, and valid types are agent, place, concept & timespan
* entity controller has a show method which queries the Entity API for the requested entity using the API key from the environment variable
* controller responds to requests for an entity in JSON or JSON-LD (URL path extensions .json and .jsonld) with the unmodified API output
* controller responds to requests for an entity in HTML with the rendered Mustache view class, which may be (dynamic) placeholder content pending implementation of the Mustache template in the styleguide, such as a text-encoding of the JSON in the body of the HTML page"
"Tried to play the following audio file on safari: http://www.europeana.eu/portal/en/record/2059210/data_sounds_lovemoney2008_01_05_firstshowof2008_aud_cutshort.html

It fails intermittently whereas it works fine on Chrome. This is reproducible both on my macbook air and Carlos', please use us both for testing.

The player loads, the spinner spins, but most of the time nothing happens even after one minute.

!2017-07-06_11-38-55.png!"
"Error which is visible in alerts panel on Google Analytics:
Redundant Hostnames

First detected: Oct 3, 2014 12:54:37 PM
Last detected: Jul 4, 2017 5:51:05 PM

Property http://www.europeana.eu is receiving data from redundant hostnames. Some of the redundant hostnames are:
europeana.eu
www.europeana.eu
Redundant hostnames are counted as separate rows in reports, so hits that are going to the same page on your site from different hostnames will be split into multiple rows. With data split across multiple rows, traffic to specific pages will appear lower than it actually is.

To avoid this problem, consider setting up a 301 redirect from one of your redundant hostnames to the other, or create a search-and-replace filter that strips ""www."" from hostnames.

Google Tag Assistant Recordings can help you verify that your redirect is setup correctly, or that your filter is working as intended.

Learn more: https://support.google.com/analytics/bin/answer.py?answer=1034834&hl=en_US "
"Visible in analytics alert panel on Google:
Clicks and Sessions Discrepancy

First detected: Jun 9, 2017 4:21:14 AM
Last detected: Jun 24, 2017 9:22:50 AM

The Ad Destination URL http://www.europeana.eu/portal/en/search?f%5BMEDIA%5D%5B%5D=true&f%5BREUSABILITY%5D%5B%5D=open&f%5BTYPE%5D%5B%5D=IMAGE&q=&view=grid&utm_medium=cpc&utm_campaign=reuse&utm_term=reuse from the AdWords account Stichting Europeana:7439535563 has accrued a significant number of clicks but a lower-than-expected number of sessions. A robots.txt file on your website prevented additional analysis.

Learn more: https://support.google.com/analytics/bin/answer.py?answer=1034383&hl=en_US "
"We have too many domain names, it's unnecessary. We aren't providing a specific service to a specific locale so it doesn't make sense that we have a top-level domain for each one.

If you go to europeana.be and europeana.eu, you're getting the same service - Europeana content. If you go to amazon.co.uk or amazon.de you are getting services that are tailored to each region (such as German products, Germany focussed delivery, on-demand video for the German or British market, supermarket groceries).

This isn't a good use of money, do we have any way of investigating traffic from the below domains? Ash has tried using Google Analytics without any concrete evidence of usage from each one.


We currently have a bunch of domains, and my first thought is *my gosh what an awful lot of domain names*. 

I've used google analytics to try and identify what usage they get, but I'm doubting its data. Can we get logs of traffic that used these domains?

To keep:
europeana1914-1918.eu
europeana1914-1918.fr

To close:

*Generating no sessions:*
europeana1914-18.org
europeana1914-18.de
europeana1914-18.be
1914-18.eu
19141918-europeana.fr
1914-1918europeana.fr
1914-1918-europeana.fr
1914-1918-europeana.co.uk
19141918-europeana.co.uk
19141918europeana.co.uk
1418europeana.co.uk
europeana1914-1918.de
europeana1914-1918.be


*Generated between 0 10 sessions in a 3 month period:*
1418europeana.fr
19141918.fr
europeana1914-18.fr
europeana19141918.fr
europeana1914-1918.com
europeana1914-1918.net
europeana1914-1918.at
europeana1914-1918.nl
europeana1914-1918.lt
europeana1914-1918.pl
europeana1914-1918.dk
europeana1914-1918.sk
europeana1914-1918.ro
europeana1914-1918.lv
europeana1914-1918.si
europeana1914-18.it
europeana1914-18.co.uk
europeana1914-1918.co.uk
europeana19141918.co.uk"
"*Raised by: Adrian*
On the classic collection template, Adrian can't include content from both WordPress and Bolt.

This issue could be solved once the content is integrated from WordPress into Bolt, although [~adrianmurphy] do you have any other potential feed needs?

We could also use a readily available feed-aggregator to solve this problem. "

"Need to include the appropriate meta tags in the head, currently commented out and not detected by the front-end (styleguide).
"
"!autosuggestfinal.png!
https://projects.invisionapp.com/d/main#/console/1083571/242935146/preview
Let's get autosuggest out of the door.

Scope
 - Home and collection pages only

Why?
 - Well it's great. For many reasons.
 - We have no Google-esque way of telling users that they've misspelled. This won't solve that, but it will guide their spelling at the point they make the search helping them get to their result faster.
 - It will differentiate when there are identically named people, or places, or similarly named. 
 - Clicking on an option that says 'Leonardo Da Vinci' is a concrete way of knowing that what they have clicked is exactly what they're searching for. It removes the ambiguity.

API
 - At the moment, we can use acceptance Entity autosuggest API as it is the most up to date. Hugo will give us updates on any issues occurring on the API."

"When a user is on a search results page and already has terms stored in the search bar, should we show the autosuggest? Is it of value at this point or does it just get in the way when people are trying to refine their searches?

!Screen Shot 2017-07-24 at 09.54.30.png!"
"*Reported by:* David
BUG:
Royal Museum Greenwich records can be searched http://www.europeana.eu/portal/en/search?f%5BDATA_PROVIDER%5D%5B%5D=Royal+Museums+Greenwich&view=grid in Collections but clicking any of them results in an error with the Chrome developer console reporting a HTTP500.

Needs to be investigated."
"In the absence of Entities Browse, we want to build some links to our Entities item pages so that people can enjoy them.

Let's make them available from the record page. When a user clicks on a link to an agent that exists within our entity collection, it should take them to the associated Entity item page.

*This piece of work should be made available when Agent Entities are available for release.*

Sample record for testing: http://www.europeana.eu/portal/en/record/9200365/BibliographicResource_1000055759141.html

!Screen Shot 2017-07-24 at 11.38.02.png!"
"We need a breadcrumb on the entity agent page, to be discussed how best to achieve it.

Let's have 'Return to home > Agent Name' 

!Screen Shot 2017-07-25 at 10.00.04.png!"
"We only need one home, let's remove the second home:
!Screen Shot 2017-07-26 at 13.17.39.png!"
"*Pre-deploy:*
* take a screenshot of the state of all banners in the CMS at http://www.europeana.eu/portal/en/cms/banner
* ENABLE_BLOG_POSTS_THEME_FILTER environment variable can be removed as it is no longer used
* ENABLE_ENTITY_PAGE=1 *if the entity page is to be enabled, i.e. not on production*
* ENABLE_SEARCH_FORM_AUTOCOMPLETE=1 *if the entity auto-complete is to be enabled, i.e. not on production*
* EUROPEANA_ENTITIES_API_KEY=apikey *if any entities API features are to be enabled*
* CORS_ORIGINS: ""http://portalurl.eu https://portalurl.eu""
* deploy styleguide, and configure Collections to use latest version (v0.2.99)

*Post-deploy:*
* compare the state of all banners in the CMS with the screenshot taken pre-deploy to ensure none have been changed by the deployment process as issues have been reported by editorial personnel
* EC-11971: if SSL enforcement is to be deployed, then *after* Collections is updated, deploy Apache changes
* release notes on Github
* given all the ""ifs"" above, copy any tasks not yet applied on production to v2.5.0 release checklist"
"The number of records that fail to load, as reported in Google Search Console, have gone sharply up since July 17. May of the reported failing items can be successfully retrieved from the API and the DPS team reports these datasets to be untouched. So the error must be on the client side and since it affects both UX and SEO very negatively it needs to be fixed with very high priority.

Some affected datasets with one example URL that fails to resolve:
2048607 - http://www.europeana.eu/portal/en/record/2048607/data_item_mpiwg_rara_MPIWG_K9SG5N98_.html
2032004 - http://www.europeana.eu/portal/en/record/2032004/8678.html
9200386 - http://www.europeana.eu/portal/en/record/9200386/BibliographicResource_3000059112691.html
9200231 - http://www.europeana.eu/portal/en/record/9200231/BibliographicResource_3000006448043.html

Note: The cause may be the same as for the related ticket EC-12010
"
"Acceptance criteria:
 - I should never see less than 12 items for an agent unless:
 - If an agent does not have 12 items, only show what the agent has got.

*Additionally*
- The first 12 items should all be requested in one AJAX call, not in 6 calls for 2 items each
 - We should always fill a row if there are enough items, avoiding empty space (see below)
!Screen Shot 2017-08-01 at 09.17.43.png!"
"In order to future-proof our ingestion process, we've ingested far more agents into the Entities than we will ever need. This protects us in the event we ingest new content from an agent we've never seen before. The problem is that we are exposing all of these agents, including some British television-soap stars (I'll eat my hat the day Barbara Windsor has items in the collections portal).

Acceptance criteria:
 - If an agent does not have items, that agent should not be accessible.
 - An unaccessible agent should go to our 404 page.
"
"Reproducible on the homepage of collections.
!Screen Shot 2017-08-01 at 09.26.20.png!
!Screen Shot 2017-08-01 at 09.26.26.png!"
"There are a number of pages that contain social media links for sharing content, e.g. twitter and facebook.

There should be (automated) tests in place to verify that all these links are working as expected, in order to ensure that regression is detected.

An example from an exhibitions page:

{code:java}<meta name=""twitter:site"" content=""@EuropeanaEU"">
<meta name=""twitter:title"" content=""..."">
<meta name=""twitter:description"" content="".."">
<meta name=""twitter:card"" content=""summary_large_image"">
<meta name=""twitter:creator"" content=""@EuropeanaEU"">
<meta name=""twitter:image"" content=""..."">
<meta name=""description"" content=""..."">
<meta property=""fb:app_id"" content=""185778248173748"">
<meta property=""og:site_name"" content=""..."">
<meta property=""og:description"" content=""..."">
<meta property=""og:url"" content=""..."">
<meta property=""og:title"" content=""..."">
<meta property=""og:image"" content=""..."">
{code}"
"!Screen Shot 2017-08-01 at 15.47.52.png!
Looks like we missed some text on the front-end!
Reproducable on the top-middle item in galleries here: http://www.europeana.eu/portal/en/explore/galleries

*Original:*
Users by now should be aware of galleries and the functionality, so let's drop the tooltips regarding this.

!Screen Shot 2017-05-24 at 15.37.42.png!
!Screen Shot 2017-05-24 at 15.39.44.png!

*Acceptance criteria: *
 - There should be no more tooltips on the galleries page

 - There should be no more tooltips to galleries from the portals page"
"The entity api returns `dateOfBirth` and `dateOfDeath` which are arrays of date strings, for example:

{code:java}dateOfDeath: [
  ""1878"",
  ""1878-05-01""
],
dateOfDeath: [
  ""1924-03-02"",
  ""--03-02"",
  ""1924""
],
{code}

However, the current implementation just picks the first value without looking at the others.

Acceptance criteria, you should see in each record for the above:
 - Date of birth:  1878-05-01
 - Date of death:  1924-03-02
"
"Consideration of a solution for UGC both on web and during a collection day.

*Background documentation*
Guidelines from Adrian on what is needed: https://docs.google.com/document/d/1FfHJ_HEeX1eyFG1k38xb6R1ZCX9OjljlOTQX7kk1jzU/edit
Formal Migrations collection plan: https://docs.google.com/document/d/1V9qiNRknm4vSnWaL2WzKSaKo9BnF-b4NoMGECcTlviY/edit

Collection day scenario:
Contributor can go to a collection day, creates one record that includes a picture of an object, and a story that explains that object, could create another record that is a sound recording of their trials and tribulations with a description alongside. No direct link between them, but they could be related by the Author name.


This should be completed ideally by the end of November, but won't be launched until March so at latest we have until the end of January with leeway.

*Points:*
* Need to consider both vague and accurate dates of events/objects (Roughly the 1950s, or September the 3rd 1995)
* Moderation is not a requirement
* Editing of content would be ideal in order to improve the quality we output
* We need to allow reporting of migration content that is offensive or otherwise.
* Media *must* be stored in the European Union
* Should consider the future of 1914-1918
* [~hugo.manguinhas] mentioned something about cloud API upload

*Nice to have's:*
* Swearing moderation?
* Email notification of publication - nice to have - consideration that they will reshare their own content and it drive traffic
* Can we crowdsource the submission process to make sure itΓÇÖs not offensive?
"
"As with the Fashion Browse landing page, we need to show an indication of what each kind of content is.

We're doing that for most things, but see this entity for example: https://test-npc.eanadev.org/portal/en/explore/people/146800
!Screen Shot 2017-08-03 at 14.15.05.png!

Are we missing an icon for certain content types?
Fashion:
!Screen Shot 2017-08-03 at 14.12.14.png!"
"When a user is trying to change their language on a laptop that doesn't have a scroll wheel, or a dodgy scroll (such as Adrian's laptop), you'll find it impossible to get to the bottom language on the list. Could we add a scrollbar to this list or another solution?

!Screen Shot 2017-08-03 at 14.47.52.png!"
As identified by [~kgish] https://europeanadev.assembla.com/spaces/europeana-npc/tickets/2254/details?comment=1259436103 there are various uses of page_title, these .rb templates should use page_content_heading and only application_view.rb shoul use page_title
"!Screen Shot 2017-08-04 at 12.21.25.png!
In the absence of a UX and UI designer, can we add additional text by the creator to offer them both the ability to search and to learn more by the entity page. Ideas are welcome in how we could achieve this.

The acceptance criteria:
 - The creator name alone should take the user to a search query, as before.
 - The following link should take the user to the page for that specific entity.
 - The English text should show 'Learn more about' + creator.
 - Hard code the string rather than localise until we have a firmer design."
"Now that we've got through Agents, let's look at building the concept pages.

Considerations, [~hugo.manguinhas] has informed me that we are lacking a number of images for concepts, can we pull images from out own collection via the API to render on the page?"
"This is a ticket to automatically update the menu in exhibitions, so that when new thematic collections or changes are made, we don't have to do anything specific to exhibitions.

Acceptance criteria:
* When a new thematic collection or page is added to the menu in collections, this should appear in exhibitions
* Ideally, the blog posts should also appear in the exhibitions menu, as well as the latest galleries.
* This should happen within a reasonable amount of time, e.g. 6 hours.

"

"The following explore views should be refactored to reduce code duplication.

{code:java}explore
- colours.rb
- people.rb
- periods.rb
- sources.rb
- topics.rb
- new_content.rb
{code}

Each of these uses the following methods which can be parameterized:

{code:java}def page_content_heading
  t('site.browse.ITEM.title')
end

def content
  mustache[:content] ||= begin
  {
      title: page_title,
      description: t('site.browse.ITEM.description'),
      browse_entries: @ITEM.blank? ? nil : {
        items: browse_entry_items(@ITEM)
      }
  }
  end
end

def head_meta
  mustache[:head_meta] ||= begin
  [
    { meta_name: 'description', content: page_title }
  ] + super
  end
end

  private

def body_cache_key
  'explore/ITEM' + (@collection.present? ? '/' + @collection.key : '') + '-' + @ITEM.map(&:updated_at).max.to_i.to_s
end
{code}"
"Need to update the Rubocop gem to the same version that hound is using so that the development code quality checks are consistent with those being done on github.

1. Update the Rubocop gem gem version in the `Gemfile` and run `bundle install`
2. Update the `rubocop.yml` configuration file to be compatible with latest Rubocop
3. Exclude block length warnings for rspec etc. by adding the following section to the `rubocop.yml` configuration file:

{code:java}Style/BlockLength:
  Exclude:
    - 'Rakefile'
    - '**/*.rake'
    - 'test/**/*.rb'
{code}

For more information see: https://stackoverflow.com/questions/40934345/rubocop-25-line-block-size-and-rspec-tests."
"*Pre-release:*
* Update the the CF-manifest with new ruby-buildpack version: https://github.com/cloudfoundry/ruby-buildpack.git#v1.6.47
* ENABLE_ENTITY_PAGE=1 *if the entity page is to be enabled* (or make this a default feature)
* ENABLE_SEARCH_FORM_AUTOCOMPLETE=1 *if the entity auto-complete is to be enabled* (or make this a default feature)
* EUROPEANA_ENTITIES_API_KEY=apikey *if any entities API features are to be enabled*
* Change EUROPEANA_PRO_URL to ""http://old-pro.eanadev.org""
* Γ£ôupdate translations to latest versions prior to acceptance deployment


*Post-release:*
* EC-11971: if SSL enforcement is to be deployed, then *after* Collections is updated, deploy Apache changes
* release notes on Github"
"The GET method of the Entity API has been updated to expose the Wikimedia Commons link in the response, see ticket [API ticket 755|https://app.assembla.com/spaces/europeana-apis/tickets/755]. This change implies that the value of the depiction field is no longer a string (URI) but a structure made out of an ""id"" and ""source"" fields.

Following this change, Collections Entity Pages need to be updated to accept this new structure and reuse the Commons link in the source field instead of generating the URL on the fly.

Acceptance: Europeana Portal must work with new format"
"We have recently noticed that the Entity API had not been updated following an update of spec that was done a while ago, see [API ticket 760|https://app.assembla.com/spaces/europeana-apis/tickets/760]. In particular, the field ""contains"" and ""totalItems"" were not changed to respectively ""items"" and ""total"".

This change has impact on the auto-complete widget that will need to look for the ""items"" field instead of ""contains""."
"Go to the [Ludwig van Beethoven|http://localhost:3000/portal/en/explore/people/146880-ludwig-van-beethoven.html] entity page and you should see the following error:

!bug-lastAppended-is-not-defined.png!



"
"As a follow up from EC-12029, disable caching on entity pages until we can get some statistics on usage and performance impact of entity pages after we go live with them.
The caching should be disabled, but the existing logic not removed entirely so as to make it easy to restore the caching functionality.

Acceptance:
Entity pages no longer cached/written to cache
Entity caching logic still present in codebase"
"In order to make the entity more flexible and future proof, all of the entity behavior should be moved into an `EDM::Entity` model class.

This would mean creating a base class as the common denominator and then deriving the different entity types (agent, topic, place, timespan) by sub-classing this base class.

The show controller would set an entity model instance which is built using the URL parameters.

{code:java}def show
  @entity = EDM::Entity.build(type, namespace, id)
  # e.g. EDM::Entity.build('agent', 'base', 146803) #=> EDM::Entity::Agent
end
{code}

Additionally:
* The i18n entity helpers would be moved into a model concern, e.g. DateNormalisation, included in EDM::Entity
* The entity helper methods would be moved to model methods
* The entity helper tests would have to be moved to model tests.
* The relevant method calls in the views and EntityDisplayingView concern would need to be converted to the equivalent model methods."
"I am using an Android Tablet.
Holding it in Portrait mode.
Doing a search (doesn't matter what).
In the Search Result Page I should see Facets or a pulldown to access Facets.
I see neither.
On a Desktop Browser I can create the same situation by narrowing the Browser to a point where the Facets disappeared, but the Pull-down (Filter) does not yet show.

!image.011.png!"
"Using a mobile phone:
When I am at an Entity Page or Item Page.
I click the Search Icon.
I expect that the Search Edit Box opens.
But sometimes this does not happen.
In those cases a small square shows where the Search Icon was before.
Only after clicking that square the Search Edit Box opens.

!image.012.png!"
"In the absence of Entities Browse, we want to build some links to our Entities item pages so that people can enjoy them.

Let's make them available from the record page. When a user clicks on a link to an concept that exists within our entity collection, it should take them to the associated Entity item page.

*This piece of work should be made available when Agent and Concept Entities are available for release.*

!Screen Shot 2017-07-24 at 11.38.02.png!"
The js files for collections / the portal live at the top level of the js directory within the styleguide - they should be moved into a (new) project folder (like the js files for the other projects) and all references / paths should be updated.
"As with concepts and agents, let's implement places in the same [design|https://projects.invisionapp.com/d/main#/console/1083571/232614339/preview].

Acceptance criteria:
 - The name of the location is shown in the title
 - The depiction of the location is shown where available.
 - The link to the depiction must be clickable to the original location the image is shown
 - A description of the location is shown below the image
 - One tab is visible with *Items from x*
 - Is it possible to have another tab depicting *Searches for x*?"
"See:

* [europeana.eu/portal/et|europeana.eu/portal/et]
* [europeana.eu/portal/mt|europeana.eu/portal/mt]
* [europeana.eu/portal/pl|europeana.eu/portal/pl]

!feedback-error.png!"
"For context, see EC-10579

Options (not mutually exclusive):
* restrict size of uploaded images
* auto-compress uploaded images using imagemagick+paperclip
* advise Editorial to compress before upload

Acceptance criteria:
* proposal how to best optimize images"
"There are errors on the exhibitions test instance

{""message"":""\nActionView::Template::Error (undefined method `locale' for Europeana::I18n:Module):\n lib/europeana/mixins/image_credit.rb:53:in `image_credit'\n lib/europeana/elements/intro.rb:17:in `data'\n lib/europeana/elements/base.rb:33:in `to_hash'\n lib/europeana/page.rb:19:in `block in elements'\n lib/europeana/page.rb:14:in `map'\n lib/europeana/page.rb:14:in `with_index'\n lib/europeana/page.rb:14:in `elements'\n app/views/alchemy/pages/show.rb:19:in `page_data'\n app/views/alchemy/pages/show.rb:12:in `block (2 levels) in cached_body'\n app/views/alchemy/pages/show.rb:10:in `block in cached_body'\n app/views/alchemy/pages/show.html.mustache:56:in `_app_views_alchemy_pages_show_html_mustache__691461726371215805_47038341179980'\n\n"",""@timestamp"":""2017-08-17T09:34:14.045+00:00"",""@version"":""1"",""host"":""ac606afe-d2a4-4548-5a6a-47e3"",""level"":""FATAL"",""thread"":""47038350412200""}



these were probably introduced by the updating of the localization gem as part of EC-11960"
"The revised outcome of EC-11971 was that SSL enforcement has been readied for the Collections site, but not applied.

In preparation for SSL enforcement, we need to:
* #2392: add https://www.europeana.eu/ to Google Search Console properties
* #2393: separate robots.txt for http/https, as recommended by Google: https://support.google.com/webmasters/answer/6033049#https-faqs
* #2394: separate sitemaps for http/https, as recommended by Google: https://support.google.com/webmasters/answer/6033049#https-faqs
* #2395: consider whether to SSL galleries by loading images through the media proxy (see EC-11971)
* #2396: edm:preview URLs are http://europeanastatic.eu/api/image; on search results we rewrite this to https://www.europeana.eu/api/v2/thumbnail-by-url.json, but not on facet links on browse landing pages, and need to do so; also find out if/when edm:preview from API will have the thumbnail API URLs
* #2397: images from Pro JSON API are over http:// preventing secure blog post and event pages

*TODO:* create sub-tasks for the above

After this, SSL should be enforced, by undoing https://github.com/europeana/portal-apache-web/commit/c497af975990c378f4aca9e32745b222a43de23e"
"This will be a full migration from the [Assembla|https://www.assembla.com] ticketing tool to the [Jira|https://www.atlassian.com/software/jira] issue tracking tool and is based on the findings in the earlier [spike|https://app.assembla.com/spaces/europeana-npc/tickets/new_cardwall#ticket:2352].

Since there are no migration tools available on the Jira Marketplace for Assembla, it will be necessary to write this in house especially adapted to our requirements. This ticket will be divided into the following three phases:

* Europeana Collections
* Europeana APIs
* Europeana Infrasctructure
* Europeana Data Partners
* Europeana Design and UX

First step will be to migrate the Collections Space first as pilot, maybe initially in parallel with Assembla to catch any missed discrepancies, with later decision base on results to migrate the other spaces.

The Assembla data consists of the following elements:

{code:java}Users
 - Groups
 - Permissions
 - Roles
Tickets
 - Associations
 - Comments
 - Components
 - Importance
 - Statuses
 - Tags
 - Types
 - Estimates
Milestones
Wiki pages
Workflow
{code}

Wiki pages fall out of scope until an alternative for documentation has been found (Google Docs, Confluence or whatever).

Jira issues look like this:

{code:java}Types
- Bug
- Epic
- Story
- Task
- Sub-task
Statuses
- Open
- In progress
- Reopened
- Resolved
- Closed
- To do
- Done
Resolutions
- Done
- Won't do
- Duplicate
- Cannot reproduce
Priorities
- Highest
- High
- Medium
- Low
- Lowest
{code}

From now own the term *export* refers to the action of exporting data from Assembla, and the term *import* refers to the action of importing that data into Jira. The stored export format will be readable CSV for future reference as well as backup.

The following tasks need to be done:

* Export all data to CSV (done)
* Import users, permissions, groups and roles (done)
* Create new Jira project (done)
* Create new labels, tags, sprints, priorities, states and issue types for mapping (4h)
* Import tickets (12h)
* Import comments (4h)
* Import/upload attachments (4h)
* Setup issue associations: related, parent/child, etc (6h)
* Milestones and sprints (this can be done manually)
* Links and markdown conversion in comments, description (this can be done manually)
* References in Git commits and PR comments (4h)

A ticket `has many` comments and `has many` attachments, and each comment and attachment `belongs to` a ticket.

A ticket `space_id` is mapped to a corresponding `project` in Jira.

A `ticket` is converted into a Jira `issue`, where those tickets with a non-zero `is_story` value are tagged with `issue type` = `story`.

Milestones are covered by referring to the ticket `milestone_id`.

A ticket `component_id` needs to be mapped to the relevant Jira `component`.

Each created Jira ticket will reference the original Assembla ticket number and will have a label `Assembla`. That way there'll be a permanent link referring back to the original Assembla content, e.g. no context lost, as long as the Assembla website is accessible.

All of the scripts have been written in Ruby, and they can all be re-used as is.

*References*
* [JIRA Cloud REST API Reference|https://docs.atlassian.com/jira/REST/cloud]
* [Assembla API Documentation Site|http://api-docs.assembla.cc/index.html]
* [JIRA Importing data from CSV|https://confluence.atlassian.com/adminjiracloud/importing-data-from-csv-776636762.html]"
"Tasks:
*Pre-deploy:*
* Configure Exhibitions style guide to: (v0.2.99)"
"From: https://support.google.com/webmasters/answer/6033049

"" *Be sure to add the HTTPS property to Search Console.* Search Console treats HTTP and HTTPS separately; data for these properties is not shared in Search Console. So if you have pages in both protocols, you must have a separate Search Console property for each one.""

Acceptance criteria:
* https://www.europeana.eu/ added to Google Search Console properties"
"From Google's [Overview: Site moves with URL changes|https://support.google.com/webmasters/answer/6033049#https-faqs]: ""We recommend separate robots.txt files for HTTP and HTTPS, pointing to separate sitemap files for HTTP and HTTPS. We also recommend listing a specific URL in only one sitemap file.""

The rationale for this is that [robots.txt|http://www.europeana.eu/robots.txt] contains a link to the (non-SSL) [sitemap|http://www.europeana.eu/portal/europeana-sitemap-index-hashed.xml] which in turn contains links to non-SSL record pages on Collections.

Acceptance criteria:
* http://www.europeana.eu/robots.txt references http:// sitemap
* https://www.europeana.eu/robots.txt references https:// sitemap"
"From Google's [Overview: Site moves with URL changes|https://support.google.com/webmasters/answer/6033049#https-faqs]: ""We recommend separate robots.txt files for HTTP and HTTPS, pointing to separate sitemap files for HTTP and HTTPS. We also recommend listing a specific URL in only one sitemap file. [...] List all HTTP URLs in your HTTP sitemap, and all HTTPS URLs in your HTTPS sitemap, regardless of redirects when the user visits the page. Having pages listed in your sitemap regardless of redirects will help search engines discover the new URLs faster.""

Acceptance criteria:
* http://www.europeana.eu/portal/europeana-sitemap-index-hashed.xml includes http:// URLs
* Response of those URLs include http:// URLs, e.g. http://www.europeana.eu/portal/europeana-sitemap-hashed.xml?from=0&to=45000
* https://www.europeana.eu/portal/europeana-sitemap-index-hashed.xml includes https:// URLs
* Response of those URLs include https:// URLs, e.g. https://www.europeana.eu/portal/europeana-sitemap-hashed.xml?from=0&to=45000
* Records need only to appear in one of the two sitemaps, following the [SSL dataset blacklist used by Apache|https://github.com/europeana/portal-apache-web/blob/819a595ab255a50d066fd5d095fca77af77d90ea/.bp-config/httpd/vhosts/00-www.europeana.eu.conf#L263]"
"Full-resolution images in galleries are served direct from the provider, and may therefore not be accessible over SSL, which is an obstacle to adoption of https:// on the Collections site.

There are two obvious ways to handle this:
# Do not SSL the galleries (in place on [develop branch of Apache|https://github.com/europeana/portal-apache-web/blob/819a595ab255a50d066fd5d095fca77af77d90ea/.bp-config/httpd/vhosts/00-www.europeana.eu.conf#L258-L272] already)
# Serve images in galleries via the media proxy, just as we do with media on the item pages

Acceptance criteria:
* Serve images in galleries via the media proxy
* Assess the impact of this on the performance of the galleries given that the media proxy also has the overhead of sending requests to the Record API"
"edm:preview URLs returned by the API (still) start http://europeanastatic.eu/api/image

On search results we rewrite this to https://www.europeana.eu/api/v2/thumbnail-by-url.json, but not on facet links on browse landing pages, and need to do so.

Acceptance criteria:
* Preview thumbnail images beside the facet links on the browse landing pages use the thumbnail API
* DRY up the code for thumbnail treatment in Collections, which is implemented in various places, and in various ways
* Find out if/when edm:preview from API will have the thumbnail API URLs
"
"Images from Pro consumed over its JSON API, e.g. for [blog posts|http://www.europeana.eu/portal/en/blogs], are always served over http:// preventing secure serving of those pages on Collections.

Pro does not have the .europeana.eu wildcard certificate installed.

Acceptance criteria:
* Install .europeana.eu wildcard SSL certificate on Engine Yard and enable for the Pro app
* Change the Pro base URL used by Collection to use https:// and check that this results in https:// URLs for Pro assets in JSON API responses"
"Deployment to production of EC-11598 introduced annotations obtained by AJAX but *only when explicitly requested by URL parameter*, so that it can be benchmarked in a production environment against the current approach to obtaining annotations during initial page request.

See EC-11598 for implementation ticket.

See EC-11744 for benchmarks performed for same treatment of similar items API call, and EC-11855 for hierarchies.

As an outcome of this ticket we need figures for comparative performance of the two approaches on the production environment, and a decision as to whether we should switch to the new AJAX approach."

"This epic covers the spikes involved with Europeana Newspapers. The aim is to understand what is going to be involved in migrating the content from [The European Library|http://www.theeuropeanlibrary.org/tel4/newspapers] into Europeana Collections.

The end goal is to have a full-text searchable Newspapers collection within Europeana Collections. "
"We need to move Newspapers into collections, with data necessary to search and retrieve the newspapers including:

* Image assets
* IIIF data
* Metadata associated with the newspapers (and subsequent EDM mapping)
* OCR processed text
* Relation of OCR processed text to IIIF imagery

We need to answer the following questions:

* Where are we going to store the Newspapers data when we migrate it into collections?
* How will this map to EDM, what additional data storage will we need?
* What dependencies do we have on APIs to be able to fulfil this?"
"When we create the Newspapers collection in Europeana Collections, we're going to need a viewer for the user to see the newspaper content. This is a complex tool, visible here: http://www.theeuropeanlibrary.org/tel4/newspapers/issue/3000116082758

Let's investigate how the viewer works to perform the following features:

* Switching between pages in the newspaper
* Standard browsing and zoom of the newspaper IIIF imagery
* Rendering of the OCR text content
* Link betweeen clicking the OCR text content and how it jumps to the correct location on the image

Constraints:
 - Must be a IIIF-viewer.
 - Leaflet-IIIF, IIPMooViewer and UniveralViewer are the primary candidates."
"This issue came in by email:
I would like you to delete my page
http://www.europeana.eu/portal/en/record/2020601/contributions_20148.html
since the info I gave is wrong and it seems that, although I tried many times to edit it or delete it, I can't do it by myself after all."
"Because of UX concerns from [~panagiotiskyrou639031] about the differences between a set of entities results and keyword search results, when a search is fired, it needs to be identical to how the results would show if they were typed. See discussion in EC-12067.

E.g. Clicking Johannes Vermeer should result in a keyword search for Johannes Vermeer.
Clicking Silver Nitrate should result in a keyword search for silver nitrate.

We need to do this so that we can deliver Autosuggest in a timely manner as per our commitments, and then we will refine it afterwards for the multilingual issues.

We should also remove from the auto-suggest all fields except the textual suggestion itself, e.g. DOB and DOD for agents."
"See EC-12082 for prior investigation.

The new Pro site has reworked content structures, including distinct content types for culture lover blog posts and events.

Once it has culture lover blog posts and events imported, and the JSON API configured for them, Collections needs to be adapted to continue to work against it."
"As per the design, I should be able to expand all or collapse all metadata fields on the item page:
https://projects.invisionapp.com/d/main#/console/1083571/235131442/preview

!Screenshot 2017-09-04 at 07.16.18.png!

Acceptance Criteria:
* If the metadata fields are not open, I can click the plus to open them next to the text 'Expand all'
* If one or more metadata fields are open, I can click the minus to collapse them next to the text 'Collapse all'
* The state of each metadata field is remembered within the browser so that each time I open a field I can come back to it on the next item I view."
"- The set has been re-imported to UIM  form Mint as usual. There are a substantial number of resources to dereferenceable vocabularies and therefore the dereference step has been triggered, 

- The dereferencing workflow was taking an unsual ammount of time from 2017.08.29 14:56:42 to 09:21:41 08.30. At  09:21:41 08.30 was not completed. The log was checked and errors detected and the workflow step has been cancelled. 

- I was not able to identify the issue from the logs. Thre are several error logs of this kind:

2017.08.29 14:57:01 CEST|SEVERE|eu.europeana.uim.plugin.solr.service.SolrWorkflowPlugin@ca8a7193 : Encountered "" ""<"" ""< """" at line 1, column 216.

I need assistance to identify the cause of the problem reported by the error log, solve it and know how is best to proceed further in order to be able to dereference this set without incidence.


Cheers, "
"*Can we assess this in test before we put it onto acceptance? We need to ensure quality first.*
Let's implement the date filter on migration, just as it is currently implemented on Fashion.

People will want to be able to search for their stories by date.

The scope of this ticket is currently to move the filter as is, without consideration for poor quality dates at this time. We can consider this in the future.

Acceptance criteria:

* I can see the date filter on the collection 'migration'"
"I appreciate this is a story as well as a bug, the fix is probably a data fix but I think a story would be needed as a result of this...

The date facet on fashion is currently completely unusable because of some problematic data. Can we make it more resilient to this bad data so that it becomes usable?

I'm open to suggestions here, perhaps we need to be able to curate the date span it should cover, rather than leaving that open as it will have outliers.
http://www.europeana.eu/portal/en/collections/fashion?q=&view=grid

!Screenshot 2017-09-17 at 21.25.56.png!"
"This ticket covers the final work needed to solve problems with EUScreen following ticket 2422

It should include:
* A solution to the issue of clicking the thumbnail below the player which is causing the player to fail because of an expired token
* Communication to EUScreen of any further issues in playback in Firefox"
"Following Richard's proposal, we need to finalise what we want to build to serve UGC for both Migration and the future of 1914-1918.

This includes:
* A timeline for development of a lightweight version of MyEuropeana to fulfil this
* Discussion of the complexity in developing an API to fulfil this need
* Identifying any UX requirements needed to fulfil both Migration and 1914-1918
* Alleviate risks in the process

A discussion should take place between Ash, Hugo and Richard.
"

